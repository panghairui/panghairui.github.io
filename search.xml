<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æ‰‹å†™RPCæ¡†æ¶</title>
      <link href="/2021/07/12/shou-xie-rpc-kuang-jia/"/>
      <url>/2021/07/12/shou-xie-rpc-kuang-jia/</url>
      
        <content type="html"><![CDATA[<h1 id="æ‰‹å†™-RPC-æ¡†æ¶"><a href="#æ‰‹å†™-RPC-æ¡†æ¶" class="headerlink" title="æ‰‹å†™ RPC æ¡†æ¶"></a>æ‰‹å†™ RPC æ¡†æ¶</h1><hr><h2 id="ä»€ä¹ˆæ˜¯-RPC-æ¡†æ¶ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-RPC-æ¡†æ¶ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ RPC æ¡†æ¶ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ RPC æ¡†æ¶ï¼Ÿ</h2><h3 id="ä»€ä¹ˆæ˜¯-RPC-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-RPC-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ RPC ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ RPC ï¼Ÿ</h3><p>RPCï¼ˆRemote Procedure Callï¼‰å³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ŒRPCå…³æ³¨çš„æ˜¯è¿œç¨‹è°ƒç”¨ï¼Œè€Œéæœ¬åœ°è°ƒç”¨ã€‚</p><p><strong>ä¸ºä»€ä¹ˆè¦ RPC ?</strong> å› ä¸ºä¸¤ä¸ªä¸åŒçš„æœåŠ¡å™¨ä¸Šçš„æœåŠ¡æä¾›çš„æ–¹æ³•ä¸åœ¨ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œç¼–ç¨‹æ‰èƒ½ä¼ é€’æ–¹æ³•è°ƒç”¨æ‰€éœ€è¦çš„å‚æ•°ã€‚å¹¶ä¸”ï¼Œæ–¹æ³•è°ƒç”¨çš„ç»“æœä¹Ÿéœ€è¦é€šè¿‡ç½‘ç»œç¼–ç¨‹æ¥æ¥æ”¶ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨ç½‘ç»œç¼–ç¨‹æ¥å®ç°è¿™ä¸ªè°ƒç”¨è¿‡ç¨‹çš„è¯å·¥ä½œé‡æ˜¯éå¸¸å·¨å¤§çš„ã€‚å› ä¸ºï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘åº•å±‚ä¼ è¾“æ–¹å¼ï¼ˆ TCP è¿˜æ˜¯ UDP ï¼‰ã€åºåˆ—åŒ–æ–¹å¼ç­‰ç­‰æ–¹é¢ã€‚</p><p><strong>RPC èƒ½å¸®åŠ©æˆ‘ä»¬åšä»€ä¹ˆå‘¢ï¼Ÿ</strong> é€šè¿‡ RPC å¯ä»¥å¸®åŠ©æˆ‘ä»¬è°ƒç”¨è¿œç¨‹è®¡ç®—æœºä¸ŠæŸä¸ªæœåŠ¡çš„æ–¹æ³•ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç®€å•ã€‚å¹¶ä¸”ï¼Œæˆ‘ä»¬ä¸éœ€è¦äº†è§£åº•å±‚ç½‘ç»œç¼–ç¨‹çš„å…·ä½“ç»†èŠ‚ã€‚</p><blockquote><p>RPC çš„å‡ºç°å°±æ˜¯ä¸ºäº†è®©è°ƒç”¨è¿œç¨‹æ–¹æ³•åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ç®€å•</p></blockquote><h3 id="RPC-åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#RPC-åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="RPC åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>RPC åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>RPCçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ä¸‹é¢ğŸ‘‡ 6 ä¸ªéƒ¨åˆ†å®ç°çš„ï¼š</p><ul><li>å®¢æˆ·ç«¯ï¼ˆæœåŠ¡æ¶ˆè´¹ç«¯ï¼‰ï¼šè°ƒç”¨è¿œç¨‹æ–¹æ³•çš„ä¸€ç«¯ã€‚</li><li>å®¢æˆ·ç«¯ Stubï¼ˆæ¡©ï¼‰ï¼šä»£ç†ç±»ï¼ŒæŠŠè°ƒç”¨æ–¹æ³•ç±»ã€æ–¹æ³•å‚æ•°ç­‰ä¿¡æ¯ä¼ é€’åˆ°æœåŠ¡å™¨ã€‚</li><li>ç½‘ç»œä¼ è¾“ï¼šç½‘ç»œä¼ è¾“å°±æ˜¯æŠŠè°ƒç”¨çš„æ–¹æ³•çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å‚æ•°è¿™äº›ä¸œè¥¿ä¼ è¾“åˆ°æœåŠ¡ç«¯ï¼Œç„¶åæœåŠ¡ç«¯æ‰§è¡Œå®Œä¹‹åå†æŠŠè¿”å›ç»“æœé€šè¿‡ç½‘ç»œä¼ è¾“ç»™ä½ ä¼ è¾“å›æ¥ã€‚ç½‘ç»œä¼ è¾“çš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚æœ€åŸºæœ¬çš„ Socket æˆ–è€…æ€§èƒ½ä»¥åŠå°è£…æ›´åŠ ä¼˜ç§€çš„ Nettyï¼ˆå¤§éƒ¨åˆ†é€‰æ‹©ï¼‰ ã€‚</li><li>æœåŠ¡ç«¯ Stubï¼ˆæ¡©ï¼‰ï¼šè¿™ä¸ªæ¡©ä¸æ˜¯ä»£ç†ç±»ã€‚æŒ‡çš„æ˜¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯æ‰§è¡Œæ–¹æ³•çš„è¯·æ±‚åï¼Œå»æŒ‡å®šå¯¹åº”çš„æ–¹æ³•ç„¶åè¿”å›ç»“æœç»™å®¢æˆ·ç«¯çš„ç±»ã€‚</li><li>æœåŠ¡ç«¯ï¼ˆæœåŠ¡æä¾›ç«¯ï¼‰ï¼šæä¾›è¿œç¨‹æ–¹æ³•çš„ä¸€ç«¯ã€‚</li></ul><p><strong>å…·ä½“åŸç†å›¾ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.20g15lg6wge8.png"></p><ol><li>æœåŠ¡æ¶ˆè´¹ç«¯ï¼ˆclientï¼‰ä»¥æœ¬åœ°è°ƒç”¨çš„æ–¹å¼è°ƒç”¨è¿œç¨‹æœåŠ¡</li><li>å®¢æˆ·ç«¯ Stub ï¼ˆclient stubï¼‰æ¥æ”¶åˆ°è°ƒç”¨åè´Ÿè´£å°†æ–¹æ³•ã€å‚æ•°ç­‰ç»„è£…æˆèƒ½å¤Ÿè¿›è¡Œç½‘ç»œä¼ è¾“çš„æ¶ˆæ¯ä½“ï¼ˆåºåˆ—åŒ–ï¼‰ï¼šRpcRequest</li><li>å®¢æˆ·ç«¯ Stub ï¼ˆclient stubï¼‰æ‰¾åˆ°è¿œç¨‹æœåŠ¡çš„åœ°å€ï¼Œå¹¶å°†æ¶ˆæ¯å‘é€åˆ°æœåŠ¡æä¾›ç«¯</li><li>æœåŠ¡ç«¯ Stubï¼ˆæ¡©ï¼‰æ”¶åˆ°æ¶ˆæ¯å°†æ¶ˆæ¯ååºåˆ—åŒ–ä¸º Java å¯¹è±¡ï¼šRpcRequest</li><li>æœåŠ¡ç«¯ Stubï¼ˆæ¡©ï¼‰æ ¹æ® RpcRequest ä¸­çš„ç±»ã€æ–¹æ³•ã€æ–¹æ³•å‚æ•°ç­‰ä¿¡æ¯è°ƒç”¨æœ¬åœ°çš„æ–¹æ³•</li><li>æœåŠ¡ç«¯ Stubï¼ˆæ¡©ï¼‰å¾—åˆ°æ–¹æ³•æ‰§è¡Œç»“æœå¹¶å°†å…¶ç»„è£…æˆèƒ½å¤Ÿè¿›è¡Œç½‘ç»œä¼ è¾“çš„æ¶ˆæ¯ä½“ï¼šRpcResponseï¼ˆåºåˆ—åŒ–ï¼‰å‘é€è‡³æ¶ˆè´¹æ–¹</li><li>å®¢æˆ·ç«¯ Stub ï¼ˆclient stubï¼‰æ¥æ”¶åˆ°æ¶ˆæ¯å¹¶å°†æ¶ˆæ¯ååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ï¼šRpcResponseï¼Œè¿™æ ·å°±å¾—åˆ°äº†æœ€ç»ˆç»“æœã€‚</li></ol><hr><h2 id="ç¬¬ä¸€ç‰ˆ"><a href="#ç¬¬ä¸€ç‰ˆ" class="headerlink" title="ç¬¬ä¸€ç‰ˆ"></a>ç¬¬ä¸€ç‰ˆ</h2><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼Œå…ˆå†™ä¸€ä¸ªç®€æ˜“ç‰ˆçš„RPCæ¡†æ¶ã€‚ç†Ÿæ‚‰ä¸€ä¸‹ RPC çš„åŸºæœ¬é€šä¿¡è¿‡ç¨‹ã€‚</p><h3 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h3><p>1.é¦–å…ˆåˆ›å»ºä¸€ä¸ª User å¯¹è±¡ï¼Œè¿™æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½å·²çŸ¥çš„ï¼Œå®¢æˆ·ç«¯éœ€è¦å¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œè€ŒæœåŠ¡ç«¯éœ€è¦æ“ä½œè¿™ä¸ªå¯¹è±¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Builder</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> sex<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2.å®šä¹‰ä¸€ä¸ªé€šç”¨çš„ Request çš„å¯¹è±¡ï¼ˆæ¶ˆæ¯æ ¼å¼ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å®¢æˆ·ç«¯è¯·æ±‚æ¶ˆæ¯æ ¼å¼ * æœåŠ¡ç«¯æ ¹æ®å®¢æˆ·ç«¯å‘é€çš„ä¿¡æ¯ï¼Œåå°„è°ƒç”¨ç›¸åº”çš„æ–¹æ³• */</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Builder</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RPCRequest</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æœåŠ¡ç±»å     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> interfaceName<span class="token punctuation">;</span>    <span class="token comment">/**     * æ–¹æ³•å     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> methodName<span class="token punctuation">;</span>    <span class="token comment">/**     * å‚æ•°åˆ—è¡¨     */</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params<span class="token punctuation">;</span>    <span class="token comment">/**     * å‚æ•°ç±»å‹     */</span>    <span class="token keyword">private</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> paramsType<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.å®šä¹‰ä¸€ä¸ªé€šç”¨çš„ Response çš„å¯¹è±¡ï¼ˆæ¶ˆæ¯æ ¼å¼ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * Rpcå“åº”å¯¹è±¡ * Rpcéœ€è¦ç»è¿‡ç½‘ç»œä¼ è¾“ï¼Œæœ‰å¯èƒ½å¤±è´¥ï¼Œç±»ä¼¼äºhttpï¼Œå¼•å…¥çŠ¶æ€ç å’ŒçŠ¶æ€ä¿¡æ¯è¡¨ç¤ºæœåŠ¡è°ƒç”¨æˆåŠŸè¿˜æ˜¯å¤±è´¥ */</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Builder</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RPCResponse</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * çŠ¶æ€ä¿¡æ¯     */</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> code<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> message<span class="token punctuation">;</span>    <span class="token comment">/**     * å…·ä½“æ•°æ®     */</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span> data<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">RPCResponse</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token class-name">RPCResponse</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">RPCResponse</span> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token class-name">RPCResponse</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>4.å®šä¹‰å®¢æˆ·ç«¯éœ€è¦è°ƒç”¨ï¼ŒæœåŠ¡ç«¯éœ€è¦æä¾›çš„æœåŠ¡æ¥å£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token class-name">User</span> <span class="token function">getUserByUserId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Integer</span> <span class="token function">insertUserId</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>5.æœåŠ¡ç«¯éœ€è¦å®ç° Service æ¥å£çš„åŠŸèƒ½</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getUserByUserId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¢æˆ·ç«¯æŸ¥è¯¢äº†"</span><span class="token operator">+</span>id<span class="token operator">+</span><span class="token string">"çš„ç”¨æˆ·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ¨¡æ‹Ÿä»æ•°æ®åº“ä¸­å–ç”¨æˆ·çš„è¡Œä¸º</span>        <span class="token class-name">Random</span> random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">userName</span><span class="token punctuation">(</span>UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">sex</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span><span class="token function">nextBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> user<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">insertUserId</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ’å…¥æ•°æ®æˆåŠŸ: "</span> <span class="token operator">+</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>6.æœåŠ¡ç«¯æ¥å—è§£æ request ä¸å°è£…å‘é€ response å¯¹è±¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * TODO: è¿™ä¸ªç±»è´Ÿè´£çš„åŠŸèƒ½å¤ªå¤æ‚ï¼Œä»¥åä»£ç é‡æ„ä¸­ï¼Œè¿™ä¸ªç±»è¦æŠ½å–å‡ºæ¥ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RPCServer</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">UserServiceImpl</span> userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8899</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡å™¨å¯åŠ¨äº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// BIOæ–¹å¼ç›‘å¬Socket</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// å¼€å¯ä¸€ä¸ªçº¿ç¨‹å»å¤„ç†</span>                <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>                    <span class="token keyword">try</span> <span class="token punctuation">{</span>                        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span>socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// è¯»å–å®¢æˆ·ç«¯ç©¿è¿‡æ¥çš„request</span>                        <span class="token class-name">RPCRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RPCRequest</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// åå°„è°ƒç”¨å¯¹åº”æ–¹æ³•</span>                        <span class="token class-name">Method</span> method <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getMethodName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getParamsType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">Object</span> invoke <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userService<span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// å°è£…å†™å…¥responseå¯¹è±¡</span>                        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token class-name">RPCResponse</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>invoke<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        oos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> <span class="token operator">|</span> <span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">NoSuchMethodException</span> <span class="token operator">|</span> <span class="token class-name">IllegalAccessException</span> <span class="token operator">|</span> <span class="token class-name">InvocationTargetException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä»IOä¸­è¯»å–æ•°æ®é”™è¯¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡å™¨å¯åŠ¨å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>7.åº•å±‚çš„é€šä¿¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IOClient</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * è´Ÿè´£åº•å±‚ä¸æœåŠ¡ç«¯çš„é€šä¿¡     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">RPCResponse</span> <span class="token function">sendRequest</span><span class="token punctuation">(</span><span class="token class-name">String</span> host<span class="token punctuation">,</span> <span class="token keyword">int</span> port<span class="token punctuation">,</span> <span class="token class-name">RPCRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span>socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>            oos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">RPCResponse</span> response <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RPCResponse</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> response<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> <span class="token operator">|</span> <span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>8.å®¢æˆ·ç«¯æ ¹æ®ä¸åŒçš„ Service è¿›è¡ŒåŠ¨æ€ä»£ç†ï¼ŒåŠ¨æ€ä»£ç†å°è£… request å¯¹è±¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClientProxy</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ä¼ å…¥å‚æ•°serviceæ¥å£çš„classå¯¹è±¡ï¼Œåå°„å°è£…æˆä¸€ä¸ªrequest     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> host<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>    <span class="token comment">/**     * jdkåŠ¨æ€ä»£ç†ï¼Œæ¯ä¸€æ¬¡ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•ï¼Œä¼šç»è¿‡æ­¤æ–¹æ³•å¢å¼ºï¼ˆåå°„è·å–requestå¯¹è±¡ï¼Œsocketå‘é€ï¼‰     * proxy:ä»£ç†ç±»ä»£ç†çš„çœŸå®ä»£ç†å¯¹è±¡     * method:æˆ‘ä»¬æ‰€è¦è°ƒç”¨æŸä¸ªå¯¹è±¡çœŸå®çš„æ–¹æ³•çš„Methodå¯¹è±¡     * args:æŒ‡ä»£ä»£ç†å¯¹è±¡æ–¹æ³•ä¼ é€’çš„å‚æ•°     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>        <span class="token comment">// RPCRequestçš„æ„å»º</span>        <span class="token class-name">RPCRequest</span> request <span class="token operator">=</span> <span class="token class-name">RPCRequest</span>                <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">interfaceName</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getDeclaringClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">methodName</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">params</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">paramsType</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getParameterTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ•°æ®ä¼ è¾“</span>        <span class="token class-name">RPCResponse</span> response <span class="token operator">=</span> <span class="token class-name">IOClient</span><span class="token punctuation">.</span><span class="token function">sendRequest</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token class-name">T</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">/**         * loaderï¼šä¸€ä¸ªclassloaderå¯¹è±¡ï¼Œå®šä¹‰äº†ç”±å“ªä¸ªclassloaderå¯¹è±¡å¯¹ç”Ÿæˆçš„ä»£ç†ç±»è¿›è¡ŒåŠ è½½         * interfacesï¼šä¸€ä¸ªinterfaceå¯¹è±¡æ•°ç»„ï¼Œè¡¨ç¤ºæˆ‘ä»¬å°†è¦ç»™æˆ‘ä»¬çš„ä»£ç†å¯¹è±¡æä¾›ä¸€ç»„ä»€ä¹ˆæ ·çš„æ¥å£ï¼Œå¦‚æœæˆ‘ä»¬æä¾›äº†è¿™æ ·ä¸€ä¸ªæ¥å£å¯¹è±¡æ•°ç»„ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯å£°æ˜äº†ä»£ç†ç±»å®ç°äº†è¿™äº›æ¥å£ï¼Œä»£ç†ç±»å°±å¯ä»¥è°ƒç”¨æ¥å£ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³•ã€‚         * hï¼šä¸€ä¸ªInvocationHandlerå¯¹è±¡ï¼Œè¡¨ç¤ºçš„æ˜¯å½“åŠ¨æ€ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ä¼šå…³è”åˆ°å“ªä¸€ä¸ªInvocationHandlerå¯¹è±¡ä¸Šï¼Œå¹¶æœ€ç»ˆç”±å…¶è°ƒç”¨ã€‚         */</span>        <span class="token class-name">Object</span> o <span class="token operator">=</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>clazz<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>clazz<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span>o<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>9.å®¢æˆ·ç«¯è°ƒç”¨ä¸åŒçš„æ–¹æ³•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RPCClient</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ClientProxy</span> clientProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClientProxy</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">8899</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">UserService</span> proxy <span class="token operator">=</span> clientProxy<span class="token punctuation">.</span><span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æœåŠ¡çš„æ–¹æ³•1</span>        <span class="token class-name">User</span> userByUserId <span class="token operator">=</span> proxy<span class="token punctuation">.</span><span class="token function">getUserByUserId</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä»æœåŠ¡ç«¯å¾—åˆ°çš„userä¸ºï¼š"</span> <span class="token operator">+</span> userByUserId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æœåŠ¡çš„æ–¹æ³•2</span>        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">userName</span><span class="token punctuation">(</span><span class="token string">"æµ·ç‘"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sex</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Integer</span> integer <span class="token operator">=</span> proxy<span class="token punctuation">.</span><span class="token function">insertUserId</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‘æœåŠ¡ç«¯æ’å…¥æ•°æ®ï¼š"</span> <span class="token operator">+</span> integer<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç»“æœ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.7k217izrv6c0.png"></p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.1vqo9ij6heg0.png"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><strong>å­˜åœ¨ç—›ç‚¹åˆ†æ</strong></p><ul><li>æœåŠ¡ç«¯ç›´æ¥ç»‘å®šçš„æ˜¯ UserService æœåŠ¡ï¼Œå¦‚æœè¿˜æœ‰å…¶ä»–æœåŠ¡æ¥å£å‘¢ï¼Ÿï¼ˆå¤šä¸ªæœåŠ¡çš„æ³¨å†Œé—®é¢˜ï¼‰</li><li>æœåŠ¡ç«¯ä»¥ BIO çš„æ–¹å¼æ€§èƒ½å¤ªä½ï¼ˆæ€§èƒ½é—®é¢˜ï¼‰</li><li>æœåŠ¡ç«¯åŠŸèƒ½å¤ªå¤æ‚ï¼šç›‘å¬ï¼Œå¤„ç†ã€‚éœ€è¦æ¾è€¦åˆï¼ˆè€¦åˆåº¦é—®é¢˜ï¼‰</li></ul><p><strong>ä¸‹ç‰ˆä¼˜åŒ–ç›®æ ‡</strong></p><ul><li>ä»£ç è§£è€¦</li><li>è¿ç”¨çº¿ç¨‹æ± </li></ul><hr>]]></content>
      
      
      <categories>
          
          <category> RPCæ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RPCæ¡†æ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode 139.å•è¯æ‹†åˆ†</title>
      <link href="/2021/07/11/leetcode-139.dan-ci-chai-fen/"/>
      <url>/2021/07/11/leetcode-139.dan-ci-chai-fen/</url>
      
        <content type="html"><![CDATA[<h1 id="å•è¯æ‹†åˆ†"><a href="#å•è¯æ‹†åˆ†" class="headerlink" title="å•è¯æ‹†åˆ†"></a>å•è¯æ‹†åˆ†</h1><hr><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸² s å’Œä¸€ä¸ªåŒ…å«éç©ºå•è¯çš„åˆ—è¡¨ wordDictï¼Œåˆ¤å®š s æ˜¯å¦å¯ä»¥è¢«ç©ºæ ¼æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯ã€‚</p><p><strong>è¯´æ˜ï¼š</strong></p><ul><li>æ‹†åˆ†æ—¶å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚</li><li>ä½ å¯ä»¥å‡è®¾å­—å…¸ä¸­æ²¡æœ‰é‡å¤çš„å•è¯ã€‚</li></ul><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥: s <span class="token operator">=</span> <span class="token string">"leetcode"</span>, wordDict <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"leet"</span>, <span class="token string">"code"</span><span class="token punctuation">]</span>è¾“å‡º: <span class="token boolean">true</span>è§£é‡Š: è¿”å› <span class="token boolean">true</span> å› ä¸º <span class="token string">"leetcode"</span> å¯ä»¥è¢«æ‹†åˆ†æˆ <span class="token string">"leet code"</span>ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">è¾“å…¥<span class="token operator">:</span> s <span class="token operator">=</span> <span class="token string">"applepenapple"</span><span class="token punctuation">,</span> wordDict <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"apple"</span><span class="token punctuation">,</span> <span class="token string">"pen"</span><span class="token punctuation">]</span>è¾“å‡º<span class="token operator">:</span> <span class="token boolean">true</span>è§£é‡Š<span class="token operator">:</span> è¿”å› <span class="token boolean">true</span> å› ä¸º <span class="token string">"applepenapple"</span> å¯ä»¥è¢«æ‹†åˆ†æˆ <span class="token string">"apple pen apple"</span>ã€‚     æ³¨æ„ä½ å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">è¾“å…¥<span class="token operator">:</span> s <span class="token operator">=</span> <span class="token string">"catsandog"</span><span class="token punctuation">,</span> wordDict <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"cats"</span><span class="token punctuation">,</span> <span class="token string">"dog"</span><span class="token punctuation">,</span> <span class="token string">"sand"</span><span class="token punctuation">,</span> <span class="token string">"and"</span><span class="token punctuation">,</span> <span class="token string">"cat"</span><span class="token punctuation">]</span>è¾“å‡º<span class="token operator">:</span> <span class="token boolean">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>åˆšå¼€å§‹è§‰å¾—è¿™é¢˜å¯ä»¥ç”¨å‰ç¼€æ ‘ï¼Œä½†æ˜¯å®ç°èµ·æ¥æœ‰ç‚¹å¤æ‚ã€‚</p></blockquote><hr><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">wordBreak</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> wordDict<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> wordDict<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>wordDict<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> LeetCodeè®­ç»ƒå½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> leetcode </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså­¦ä¹ -Redisåˆè¯†</title>
      <link href="/2021/07/10/redis-xue-xi-redis-chu-shi/"/>
      <url>/2021/07/10/redis-xue-xi-redis-chu-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="Rediså­¦ä¹ -æŒç»­æ›´æ–°"><a href="#Rediså­¦ä¹ -æŒç»­æ›´æ–°" class="headerlink" title="Rediså­¦ä¹ (æŒç»­æ›´æ–°)"></a>Rediså­¦ä¹ (æŒç»­æ›´æ–°)</h1><hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¹‹å‰å†™çš„Rediså­¦ä¹ ç¬”è®°çš„åšå®¢ï¼Œä¸ªäººè®¤ä¸ºå†™çš„ä¸æ˜¯å¾ˆå¥½ï¼Œä¸å¤Ÿç³»ç»Ÿã€‚æ•…æ‰“ç®—ä»å¤´é‡å­¦Redisï¼Œæ•´ç†å­¦ä¹ ç¬”è®°ã€‚</p><hr><h2 id="Redisåˆè¯†"><a href="#Redisåˆè¯†" class="headerlink" title="Redisåˆè¯†"></a>Redisåˆè¯†</h2><h3 id="Redisæ˜¯ä»€ä¹ˆ"><a href="#Redisæ˜¯ä»€ä¹ˆ" class="headerlink" title="Redisæ˜¯ä»€ä¹ˆ"></a>Redisæ˜¯ä»€ä¹ˆ</h3><ul><li><p>å¼€æºï¼šå¯ä»¥çœ‹Redisçš„æºç ï¼Œå»å­¦ä¹ ï¼Œä¼ä¸šå¯ä»¥åšä¸€äº›å®šåˆ¶åŒ–ã€‚</p></li><li><p>åŸºäºé”®å€¼çš„å­˜å‚¨æœåŠ¡ç³»ç»Ÿ</p></li><li><p>å¤šç§æ•°æ®ç»“æ„</p></li><li><p>é«˜æ€§èƒ½ã€åŠŸèƒ½ä¸°å¯Œ</p></li></ul><h3 id="è°åœ¨ä½¿ç”¨Redis"><a href="#è°åœ¨ä½¿ç”¨Redis" class="headerlink" title="è°åœ¨ä½¿ç”¨Redis"></a>è°åœ¨ä½¿ç”¨Redis</h3><ul><li>Github</li><li>Twitter</li><li>stackoverflow</li><li>é˜¿é‡Œå·´å·´</li><li>ç™¾åº¦</li><li>æ–°æµª</li><li>ç¾å›¢</li><li>æœç‹</li></ul><blockquote><p>åªè¦æ˜¯æ­£å¸¸äº’è”ç½‘ä¼ä¸šï¼Œéƒ½åœ¨åº”ç”¨Redisã€‚ä¸ä¼šå§ï¼Œä¸ä¼šå§ï¼Œä¸ä¼šè¿˜æœ‰å…¬å¸æ²¡ç”¨Rediså§ã€‚</p></blockquote><h3 id="Redisçš„ç‰¹æ€§"><a href="#Redisçš„ç‰¹æ€§" class="headerlink" title="Redisçš„ç‰¹æ€§"></a>Redisçš„ç‰¹æ€§</h3><ul><li>é€Ÿåº¦å¿«</li><li>æŒä¹…åŒ–</li><li>å¤šç§æ•°æ®ç»“æ„</li><li>æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€</li><li>åŠŸèƒ½ä¸°å¯Œ</li><li>ç®€å•</li><li>ä¸»ä»å¤åˆ¶</li><li>é«˜å¯ç”¨ã€åˆ†å¸ƒå¼</li></ul><h4 id="é€Ÿåº¦å¿«"><a href="#é€Ÿåº¦å¿«" class="headerlink" title="é€Ÿåº¦å¿«"></a>é€Ÿåº¦å¿«</h4><p>æ¯ç§’10Wæ¬¡è¯»å†™</p><p><strong>ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«å‘¢ï¼Ÿ</strong></p><p>Redisæ˜¯å°†æ•°æ®å­˜åˆ°å†…å­˜å½“ä¸­çš„ï¼Œå†…å­˜è¯»å–è‚¯å®šæ¯”ç£ç›˜å¿«ã€‚ï¼ˆä¸»è¦åŸå› ï¼‰</p><p>è€Œä¸”Redisæ˜¯åŸºäºCè¯­è¨€å®ç°çš„ï¼Œåˆç†ä½¿ç”¨Cè¯­è¨€ï¼Œæ•ˆç‡æé«˜ã€‚</p><p>Redisæ—©æœŸç‰ˆæœ¬ä½¿ç”¨å•çº¿ç¨‹ï¼Œé¿å…åˆ‡æ¢ä¸Šä¸‹æ–‡è€—è´¹æ—¶é—´ã€‚</p><p>Redis6.0ç‰ˆæœ¬åï¼Œä½¿ç”¨å¤šçº¿ç¨‹ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¤„ç†ç½‘ç»œI/Oçš„ç“¶é¢ˆã€‚</p><h4 id="æŒä¹…åŒ–ï¼ˆæ–­ç”µä¸ä¸¢æ•°æ®ï¼‰"><a href="#æŒä¹…åŒ–ï¼ˆæ–­ç”µä¸ä¸¢æ•°æ®ï¼‰" class="headerlink" title="æŒä¹…åŒ–ï¼ˆæ–­ç”µä¸ä¸¢æ•°æ®ï¼‰"></a>æŒä¹…åŒ–ï¼ˆæ–­ç”µä¸ä¸¢æ•°æ®ï¼‰</h4><p>Redisæ‰€æœ‰çš„æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¯¹æ•°æ®çš„æ›´æ–°å°†å¼‚æ­¥çš„ä¿å­˜åˆ°ç£ç›˜ä¸Šã€‚</p><h4 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h4><p>æä¾›5ç§ä¸»è¦çš„æ•°æ®ç»“æ„</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.4jlcf5nk1bc0.png"></p><p>é™¤äº†5ç§ä¸»è¦çš„æ•°æ®ç»“æ„ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ•°æ®ç»“æ„ï¼Œå¦‚BitMapsï¼ˆä½å›¾ï¼‰ï¼ŒHyperLogLogï¼ˆè¶…å°å†…å­˜å”¯ä¸€å€¼è®¡æ•°ï¼‰ï¼ŒGEOï¼ˆåœ°ç†ä¿¡æ¯å®šä½ï¼‰ã€‚</p><h4 id="æ”¯æŒå¤šç§å®¢æˆ·ç«¯è¯­è¨€"><a href="#æ”¯æŒå¤šç§å®¢æˆ·ç«¯è¯­è¨€" class="headerlink" title="æ”¯æŒå¤šç§å®¢æˆ·ç«¯è¯­è¨€"></a>æ”¯æŒå¤šç§å®¢æˆ·ç«¯è¯­è¨€</h4><ul><li>Java</li><li>php</li><li>python</li><li>Ruby</li><li>Lua</li><li>nodeJS</li></ul><h4 id="åŠŸèƒ½ä¸°å¯Œ"><a href="#åŠŸèƒ½ä¸°å¯Œ" class="headerlink" title="åŠŸèƒ½ä¸°å¯Œ"></a>åŠŸèƒ½ä¸°å¯Œ</h4><ul><li>å‘å¸ƒè®¢é˜…</li><li>Luaè„šæœ¬</li><li>äº‹åŠ¡</li><li>pipeline</li></ul><h4 id="ç®€å•"><a href="#ç®€å•" class="headerlink" title="ç®€å•"></a>ç®€å•</h4><p>æºä»£ç å¯é˜…è¯»åŒ–ï¼Œå¯å®šåˆ¶åŒ–ã€‚</p><p>ä¸ä¾èµ–å¤–éƒ¨åº“ã€‚</p><p>å•çº¿ç¨‹æ¨¡å‹ã€‚</p><h4 id="ä¸»ä»å¤åˆ¶"><a href="#ä¸»ä»å¤åˆ¶" class="headerlink" title="ä¸»ä»å¤åˆ¶"></a>ä¸»ä»å¤åˆ¶</h4><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.5wd21gt8hnw0.png"></p><h4 id="é«˜å¯ç”¨ã€åˆ†å¸ƒå¼"><a href="#é«˜å¯ç”¨ã€åˆ†å¸ƒå¼" class="headerlink" title="é«˜å¯ç”¨ã€åˆ†å¸ƒå¼"></a>é«˜å¯ç”¨ã€åˆ†å¸ƒå¼</h4><p>Redis-Sentinel(v2.8)æ”¯æŒé«˜å¯ç”¨</p><p>Redis-Cluster(v3.0)æ”¯æŒåˆ†å¸ƒå¼</p><h3 id="Rediså…¸å‹ä½¿ç”¨åœºæ™¯"><a href="#Rediså…¸å‹ä½¿ç”¨åœºæ™¯" class="headerlink" title="Rediså…¸å‹ä½¿ç”¨åœºæ™¯"></a>Rediså…¸å‹ä½¿ç”¨åœºæ™¯</h3><ul><li>ç¼“å­˜ç³»ç»Ÿ</li><li>è®¡æ•°å™¨</li><li>æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿ</li><li>æ’è¡Œæ¦œ</li><li>ç¤¾äº¤ç½‘ç»œ</li><li>å®æ—¶ç³»ç»Ÿ</li></ul><h3 id="Rediså¸¸ç”¨é…ç½®"><a href="#Rediså¸¸ç”¨é…ç½®" class="headerlink" title="Rediså¸¸ç”¨é…ç½®"></a>Rediså¸¸ç”¨é…ç½®</h3><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.2jn1w020cq20.png"></p>]]></content>
      
      
      <categories>
          
          <category> Rediså­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’å­¦ä¹ -ä»æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’</title>
      <link href="/2021/07/10/dong-tai-gui-hua-xue-xi-1/"/>
      <url>/2021/07/10/dong-tai-gui-hua-xue-xi-1/</url>
      
        <content type="html"><![CDATA[<h1 id="åŠ¨æ€è§„åˆ’å­¦ä¹ -ä»æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’-æŒç»­æ›´æ–°"><a href="#åŠ¨æ€è§„åˆ’å­¦ä¹ -ä»æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’-æŒç»­æ›´æ–°" class="headerlink" title="åŠ¨æ€è§„åˆ’å­¦ä¹ -ä»æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’(æŒç»­æ›´æ–°)"></a>åŠ¨æ€è§„åˆ’å­¦ä¹ -ä»æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’(æŒç»­æ›´æ–°)</h1><hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æˆ‘ä¾æ—§è®°å¿†çŠ¹æ–°çš„ä¸€ä»¶äº‹ï¼Œä¹Ÿæ˜¯æˆ‘å¤§å­¦ç”Ÿæ¶¯çš„ä¸€å¤§é—æ†¾ã€‚</p><p>ç¬¬åå››å±Šå‰æ—çœå¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ›ï¼Œæˆ‘ä»¬é˜Ÿä½œä¸ºå‚èµ›é˜Ÿä¼ï¼Œåœ¨æ¯”èµ›å‰æœŸé›¶ç½šæ—¶ä¸”è¿‡é¢˜é€Ÿåº¦æå¿«ï¼Œå†²åˆ°äº†æ¦œå•ç¬¬ä¸‰çš„ä½ç½®ï¼Œè®°å¾—ç¬¬ä¸€æ˜¯å‰å¤§ä¸€é˜Ÿï¼Œç¬¬äºŒæ˜¯ä¸œå¸ˆçš„é˜Ÿä¼ã€‚</p><p>å½“æ—¶å¿ƒé‡Œæƒ³çš„æ˜¯â€œçœä¸€ç¨³äº†â€ï¼Œä½†æ˜¯å´æ²¡æƒ³åˆ°ï¼Œæœ€åè¢«ä¸€é“é¢˜ç¡¬ç”Ÿç”Ÿå¡æ­»ï¼Œé”™å¤±çœä¸€ã€‚å³ä½¿æ˜¯åˆ°æœ€åä¸€ä¸ªå°æ—¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬æŠŠè¿™é¢˜è¿‡äº†ï¼Œä¹Ÿèƒ½å†²åˆ°çœä¸€æœ«çš„åæ¬¡ï¼ˆä¸»è¦æ˜¯æˆ‘ä»¬é˜Ÿçš„ç½šæ—¶æ˜¯çœŸçš„çŸ­ï¼‰ï¼Œä½†æ˜¯ç›´åˆ°æœ€åï¼Œç»å°½è„‘æ±ï¼Œä¹Ÿæ— æ³•é€šè¿‡é‚£é“é¢˜ã€‚</p><p>è€Œé‚£é“é¢˜ï¼Œå°±æ˜¯ä¸€é“åŠ¨æ€è§„åˆ’ã€‚</p><p>åŠ¨æ€è§„åˆ’é¢˜ç›®ä¸€ç›´ä»¥æ¥ï¼Œéƒ½æ˜¯æˆ‘çš„å™©æ¢¦ã€‚åƒæ˜¯KMPï¼Œæœ€çŸ­è·¯ï¼Œæœ€å°ç”Ÿæˆæ ‘ï¼Œå¹¶æŸ¥é›†ï¼Œçº¿æ®µæ ‘è¿™äº›ç®—æ³•ï¼Œåªè¦ç†è§£ç®—æ³•æ€æƒ³ï¼Œä¸€èˆ¬å°±æ˜¯å¥—æ¨¡ç‰ˆå»åº”ç”¨å°±å¯ä»¥äº†ã€‚ä½†æ˜¯åŠ¨æ€è§„åˆ’ï¼Œæˆ‘ä¸€ç›´æ²¡èƒ½ç†è§£æ€æƒ³ï¼Œå› ä¸ºåŠ¨æ€è§„åˆ’å¤ªâ€œåŠ¨æ€â€äº†ï¼Œæ¯ä¸ªé¢˜ç›®éƒ½æœ‰ä¸åŒçš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚</p><p>ä½†æ˜¯é€ƒé¿ä¸æ˜¯è§£å†³é—®é¢˜çš„æ–¹å¼ã€‚</p><p>æ‰€ä»¥æˆ‘æ‰“ç®—ä»å¤´åˆ°å°¾ï¼ŒæŠŠåŠ¨æ€è§„åˆ’çš„å¸¸è§å¥—è·¯å’Œå¸¸è§ä¹ é¢˜ï¼Œå…¨è¿‡ä¸€éï¼ŒæŒæ¡åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ€æƒ³ï¼Œä»å¤´åˆ°å°¾ï¼Œè®°å½•åšå®¢å­¦ä¹ ã€‚</p><hr><h2 id="ç»å…¸æ¢é’±é—®é¢˜"><a href="#ç»å…¸æ¢é’±é—®é¢˜" class="headerlink" title="ç»å…¸æ¢é’±é—®é¢˜"></a>ç»å…¸æ¢é’±é—®é¢˜</h2><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™å®šæ•°ç»„arrï¼Œarrä¸­æ‰€æœ‰çš„å€¼éƒ½ä¸ºæ­£æ•°ä¸”ä¸é‡å¤ã€‚æ¯ä¸ªå€¼ä»£è¡¨ä¸€ç§é¢å€¼çš„è´§å¸ï¼Œæ¯ç§é¢å€¼çš„è´§å¸å¯ä»¥ä½¿ç”¨ä»»æ„å¼ ï¼Œå†ç»™å®šä¸€ä¸ªæ•´æ•°aimä»£è¡¨è¦æ‰¾çš„é’±æ•°ï¼Œæ±‚æ¢é’±æœ‰å¤šå°‘ç§æ–¹æ³•ã€‚</p><h3 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h3><p>arr = [5, 10, 25, 1]ï¼Œaim = 0</p><p>ç»„æˆ0å…ƒçš„æ–¹æ³•æœ‰ä¸€ç§ï¼Œå°±æ˜¯æ‰€æœ‰é¢å€¼çš„è´§å¸éƒ½ä¸ç”¨ï¼Œæ‰€ä»¥è¿”å›1ã€‚</p><p>arr = [5, 10, 25, 1]ï¼Œaim = 15</p><p>ç»„æˆ15å…ƒçš„æ–¹æ³•æœ‰6ç§ï¼Œ1å¼ 10å…ƒ+1å¼ 5å…ƒã€1å¼ 10å…ƒ+5å¼ 1å…ƒã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><p>arr = [3, 5]ï¼Œaim = 2</p><p>ä»»ä½•æ–¹æ³•éƒ½æ— æ³•ç»„æˆ2å…ƒï¼Œè¿”å›0</p><h3 id="æ€è·¯åŠä»£ç "><a href="#æ€è·¯åŠä»£ç " class="headerlink" title="æ€è·¯åŠä»£ç "></a>æ€è·¯åŠä»£ç </h3><blockquote><p>ä¸€åˆ‡åŠ¨æ€è§„åˆ’éƒ½æ¥æºäºé€’å½’ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆå†™ä¸€ä¸ªé€’å½’ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯å°è¯•ç‰ˆæœ¬ï¼Œå°è¯•å„ç§æ–¹æ³•å»å‡‘é’±ã€‚</p></blockquote><p><strong>é€’å½’è¿‡ç¨‹</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * index : å¯ä»¥ä»»æ„è‡ªç”±ä½¿ç”¨indexåŠå…¶ä¹‹åæ‰€æœ‰çš„é’± * aim : ç›®æ ‡é’±æ•° * è¿”å›å€¼ : æ–¹æ³•æ•° */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">process1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token keyword">int</span> aim<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>      res <span class="token operator">=</span> aim <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">*</span> i <span class="token operator">&lt;=</span> aim<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          res <span class="token operator">+=</span> <span class="token function">process1</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> aim <span class="token operator">-</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">*</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">coins1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> aim<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> aim <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token function">process1</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> aim<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ğŸ‘†ä¸Šé¢è¿™å¨ä»£ç ï¼Œè¿™ç©æ„å·¨æš´åŠ›æ— æ¯”ï¼Œç»å¯¹æ˜¯ä¸èƒ½ç”¨çš„ï¼Œæœ‰ç›¸å½“å¤šçš„é‡å¤çš„é€’å½’è¿‡ç¨‹ã€‚</p><p>å¥½ï¼Œæ¥ä¸‹æ¥å†™ç¬¬ä¸€ä¸ªä¼˜åŒ–ç‰ˆæœ¬ã€‚å…ˆåˆ†æä¸€ä¸‹ï¼Œå“ªäº›å€¼å›ºå®šï¼Œæˆ‘ä»¬çš„è¿”å›å€¼å°±å›ºå®šã€‚</p><p>ä»ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œindex å’Œ aim ä¸€æ—¦å›ºå®šï¼Œè¿”å›å€¼ç»“æœå°±ä¼šå›ºå®šã€‚</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠè®¡ç®—è¿‡çš„indexå’Œaimç›¸åŒçš„ç»„åˆæƒ…å†µå­˜å‚¨ä¸‹æ¥ï¼Œä¸‹æ¬¡å†æ¬¡å‡ºç°ç›¸åŒçš„indexå’Œaimçš„ç»„åˆæ—¶ï¼Œæˆ‘ä»¬ç›´æ¥å»å–è®¡ç®—è¿‡çš„å†…å®¹ï¼Œå°±å¥½äº†ã€‚è¿™æ ·å°±é¿å…äº†é‡å¤è®¡ç®—ï¼Œè¿™å°±æ˜¯è®°å¿†åŒ–æœç´¢ï¼</p><blockquote><p>è®°å¿†åŒ–æœç´¢ä»£ç </p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * key : index + "_" + aim * value : è¿”å›å€¼ */</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">process2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token keyword">int</span> aim<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>      res <span class="token operator">=</span> aim <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">*</span> i <span class="token operator">&lt;=</span> aim<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">int</span> nextAim <span class="token operator">=</span> aim <span class="token operator">-</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">*</span> i<span class="token punctuation">;</span>          <span class="token class-name">String</span> key <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>nextAim<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>              <span class="token comment">// å¦‚æœä¹‹å‰ç®—è¿‡ï¼Œå°±ä¸è¿›è¡Œé€’å½’äº†ï¼Œç›´æ¥æŠŠç»“æœæ‹¿å‡ºæ¥ï¼Œé¿å…å¤§é‡çš„é‡å¤è®¡ç®—è¿‡ç¨‹</span>              res <span class="token operator">+=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>              res <span class="token operator">+=</span> <span class="token function">process1</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> nextAim<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>aim<span class="token punctuation">)</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ‰äº†ğŸ‘†ä¸Šé¢è¿™æ®µä»£ç ï¼Œå°±å¯ä»¥è®©å¤æ‚åº¦æå…·çš„ä¸‹é™ã€‚ä½†æ˜¯è¿˜ä¸å¤Ÿå•Šï¼Œè¿˜èƒ½å†ä¼˜åŒ–ï¼Œ</p><p>æ¥ä¸‹æ¥æ¨åŠ¨æ€è§„åˆ’ã€‚</p><p>æˆ‘ä»¬ç”±ä¸Šé¢çŸ¥é“ï¼Œindexå’Œaimç¡®å®šï¼Œè¿”å›å€¼å°±ç¡®å®šï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ‰€æœ‰ç­”æ¡ˆä¸€å®šèƒ½ç”±ä¸€ä¸ªäºŒç»´è¡¨è£…ä¸‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.1fy554e4gg2o.png"></p><p>æ¥ä¸‹æ¥åˆ†æè¿™é¢˜çš„ç›®æ ‡æ˜¯ä»€ä¹ˆ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">coins1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> aim<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> aim <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token comment">// è¿”å›çš„å°±æ˜¯ç›®æ ‡</span>  <span class="token keyword">return</span> <span class="token function">process1</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> aim<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰€ä»¥æˆ‘ä»¬è¿™é¢˜çš„ç›®æ ‡å°±æ˜¯indexä¸º0ï¼Œaimä¸ºä¼ å…¥çš„aimè¿™ä¸ªçŠ¶æ€ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.5nuxjzzbb2s0.png"></p><p>ç„¶åçœ‹è¿™ä¸ªäºŒç»´è¡¨çš„å“ªäº›ä½ç½®æ˜¯å¯ä»¥ç›´æ¥ç¡®å®šçš„ã€‚çœ‹é€’å½’ä¸­çš„base caseï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢çš„ä»£ç </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>    res <span class="token operator">=</span> aim <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œå½“indexä¸ºarr.lengthçš„æ—¶å€™æˆ‘ä»¬çš„å€¼æ˜¯å¯ä»¥ç¡®å®šçš„ã€‚</p><p>ç„¶ååœ¨indexä¸ºarr.lengthçš„åŸºç¡€ä¸Šï¼Œaimå€¼ä¸º0çš„æ—¶å€™è¿”å›1å¦åˆ™æ˜¯0ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.6u94gwyy2lo0.png" alt="image"></p><p>æ¥ä¸‹æ¥ï¼Œçœ‹ä½ç½®ä¾èµ–ã€‚</p><p>çœ‹ä¸€ä¸‹ï¼Œæ˜¯æ€ä¹ˆè°ƒé€’å½’çš„</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">*</span> i <span class="token operator">&lt;=</span> aim<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>res <span class="token operator">+=</span> <span class="token function">process1</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> aim <span class="token operator">-</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">*</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä»è¿™æ®µä»£ç å¯ä»¥çœ‹å‡ºæ¥ï¼Œåœ¨å½“å‰indexå’Œaimä½ç½®çš„è¿”å›å€¼ï¼Œindexä¾èµ–äºindex + 1ï¼Œä¹Ÿå°±æ˜¯äºŒç»´è¡¨ä¸­ä¸‹ä¸€è¡Œçš„å€¼ã€‚é‚£ä¾èµ–äºä¸‹ä¸€è¡Œçš„å“ªäº›å€¼å‘¢ï¼Ÿå°±æ˜¯å‡å»1å¼ å½“å‰å€¼çš„aimï¼Œå‡å»2å¼ å½“å‰å€¼çš„aimï¼Œå‡å»3å¼ å½“å‰å€¼çš„aimã€‚ã€‚ã€‚ã€‚ã€‚ç›´åˆ°è¶Šç•Œï¼Œæœ€åæŠŠè¿™ä¸€è¡Œçš„å€¼ç›¸åŠ å³å¯å¾—åˆ°å½“å‰ä½ç½®çš„å€¼ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image-20210710153234631.5gwfttcrcyc0.png" alt="image-20210710153234631"></p><p>å›¾ä¸­i,aimæ˜¯æˆ‘ä»¬çš„å½“å‰ä½ç½®ï¼Œä¸‹é¢çš„?å°±æ˜¯æˆ‘ä»¬ä¾èµ–çš„ä½ç½®ï¼Œå°†?çš„å€¼ç›¸åŠ å°±èƒ½å¾—åˆ°æˆ‘ä»¬å½“å‰ä½ç½®çš„å€¼ã€‚</p><p>åˆå› ä¸ºæˆ‘ä»¬æœ‰äº†æœ€åä¸€è¡Œï¼Œæˆ‘ä»¬æ¯ä¸ªç‚¹åªä¾èµ–äºè¯¥ç‚¹æ‰€åœ¨ä½ç½®çš„ä¸‹ä¸€è¡Œã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¡¥é½æ•´å¼ è¡¨ã€‚</p><p>æ‹¿[5, 3, 2]ï¼Œaim = 10è¿™ä¸ªä¾‹å­ä¸¾ä¾‹ï¼Œä¸‹é¢å°±æ˜¯å®ƒçš„äºŒç»´çŸ©é˜µã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.28clclu7wqm8.png"></p><p>æ¥ä¸‹æ¥å°±æ˜¯æœ€åä¸€æ­¥ä¼˜åŒ–ï¼Œåœ¨è¿™ä¸ªäºŒç»´æ•°ç»„çš„åŸºç¡€ä¸Šè¿›è¡Œä¼˜åŒ–ã€‚</p><p>ä¸Šé¢è¯´äº†ï¼Œi,aim è¿™ä¸ªç‚¹çš„ä½ç½®ï¼Œæ˜¯éœ€è¦å®ƒçš„ä¸‹ä¸€è¡Œå¤šä¸ªå€¼è¿›è¡Œç´¯åŠ çš„ç»“æœã€‚ä½†æ˜¯å½“ä½ è®¡ç®—åˆ° i,aim è¿™ä¸ªç‚¹çš„æ—¶å€™ï¼Œi,aim-arr[i] è¿™ä¸ªç‚¹ä½ å·²ç»è®¡ç®—è¿‡äº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.1a8qw0oqmpcw.png"></p><p>å½“ä½ æ±‚å½“å‰ç‚¹æ—¶ï¼Œ?ä½ç½®å·²ç»æ±‚è§£è¿‡äº†ã€‚é‚£æˆ‘å½“å‰ç‚¹çš„å€¼å²‚ä¸æ˜¯ç›´æ¥å°±æ˜¯å½“å‰ç‚¹ä¸‹é¢çš„é‚£ä¸ªç‚¹çš„å€¼åŠ ä¸Š?ä½ç½®çš„å€¼ã€‚</p><p>åˆçœç•¥äº†å¤§é‡çš„é‡å¤è¿‡ç¨‹ï¼ï¼ï¼</p><p>è€Œè¿™ï¼Œå°±æ˜¯åŠ¨æ€è§„åˆ’ã€‚å¾—è¯´ä¸è¯´ï¼Œæ˜¯çœŸçš„ğŸ‚ã€‚</p><p>ä¸‹é¢ä¸Šä»£ç </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">coinDp</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> aim<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> aim <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>aim <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> j <span class="token operator">&lt;=</span> aim<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> aim<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>          dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> j <span class="token operator">-</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">?</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token keyword">return</span> dp<span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>aim<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶å®è¿™é¢˜åœ¨ç©ºé—´ä¸Šè¿˜æ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œç”¨æ»šåŠ¨æ•°ç»„ï¼Œä½†æ˜¯ç›®å‰æˆ‘çš„é‡å¿ƒæ˜¯å­¦ä¹ åŠ¨æ€è§„åˆ’ï¼Œç©ºé—´ä¼˜åŒ–çš„ä»£ç å…ˆä¸å†™äº†ï¼Œä»¥åæœ‰æ—¶é—´è¡¥ã€‚</p><hr><h2 id="åŠ¨æ€è§„åˆ’å­¦ä¹ èµ„æºæ¨è"><a href="#åŠ¨æ€è§„åˆ’å­¦ä¹ èµ„æºæ¨è" class="headerlink" title="åŠ¨æ€è§„åˆ’å­¦ä¹ èµ„æºæ¨è"></a>åŠ¨æ€è§„åˆ’å­¦ä¹ èµ„æºæ¨è</h2><p>è¯¾ç¨‹ï¼šå·¦ç¥çš„è¯¾ï¼ˆå·¦ç¥yydsï¼‰</p><p>ç»ƒä¹ ï¼šLeetcodeï¼Œcodeforceï¼Œå„å¤§OJã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åŠ¨æ€è§„åˆ’å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JVMå†…å­˜ç»“æ„</title>
      <link href="/2021/07/09/jvm-nei-cun-jie-gou/"/>
      <url>/2021/07/09/jvm-nei-cun-jie-gou/</url>
      
        <content type="html"><![CDATA[<h1 id="JVMå†…å­˜ç»“æ„å­¦ä¹ ç¬”è®°"><a href="#JVMå†…å­˜ç»“æ„å­¦ä¹ ç¬”è®°" class="headerlink" title="JVMå†…å­˜ç»“æ„å­¦ä¹ ç¬”è®°"></a>JVMå†…å­˜ç»“æ„å­¦ä¹ ç¬”è®°</h1><hr><h2 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h2><p>classæ–‡ä»¶ä¼šè¢«ç±»åŠ è½½å™¨è£…è½½åˆ°JVMä¸­ï¼Œå¹¶ä¸”JVMä¼šè´Ÿè´£ç¨‹åº<strong>è¿è¡Œæ—¶</strong>çš„<strong>å†…å­˜ç®¡ç†</strong></p><p>è€ŒJVMçš„å†…å­˜ç»“æ„ï¼Œå¾€å¾€æŒ‡çš„å°±æ˜¯JVMå®šä¹‰çš„<strong>è¿è¡Œæ—¶æ•°æ®åŒº</strong></p><hr><h2 id="è¿è¡Œæ—¶æ•°æ®åŒº"><a href="#è¿è¡Œæ—¶æ•°æ®åŒº" class="headerlink" title="è¿è¡Œæ—¶æ•°æ®åŒº"></a>è¿è¡Œæ—¶æ•°æ®åŒº</h2><p>åˆ†ä¸ºäº”å¤§å—ï¼šæ–¹æ³•åŒºã€å †ã€ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€‚</p><p>è¿™æ˜¯JVM<strong>è§„èŒƒ</strong>çš„åˆ†åŒºæ¦‚å¿µï¼Œåˆ°å…·ä½“çš„å®é™…è½åœ°ï¼Œä¸åŒçš„å‚å•†å®ç°å¯èƒ½æ˜¯æœ‰æ‰€åŒºåˆ«çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.7jauvc56vhw0.png"></p><hr><h2 id="ç¨‹åºè®¡æ•°å™¨"><a href="#ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨"></a>ç¨‹åºè®¡æ•°å™¨</h2><p>Javaæ˜¯å¤šçº¿ç¨‹è¯­è¨€ï¼Œå‡è®¾çº¿ç¨‹æ•°å¤§äºCPUæ•°ï¼Œå°±å¾ˆæœ‰å¯èƒ½æœ‰<strong>çº¿ç¨‹åˆ‡æ¢</strong>çš„ç°è±¡ï¼Œåˆ‡æ¢æ„å‘³ç€<strong>ä¸­æ–­</strong>å’Œ<strong>æ¢å¤</strong>ï¼Œæ‰€ä»¥éœ€è¦ä¸€å—åŒºåŸŸæ¥ä¿å­˜<strong>å½“å‰çº¿ç¨‹çš„æ‰§è¡Œä¿¡æ¯</strong></p><p>æ‰€ä»¥ç¨‹åºè®¡æ•°å™¨å°±æ˜¯è®°å½•å„ä¸ªçº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç çš„åœ°å€ï¼ˆåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸ã€çº¿ç¨‹æ¢å¤ç­‰éƒ½ä¾èµ–äºè®¡æ•°å™¨ï¼‰</p><hr><h2 id="è™šæ‹Ÿæœºæ ˆ"><a href="#è™šæ‹Ÿæœºæ ˆ" class="headerlink" title="è™šæ‹Ÿæœºæ ˆ"></a>è™šæ‹Ÿæœºæ ˆ</h2><p>æ¯ä¸ªçº¿ç¨‹åœ¨åˆ›å»ºçš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ª<strong>è™šæ‹Ÿæœºæ ˆ</strong>ï¼Œæ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª<strong>æ ˆå¸§</strong>ã€‚æ¯ä¸ª<strong>æ ˆå¸§</strong>ä¼šåŒ…å«å‡ å—å†…å®¹ï¼šå±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥å’Œè¿”å›åœ°å€ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.1cus2y3es0n4.png"></p><p>è™šæ‹Ÿæœºæ ˆçš„ä½œç”¨ï¼šå®ƒä¿å­˜äº†æ–¹æ³•çš„å±€éƒ¨å˜é‡ã€éƒ¨åˆ†å˜é‡çš„è®¡ç®—å¹¶å‚ä¸äº†æ–¹æ³•çš„è°ƒç”¨å’Œè¿”å›ã€‚</p><hr><h2 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h2><p>æœ¬åœ°æ–¹æ³•æ ˆè·Ÿè™šæ‹Ÿæœºæ ˆçš„åŠŸèƒ½ç±»ä¼¼ï¼Œè™šæ‹Ÿæœºæ ˆç”¨äºç®¡ç†Javaå‡½æ•°çš„è°ƒç”¨ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ç”¨äºç®¡ç†æœ¬åœ°æ–¹æ³•çš„è°ƒç”¨ã€‚è¿™é‡Œçš„<strong>æœ¬åœ°æ–¹æ³•</strong>æŒ‡çš„æ˜¯<strong>éJavaæ–¹æ³•</strong>ï¼Œä¸€èˆ¬æœ¬åœ°æ–¹æ³•æ˜¯ç”¨Cè¯­è¨€å®ç°çš„ã€‚</p><hr><h2 id="æ–¹æ³•åŒº"><a href="#æ–¹æ³•åŒº" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h2><p>è¿è¡Œæ—¶æ•°æ®åŒºè¿™ä¸ªåˆ†åŒºæ˜¯JVMçš„è§„èŒƒï¼Œå…·ä½“çš„è½åœ°å®ç°ï¼Œä¸åŒçš„è™šæ‹Ÿæœºå‚å•†å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æ–¹æ³•åŒºä¹Ÿåªæ˜¯JVMä¸­è§„èŒƒçš„ä¸€éƒ¨åˆ†è€Œå·²ã€‚</p><p>åœ¨HotSpotè™šæ‹Ÿæœºï¼Œå°±ä¼šå¸¸å¸¸æåˆ°<strong>æ°¸ä¹…ä»£</strong>è¿™ä¸ªè¯ã€‚HotSpotè™šæ‹Ÿæœºåœ¨JDK8å‰ç”¨<strong>æ°¸ä¹…ä»£</strong>å®ç°äº†æ–¹æ³•åŒºï¼Œè€Œå¾ˆå¤šå…¶ä»–å‚å•†çš„è™šæ‹Ÿæœºå…¶å®æ˜¯æ²¡æœ‰<strong>æ°¸ä¹…ä»£</strong>çš„æ¦‚å¿µçš„ã€‚</p><p>åœ¨JDK8ä¸­ï¼Œå·²ç»ç”¨<strong>å…ƒç©ºé—´</strong>æ¥æ›¿æ¢äº†<strong>æ°¸ä¹…ä»£</strong>ä½œä¸º<strong>æ–¹æ³•åŒº</strong>çš„å®ç°äº†ã€‚</p><p>æ–¹æ³•åŒºä¸»è¦æ˜¯ç”¨æ¥å­˜æ”¾å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„<strong>ç±»ç›¸å…³ä¿¡æ¯</strong>ï¼šåŒ…æ‹¬ç±»ä¿¡æ¯ã€å¸¸é‡æ± ã€‚</p><p>ç±»ä¿¡æ¯åˆåŒ…æ‹¬äº†ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£å’Œçˆ¶ç±»ç­‰ä¿¡æ¯ã€‚</p><p>å¸¸é‡æ± åˆåˆ†ä¸º<strong>é™æ€å¸¸é‡æ± </strong>å’Œ<strong>è¿è¡Œæ—¶å¸¸é‡æ± </strong></p><p>é™æ€å¸¸é‡æ± ä¸»è¦å­˜å‚¨çš„æ˜¯å­—é¢é‡ä»¥åŠç¬¦å·å¼•ç”¨ç­‰ä¿¡æ¯ï¼Œé™æ€å¸¸é‡æ± ä¹ŸåŒ…æ‹¬äº†æˆ‘ä»¬æ‰€è¯´çš„<strong>å­—ç¬¦ä¸²å¸¸é‡æ± </strong></p><p><strong>è¿è¡Œæ—¶å¸¸é‡æ± </strong>å­˜å‚¨çš„æ˜¯<strong>ç±»åŠ è½½</strong>æ—¶ç”Ÿæˆçš„<strong>ç›´æ¥å¼•ç”¨</strong>ç­‰ä¿¡æ¯</p><p>ä»<strong>é€»è¾‘åˆ†åŒº</strong>çš„è§’åº¦è€Œè¨€ï¼Œå¸¸é‡æ± å±äºæ–¹æ³•åŒº</p><p>ä½†åœ¨JDK7ä»¥åï¼Œå°±å·²ç»æŠŠ<strong>è¿è¡Œæ—¶å¸¸é‡æ± </strong>å’Œ<strong>é™æ€å¸¸é‡æ± </strong>è½¬ç§»åˆ°äº†å †å†…å­˜ä¸­è¿›è¡Œå­˜å‚¨ã€‚</p><p>æ‰€ä»¥å¯¹äºç‰©ç†åˆ†åŒºæ¥è¯´ï¼Œ<strong>è¿è¡Œæ—¶å¸¸é‡æ± </strong>å’Œ<strong>é™æ€å¸¸é‡æ± </strong>å±äºå †ã€‚</p><blockquote><p>JDK8æŠŠæ–¹æ³•åŒºçš„å®ç°ä»æ°¸ä¹…ä»£å˜æˆäº†å…ƒç©ºé—´ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p></blockquote><p>æœ€ä¸»è¦çš„åŒºåˆ«å°±æ˜¯ï¼šå…ƒç©ºé—´å­˜å‚¨ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼ŒJVMä¸ä¼šå†å‡ºç°æ–¹æ³•åŒºçš„å†…å­˜æº¢å‡ºï¼Œä»¥å¾€æ°¸ä¹…ä»£ç»å¸¸å› ä¸ºå†…å­˜ä¸å¤Ÿè€Œå¯¼è‡´OOMã€‚</p><p>æŒ‰JDK8ç‰ˆæœ¬ï¼Œæ€»ç»“èµ·æ¥å…¶å®å°±ç›¸å½“äºç±»ä¿¡æ¯æ˜¯å­˜å‚¨åœ¨å…ƒç©ºé—´çš„ã€‚</p><p>è€Œå¸¸é‡æ± ç”¨JDK7å¼€å§‹ï¼Œä»ç‰©ç†å­˜å‚¨è§’åº¦ä¸Šå°±åœ¨å †ä¸­ï¼Œè¿™æ˜¯æ²¡æœ‰å˜åŒ–çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.6tcxcnpc0xc0.png"></p><hr><h2 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h2><p>å †æ˜¯çº¿ç¨‹å…±äº«çš„åŒºåŸŸï¼Œå‡ ä¹ç±»çš„å®ä¾‹å’Œæ•°ç»„åˆ†é…çš„å†…å­˜éƒ½æ¥è‡ªäºå®ƒã€‚</p><p>å †è¢«åˆ’åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œæ–°ç”Ÿä»£åˆè¢«è¿›ä¸€æ­¥åˆ’åˆ†ä¸ºEdenå’ŒSurvivoråŒºï¼Œæœ€åSurvivorç”±Fromå’ŒToç»„æˆã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.xs8rfk598hc.png"></p><p>å°†å †å†…å­˜åˆ†å¼€äº†å‡ å—åŒºåŸŸï¼Œä¸»è¦æ˜¯è·Ÿå†…å­˜å›æ”¶æœ‰å…³ï¼ˆåƒåœ¾å›æ”¶æœºåˆ¶ï¼‰ã€‚</p><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Javaå†…å­˜æ¨¡å‹æ˜¯è·Ÿ<strong>å¹¶å‘</strong>ç›¸å…³çš„ï¼Œå®ƒæ˜¯ä¸ºäº†å±è”½åº•å±‚ç»†èŠ‚è€Œæå‡ºçš„è§„èŒƒï¼Œå¸Œæœ›åœ¨ä¸Šå±‚ï¼ˆJavaå±‚é¢ä¸Šï¼‰åœ¨æ“ä½œå†…å­˜æ—¶åœ¨ä¸åŒçš„å¹³å°ä¸Šä¹Ÿæœ‰ç›¸åŒçš„æ•ˆæœã€‚</p><p><strong>JVMå†…å­˜ç»“æ„ç»„æˆ</strong>ï¼šJVMå†…å­˜ç»“æ„åˆç§°ä¸ºã€Œè¿è¡Œæ—¶æ•°æ®åŒºåŸŸã€ã€‚ä¸»è¦æœ‰äº”éƒ¨åˆ†ç»„æˆï¼šè™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨ã€æ–¹æ³•åŒºå’Œå †ã€‚å…¶ä¸­æ–¹æ³•åŒºå’Œå †æ˜¯çº¿ç¨‹å…±äº«çš„ã€‚è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆä»¥åŠç¨‹åºè®¡æ•°å™¨æ˜¯çº¿ç¨‹éš”ç¦»çš„ã€‚</p><hr><p>æ›´è¯¦ç»†å­¦ä¹ æ¨èåšå®¢ï¼š<a href="https://pdai.tech/md/java/jvm/java-jvm-struct.html%EF%BC%88%E8%BF%99%E4%B8%AA%E5%9C%A8%E6%88%91%E7%9A%84%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5%E6%9C%89%EF%BC%89">https://pdai.tech/md/java/jvm/java-jvm-struct.htmlï¼ˆè¿™ä¸ªåœ¨æˆ‘çš„å‹æƒ…é“¾æ¥æœ‰ï¼‰</a></p><p>æ›´è¯¦ç»†å­¦ä¹ æ¨èä¹¦ç±ï¼šã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹</p>]]></content>
      
      
      <categories>
          
          <category> Javaå­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼å­¦ä¹ ç¬”è®°</title>
      <link href="/2021/07/09/she-ji-mo-shi-xue-xi-bi-ji/"/>
      <url>/2021/07/09/she-ji-mo-shi-xue-xi-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼å­¦ä¹ ç¬”è®°ï¼ˆæŒç»­æ›´æ–°ï¼‰"><a href="#è®¾è®¡æ¨¡å¼å­¦ä¹ ç¬”è®°ï¼ˆæŒç»­æ›´æ–°ï¼‰" class="headerlink" title="è®¾è®¡æ¨¡å¼å­¦ä¹ ç¬”è®°ï¼ˆæŒç»­æ›´æ–°ï¼‰"></a>è®¾è®¡æ¨¡å¼å­¦ä¹ ç¬”è®°ï¼ˆæŒç»­æ›´æ–°ï¼‰</h1><hr><h2 id="ç®€å•å·¥å‚æ¨¡å¼"><a href="#ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="ç®€å•å·¥å‚æ¨¡å¼"></a>ç®€å•å·¥å‚æ¨¡å¼</h2><h3 id="ç®€å•å·¥å‚ç»“æ„"><a href="#ç®€å•å·¥å‚ç»“æ„" class="headerlink" title="ç®€å•å·¥å‚ç»“æ„"></a>ç®€å•å·¥å‚ç»“æ„</h3><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.4ysb93bivsw0.png"></p><ul><li>Api : å®šä¹‰å®¢æˆ·æ‰€éœ€è¦çš„åŠŸèƒ½æ¥å£ã€‚</li><li>Impl : å…·ä½“å®ç°Apiçš„å®ç°ç±»ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ª</li><li>Factory : å·¥å‚ï¼Œé€‰æ‹©åˆé€‚çš„å®ç°ç±»æ¥åˆ›å»ºApiæ¥å£å¯¹è±¡</li><li>Client : å®¢æˆ·ç«¯ï¼Œé€šè¿‡Factoryæ¥è·å–Apiæ¥å£å¯¹è±¡ï¼Œç„¶åé¢å‘Apiæ¥å£ç¼–ç¨‹</li></ul><h3 id="ç®€å•å·¥å‚ç¤ºä¾‹ä»£ç "><a href="#ç®€å•å·¥å‚ç¤ºä¾‹ä»£ç " class="headerlink" title="ç®€å•å·¥å‚ç¤ºä¾‹ä»£ç "></a>ç®€å•å·¥å‚ç¤ºä¾‹ä»£ç </h3><blockquote><p>Apiå®šä¹‰çš„ç¤ºä¾‹ä»£ç </p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æ¥å£çš„å®šä¹‰ï¼Œè¯¥æ¥å£å¯ä»¥é€šè¿‡ç®€å•å·¥å‚æ¥åˆ›å»º */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Api</span> <span class="token punctuation">{</span>  <span class="token comment">/**   * ç¤ºæ„ï¼Œå…·ä½“åŠŸèƒ½æ–¹æ³•çš„å®šä¹‰   * @param s ç¤ºæ„ï¼Œéœ€è¦çš„å‚æ•°   */</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å®šä¹‰äº†æ¥å£ï¼Œæ¥ä¸‹æ¥å®ç°å®ƒã€‚ImplAçš„ç¤ºä¾‹ä»£ç </p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æ¥å£çš„å…·ä½“å®ç°å¯¹è±¡A */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImplA</span> <span class="token keyword">implements</span> <span class="token class-name">Api</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// å®ç°åŠŸèƒ½çš„ä»£ç ï¼Œç¤ºæ„ä¸€ä¸‹</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ImplA s=="</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>ImplBçš„ç¤ºä¾‹ä»£ç </p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æ¥å£çš„å…·ä½“å®ç°å¯¹è±¡B */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImplB</span> <span class="token keyword">implements</span> <span class="token class-name">Api</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// å®ç°åŠŸèƒ½çš„ä»£ç ï¼Œç¤ºæ„ä¸€ä¸‹</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ImplB s=="</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>ç®€å•å·¥å‚çš„å®ç°</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å·¥å‚ç±»ï¼Œç”¨æ¥åˆ›å»ºApiå¯¹è±¡ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Factory</span> <span class="token punctuation">{</span>  <span class="token comment">/**   * å…·ä½“åˆ›å»ºApiå¯¹è±¡çš„æ–¹æ³•   * @param conditionç¤ºæ„ï¼Œä»å¤–éƒ¨ä¼ å…¥çš„é€‰æ‹©æ¡ä»¶   * @return åˆ›å»ºå¥½çš„Apiå¯¹è±¡   */</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Api</span> <span class="token function">createApi</span><span class="token punctuation">(</span><span class="token keyword">int</span> condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// åº”è¯¥æ ¹æ®æŸäº›æ¡ä»¶å»é€‰æ‹©ç©¶ç«Ÿåˆ›å»ºå“ªä¸€ä¸ªå…·ä½“çš„å®ç°å¯¹è±¡</span>    <span class="token comment">// è¿™äº›æ¡ä»¶å¯ä»¥ä»å¤–éƒ¨ä¼ å…¥ï¼Œä¹Ÿå¯ä»¥ä»å…¶ä»–é€”å¾„æ¥è·å–</span>    <span class="token comment">// å¦‚æœåªæœ‰ä¸€ä¸ªå®ç°ï¼Œå¯ä»¥çœç•¥æ¡ä»¶</span>    <span class="token class-name">Api</span> api <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>condition <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      api <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImplA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>condition <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      api <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImplB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> api<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å®¢æˆ·ç«¯çš„ç¤ºä¾‹ä»£ç </p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å®¢æˆ·ç«¯ï¼Œä½¿ç”¨Apiæ¥å£ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// é€šè¿‡ç®€å•å·¥å‚æ¥è·å–æ¥å£å¯¹è±¡</span>    <span class="token class-name">Api</span> api <span class="token operator">=</span> <span class="token class-name">Factory</span><span class="token punctuation">.</span><span class="token function">createApi</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    api<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token string">"æ­£åœ¨ä½¿ç”¨ç®€å•å·¥å‚"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebMagic + Selenium + æ— å¤´æµè§ˆå™¨</title>
      <link href="/2021/07/09/webmagic-wu-tou-liu-lan-qi/"/>
      <url>/2021/07/09/webmagic-wu-tou-liu-lan-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="WebMagic-Selenium-æ— å¤´æµè§ˆå™¨"><a href="#WebMagic-Selenium-æ— å¤´æµè§ˆå™¨" class="headerlink" title="WebMagic + Selenium + æ— å¤´æµè§ˆå™¨"></a>WebMagic + Selenium + æ— å¤´æµè§ˆå™¨</h1><hr><h2 id="WebMagicå­¦ä¹ "><a href="#WebMagicå­¦ä¹ " class="headerlink" title="WebMagicå­¦ä¹ "></a>WebMagicå­¦ä¹ </h2><h3 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h3><p>WebMagicé¡¹ç›®ä»£ç åˆ†ä¸ºæ ¸å¿ƒå’Œæ‰©å±•ä¸¤éƒ¨åˆ†ã€‚</p><p>æ ¸å¿ƒéƒ¨åˆ†ä¸»è¦æ˜¯ç²¾ç®€çš„çˆ¬è™«å®ç°ã€‚ï¼ˆæä¾›ç®€å•çµæ´»çš„Apiï¼‰</p><p>æ‰©å±•éƒ¨åˆ†ä¸»è¦æ˜¯ä¸€äº›ä¾¿åˆ©ã€å®ç”¨æ€§çš„åŠŸèƒ½ã€‚ï¼ˆä¾‹å¦‚æ³¨è§£æ¨¡å¼ç¼–å†™çˆ¬è™«ï¼‰</p><h3 id="å¾®å†…æ ¸å’Œé«˜å¯æ‰©å±•æ€§"><a href="#å¾®å†…æ ¸å’Œé«˜å¯æ‰©å±•æ€§" class="headerlink" title="å¾®å†…æ ¸å’Œé«˜å¯æ‰©å±•æ€§"></a>å¾®å†…æ ¸å’Œé«˜å¯æ‰©å±•æ€§</h3><p>WebMagicç”±å››ä¸ªç»„ä»¶ï¼ˆDownloaderã€PageProcessorã€Schedulerã€Pipelineï¼‰æ„æˆï¼Œä¸»è¦æ˜¯å°†è¿™äº›ç»„ä»¶ç»“åˆå¹¶å®Œæˆå¤šçº¿ç¨‹çš„ä»»åŠ¡ã€‚</p><p>è¿™æ ·ï¼Œå°±å¯ä»¥å¯¹çˆ¬è™«åŠŸèƒ½åšå®šåˆ¶</p><h3 id="æ€»ä½“æ¶æ„"><a href="#æ€»ä½“æ¶æ„" class="headerlink" title="æ€»ä½“æ¶æ„"></a>æ€»ä½“æ¶æ„</h3><p>WebMagicä¸»è¦æ˜¯ç”±ä¸Šé¢çš„å››ä¸ªç»„ä»¶ç»„æˆå¹¶ç”±Spiderå°†å®ƒä»¬å½¼æ­¤ç»„ç»‡èµ·æ¥ã€‚</p><p>Spideræ˜¯ä¸€ä¸ªå¤§çš„å®¹å™¨ï¼Œå®ƒä¹Ÿæ˜¯WebMagicé€»è¾‘çš„æ ¸å¿ƒã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.5os44cheh780.png"></p><h3 id="WebMagicçš„å››ä¸ªç»„ä»¶"><a href="#WebMagicçš„å››ä¸ªç»„ä»¶" class="headerlink" title="WebMagicçš„å››ä¸ªç»„ä»¶"></a>WebMagicçš„å››ä¸ªç»„ä»¶</h3><ul><li>Downloader : è´Ÿè´£ä»äº’è”ç½‘ä¸Šä¸‹è½½é¡µé¢ï¼ŒWebMagicé»˜è®¤ä½¿ç”¨äº†<a href="http://hc.apache.org/index.html">Apache HttpClient</a>ä½œä¸ºä¸‹è½½å·¥å…·ã€‚</li><li>PageProcessor : è´Ÿè´£è§£æé¡µé¢ï¼ŒæŠ½å–æœ‰ç”¨ä¿¡æ¯ï¼Œä»¥åŠå‘ç°æ–°çš„é“¾æ¥ã€‚WebMagicä½¿ç”¨<a href="http://jsoup.org/">Jsoup</a>ä½œä¸ºHTMLè§£æå·¥å…·ï¼Œå¹¶åŸºäºå…¶å¼€å‘äº†è§£æXPathçš„å·¥å…·<a href="https://github.com/code4craft/xsoup">Xsoup</a>ã€‚</li><li>Scheduler : è´Ÿè´£ç®¡ç†å¾…æŠ“å–çš„URLï¼Œä»¥åŠä¸€äº›å»é‡çš„å·¥ä½œã€‚WebMagicé»˜è®¤æä¾›äº†JDKçš„å†…å­˜é˜Ÿåˆ—æ¥ç®¡ç†URLï¼Œå¹¶ç”¨é›†åˆæ¥è¿›è¡Œå»é‡ã€‚ä¹Ÿæ”¯æŒä½¿ç”¨Redisè¿›è¡Œåˆ†å¸ƒå¼ç®¡ç†ã€‚</li><li>Pipeline : è´Ÿè´£æŠ½å–ç»“æœçš„å¤„ç†ï¼ŒåŒ…æ‹¬è®¡ç®—ã€æŒä¹…åŒ–åˆ°æ–‡ä»¶ã€æ•°æ®åº“ç­‰ã€‚WebMagicé»˜è®¤æä¾›äº†â€œè¾“å‡ºåˆ°æ§åˆ¶å°â€å’Œâ€œä¿å­˜åˆ°æ–‡ä»¶â€ä¸¤ç§ç»“æœå¤„ç†æ–¹æ¡ˆã€‚</li></ul><blockquote><p>PageProcessorå¯¹äºæ¯ä¸ªç«™ç‚¹æ¯ä¸ªé¡µé¢éƒ½ä¸ä¸€æ ·ï¼Œæ˜¯éœ€è¦ä½¿ç”¨è€…å®šåˆ¶çš„éƒ¨åˆ†</p><p>é™¤éé¡¹ç›®æœ‰ä¸€äº›ç‰¹æ®Šçš„åˆ†å¸ƒå¼éœ€æ±‚ï¼Œå¦åˆ™æ— éœ€è‡ªå·±å®šåˆ¶Scheduler</p><p>Pipelineå®šä¹‰äº†ç»“æœä¿å­˜çš„æ–¹å¼ï¼Œå¦‚æœä½ è¦ä¿å­˜åˆ°æŒ‡å®šæ•°æ®åº“ï¼Œåˆ™éœ€è¦ç¼–å†™å¯¹åº”çš„Pipelineï¼Œå¯¹äºä¸€ç±»éœ€æ±‚ä¸€èˆ¬åªç¼–å†™ä¸€ä¸ªPipeline</p></blockquote><h3 id="ç”¨äºæ•°æ®æµæµè½¬çš„å¯¹è±¡"><a href="#ç”¨äºæ•°æ®æµæµè½¬çš„å¯¹è±¡" class="headerlink" title="ç”¨äºæ•°æ®æµæµè½¬çš„å¯¹è±¡"></a>ç”¨äºæ•°æ®æµæµè½¬çš„å¯¹è±¡</h3><blockquote><p>Request</p></blockquote><p>æ˜¯å¯¹URLåœ°å€çš„ä¸€å±‚å°è£…ï¼Œä¸€ä¸ªRequestå¯¹åº”ä¸€ä¸ªURLåœ°å€ã€‚</p><p>å®ƒæ˜¯PageProcessorä¸Downloaderäº¤äº’çš„è½½ä½“ï¼Œä¹Ÿæ˜¯PageProcessoræ§åˆ¶Downloaderå”¯ä¸€æ–¹å¼ã€‚</p><p>é™¤äº†URLæœ¬èº«å¤–ï¼Œå®ƒè¿˜åŒ…å«ä¸€ä¸ªKey-Valueç»“æ„çš„å­—æ®µ<code>extra</code>ã€‚ä½ å¯ä»¥åœ¨extraä¸­ä¿å­˜ä¸€äº›ç‰¹æ®Šçš„å±æ€§ï¼Œç„¶ååœ¨å…¶ä»–åœ°æ–¹è¯»å–ï¼Œä»¥å®Œæˆä¸åŒçš„åŠŸèƒ½ã€‚ä¾‹å¦‚é™„åŠ ä¸Šä¸€ä¸ªé¡µé¢çš„ä¸€äº›ä¿¡æ¯ç­‰ã€‚</p><blockquote><p>Page</p></blockquote><p><code>Page</code>ä»£è¡¨äº†ä»Downloaderä¸‹è½½åˆ°çš„ä¸€ä¸ªé¡µé¢â€”â€”å¯èƒ½æ˜¯HTMLï¼Œä¹Ÿå¯èƒ½æ˜¯JSONæˆ–è€…å…¶ä»–æ–‡æœ¬æ ¼å¼çš„å†…å®¹ã€‚</p><p>Pageæ˜¯WebMagicæŠ½å–è¿‡ç¨‹çš„æ ¸å¿ƒå¯¹è±¡ï¼Œå®ƒæä¾›ä¸€äº›æ–¹æ³•å¯ä¾›æŠ½å–ã€ç»“æœä¿å­˜ç­‰ã€‚</p><blockquote><p>ResultItems</p></blockquote><p><code>ResultItems</code>ç›¸å½“äºä¸€ä¸ªMapï¼Œå®ƒä¿å­˜PageProcessorå¤„ç†çš„ç»“æœï¼Œä¾›Pipelineä½¿ç”¨ã€‚å®ƒçš„APIä¸Mapå¾ˆç±»ä¼¼ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯å®ƒæœ‰ä¸€ä¸ªå­—æ®µ<code>skip</code>ï¼Œè‹¥è®¾ç½®ä¸ºtrueï¼Œåˆ™ä¸åº”è¢«Pipelineå¤„ç†ã€‚</p><h3 id="æ§åˆ¶çˆ¬è™«è¿è½¬çš„å¼•æ“â€“Spider"><a href="#æ§åˆ¶çˆ¬è™«è¿è½¬çš„å¼•æ“â€“Spider" class="headerlink" title="æ§åˆ¶çˆ¬è™«è¿è½¬çš„å¼•æ“â€“Spider"></a>æ§åˆ¶çˆ¬è™«è¿è½¬çš„å¼•æ“â€“Spider</h3><p>Spideræ˜¯WebMagicå†…éƒ¨æµç¨‹çš„æ ¸å¿ƒã€‚ä¸Šè¿°çš„å››ä¸ªç»„ä»¶ï¼Œéƒ½æ˜¯Spiderçš„ä¸€ä¸ªå±æ€§ï¼Œè¿™äº›å±æ€§æ˜¯å¯ä»¥è‡ªç”±è®¾ç½®çš„ï¼Œé€šè¿‡è®¾ç½®è¿™ä¸ªå±æ€§å¯ä»¥å®ç°ä¸åŒçš„åŠŸèƒ½ã€‚</p><p>Spiderä¹Ÿæ˜¯WebMagicæ“ä½œçš„å…¥å£ï¼Œå®ƒå°è£…äº†çˆ¬è™«çš„åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€å¤šçº¿ç¨‹ç­‰åŠŸèƒ½ã€‚</p><blockquote><p>è®¾ç½®å„ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”è®¾ç½®å¤šçº¿ç¨‹å’Œå¯åŠ¨çš„ä¾‹å­</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Spider</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GithubRepoPageProcessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">//ä»https://github.com/code4craftå¼€å§‹æŠ“    </span>            <span class="token punctuation">.</span><span class="token function">addUrl</span><span class="token punctuation">(</span><span class="token string">"https://github.com/code4craft"</span><span class="token punctuation">)</span>            <span class="token comment">//è®¾ç½®Schedulerï¼Œä½¿ç”¨Redisæ¥ç®¡ç†URLé˜Ÿåˆ—</span>            <span class="token punctuation">.</span><span class="token function">setScheduler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RedisScheduler</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">//è®¾ç½®Pipelineï¼Œå°†ç»“æœä»¥jsonæ–¹å¼ä¿å­˜åˆ°æ–‡ä»¶</span>            <span class="token punctuation">.</span><span class="token function">addPipeline</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JsonFilePipeline</span><span class="token punctuation">(</span><span class="token string">"D:\\data\\webmagic"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">//å¼€å¯5ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œ</span>            <span class="token punctuation">.</span><span class="token function">thread</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>            <span class="token comment">//å¯åŠ¨çˆ¬è™«</span>            <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="Seleniumæ¡†æ¶"><a href="#Seleniumæ¡†æ¶" class="headerlink" title="Seleniumæ¡†æ¶"></a>Seleniumæ¡†æ¶</h2><h3 id="æ¦‚è§ˆ-1"><a href="#æ¦‚è§ˆ-1" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h3><p>Seleniumæ˜¯ç›®å‰ç”¨çš„æœ€å¹¿æ³›çš„Web UIè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œç¥–ä¼ çˆ¬è™«åˆ©å™¨ã€‚</p><p>ä¸€äº›ç½‘é¡µï¼Œæ¯”å¦‚å¾®åšï¼Œåªæœ‰åœ¨ç™»å½•çŠ¶æ€æ‰èƒ½è¿›è¡Œé¡µé¢çš„è®¿é—®ï¼Œæˆ–è€…å¯¹æ•°æ®æœ‰æ¯”è¾ƒå¤æ‚çš„éªŒè¯å’Œä¿æŠ¤ï¼Œç›´æ¥é€šè¿‡ç½‘ç»œè¯·æ±‚è¿›è¡Œç™»å½•å¹¶è·å–æ•°æ®å°±ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚è¿™ç§æ—¶å€™ï¼Œå°±è¯¥æœ¬ç¯‡çš„ä¸»è§’ selenium ä¸Šåœºäº†ã€‚</p><p>Selenium æ˜¯ä¸€ä¸ªç”¨äº Web åº”ç”¨ç¨‹åºæµ‹è¯•çš„å·¥å…·ã€‚å®ƒçš„ä¼˜ç‚¹åœ¨äºï¼Œæµè§ˆå™¨èƒ½æ‰“å¼€çš„é¡µé¢ï¼Œä½¿ç”¨ selenium å°±ä¸€å®šèƒ½è·å–åˆ°ã€‚ä½† selenium ä¹Ÿæœ‰å…¶å±€é™æ€§ï¼Œç›¸å¯¹äºè„šæœ¬æ–¹å¼ï¼Œselenium è·å–å†…å®¹çš„æ•ˆç‡ä¸é«˜ã€‚</p><h3 id="åŸºæœ¬ä½¿ç”¨æ–¹æ³•"><a href="#åŸºæœ¬ä½¿ç”¨æ–¹æ³•" class="headerlink" title="åŸºæœ¬ä½¿ç”¨æ–¹æ³•"></a>åŸºæœ¬ä½¿ç”¨æ–¹æ³•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">from selenium <span class="token function">import</span> webdriver<span class="token comment"># è°ƒç”¨Chromeæµè§ˆå™¨</span>driver <span class="token operator">=</span> webdriver.Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># è½¬åˆ°ç™¾åº¦é¦–é¡µ</span>driver.get<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨ PhantomJS æ—¶ : </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">deriver <span class="token operator">=</span> webdriver.PhantomJS<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Seleniumè·å–Cookies"><a href="#Seleniumè·å–Cookies" class="headerlink" title="Seleniumè·å–Cookies"></a>Seleniumè·å–Cookies</h3><p>åœ¨åçˆ¬é¢†åŸŸä¸­ï¼Œå¸¸å¸¸ä½¿ç”¨seleniumè·å–cookiesåº”ä»˜åçˆ¬è™«</p><p>æ¯”å¦‚ï¼Œçˆ¬å–å¾®åšå†…å®¹ï¼Œéœ€è¦ç™»å½•çŠ¶æ€ï¼Œè€Œä¿å­˜çš„cookieä¼šåœ¨ä¸€å®šæ—¶é—´åå¤±æ•ˆï¼Œè¿™æ—¶å€™se leniumå°±å¯ä»¥ä½¿ç”¨é¢„å…ˆè®¾ç½®å¥½çš„è´¦å·å¯†ç ç™»é™†ï¼Œç„¶åè·å–cookieså‘é€ç»™è„šæœ¬ä½¿ç”¨ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è·å–cookie ä»¥ç™¾åº¦ä¸ºä¾‹</span>cookie_r <span class="token operator">=</span> driver.get_cookies<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h2 id="æ— å¤´æµè§ˆå™¨"><a href="#æ— å¤´æµè§ˆå™¨" class="headerlink" title="æ— å¤´æµè§ˆå™¨"></a>æ— å¤´æµè§ˆå™¨</h2><h3 id="æ¦‚è§ˆ-2"><a href="#æ¦‚è§ˆ-2" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h3><p>æ— å¤´æµè§ˆå™¨èŠ‚çœäº†GUIæ‰€å¿…é¡»æ¶ˆè€—çš„å¤§é‡å†…å­˜ï¼Œç»™å¤šçº¿ç¨‹ã€è¿›ç¨‹å¹¶è¡Œæä¾›äº†æ–¹ä¾¿ã€‚è€Œçˆ¬è™«ç¢°åˆ°éœ€è¦è¿è¡Œjsä»£ç æ—¶ï¼Œåˆå¿…é¡»å€ŸåŠ©è¿è¡Œjsçš„å·¥å…·ï¼šæµè§ˆå™¨ã€‚</p><blockquote><p>å¸¸ç”¨çš„æ— å¤´æµè§ˆå™¨</p></blockquote><p>PhantomJS : åŸºäºQtWebkitçš„æ— å¤´æµè§ˆå™¨ï¼Œå¼€å‘è¯­è¨€æ˜¯JavaScriptã€‚</p><p>SlimerJS : åŸºäºGeckoçš„æ— å¤´æµè§ˆå™¨ï¼ŒSlimerJSå’ŒPhantomJSåŸºæœ¬å…¼å®¹ï¼Œå°±æ˜¯ä¸€ä¸ªå†…æ ¸æ¢æˆäº†Geckoçš„PhantomJSã€‚</p><p>HtmlUnit : çº¯Javaå¼€å‘çš„æ— å¤´æµè§ˆå™¨ï¼Œå®Œå…¨Javaå¼€å‘ï¼ŒJavascriptå¼•æ“ä½¿ç”¨çš„æ˜¯Rhnioï¼Œç”±äºä¸æ˜¯åŸºäºWebkitã€Geckoç­‰ä¸»æµå†…æ ¸å¼€å‘ï¼Œå…¼å®¹æ€§ä¸å¥½ã€‚</p><h3 id="æŠ€æœ¯é€‰å‹"><a href="#æŠ€æœ¯é€‰å‹" class="headerlink" title="æŠ€æœ¯é€‰å‹"></a>æŠ€æœ¯é€‰å‹</h3><p><strong>PhantomJS</strong></p><p>çˆ½ç‚¹ï¼šç›®å‰ä½¿ç”¨æœ€å¹¿æ³›ï¼Œæœ€è¢«è®¤å¯çš„æ— å¤´æµè§ˆå™¨ã€‚ç”±äºé‡‡ç”¨çš„æ˜¯Webkitå†…æ ¸ï¼Œå› æ­¤å’ŒSafariï¼ŒChromeç­‰æµè§ˆå™¨å…¼å®¹æ€§ååˆ†å¥½ã€‚</p><p>ç—›ç‚¹ï¼šå’ŒJavaç»“åˆä½¿ç”¨æ¯”è¾ƒéº»çƒ¦ï¼Œä¸»è¦è¿˜æ˜¯è°ƒç”¨phantomjsæ‰§è¡Œã€‚</p><p>å®‰è£…ï¼š<a href="http://phantomjs.org/download.html">http://phantomjs.org/download.html</a></p><p><strong>HtmlUnit</strong></p><p>çˆ½ç‚¹ï¼šHtmlUnitæ˜¯ä¸€æ¬¾çº¯javaå¼€å‘çš„æ— å¤´æµè§ˆå™¨ã€‚</p><p>ç—›ç‚¹ï¼šä»–æ—¢æ²¡æœ‰ç”¨weibkitå†…æ ¸ï¼Œä¹Ÿæ²¡ç”¨geckoå†…æ ¸ï¼Œå…¶domè§£æã€cssè§£æã€javascriptè§£æéƒ½æ˜¯çº¯javaå¼€å‘çš„ï¼Œå› æ­¤å…¶å…¼å®¹æ€§ä¸å¤ªç†æƒ³ã€‚ç›®å‰HtmlUnitçš„æœ€æ–°ç‰ˆæœ¬çš„javascriptå¼•æ“ä½¿ç”¨çš„æ˜¯ä¸€æ¬¾å¾ˆè€çš„å«åšRhnioçš„å¼•æ“ï¼Œä¸ç®¡åœ¨æ•ˆç‡å’Œå…¼å®¹æ€§ä¸Šéƒ½ä¸ç†æƒ³ã€‚</p><blockquote><p>ä¸ªäººè®¤ä¸ºï¼Œä½¿ç”¨ä¸šç•Œæœ€å—è®¤å¯çš„æ— å¤´æµè§ˆå™¨å¥½ä¸€ç‚¹ã€‚åŒæ—¶ä¹Ÿä¸ä¼šä¸ºå…¼å®¹æ€§å‘æ„ã€‚</p></blockquote><h3 id="PhantomJSå…¥é—¨"><a href="#PhantomJSå…¥é—¨" class="headerlink" title="PhantomJSå…¥é—¨"></a>PhantomJSå…¥é—¨</h3><p><strong>PhantomJSæ ¸å¿ƒAPI</strong></p><ul><li>webpage : å®ƒçš„ä½œç”¨ä¸»è¦æ˜¯æä¾›äº†ä¸€å¥—å¯ä»¥è®¿é—®å’Œæ“ä½œwebæ–‡æ¡£çš„æ ¸å¿ƒæ–¹æ³•ï¼ŒåŒ…æ‹¬æ“ä½œDOMã€äº‹ä»¶æ•è·ã€ç”¨æˆ·äº‹ä»¶æ¨¡æ‹Ÿç­‰ç­‰ã€‚</li><li>system : è¯¥æ¨¡å—æä¾›äº†ä¸€äº›ä¸æ“ä½œç³»ç»Ÿç›¸å…³çš„æ¥å£ï¼Œä¾‹å¦‚è®¿é—®æ“ä½œç³»ç»Ÿä¿¡æ¯ã€è®¿é—®ç³»ç»Ÿç¯å¢ƒå˜é‡ã€äº‹ä»¶æ•è·ã€ç”¨æˆ·äº‹ä»¶æ¨¡æ‹Ÿç­‰ç­‰ã€‚</li><li>fs : å³FIleSystemã€‚æä¾›äº†æ‰§è¡Œæ–‡ä»¶I/Oæ“ä½œçš„æ ‡å‡†æ¥å£ï¼Œå¦‚è¯»å†™æ–‡ä»¶ã€åˆ é™¤æ–‡ä»¶ç­‰ã€‚å®ƒä½¿å¾—æŒä¹…åŒ–ä¸€äº›æ–‡ä»¶å˜å¾—éå¸¸å®¹æ˜“ã€‚</li><li>webserver : å¯ä»¥å®ç°è‡ªå·±çš„webserverï¼Œç”¨æ¥å¤„ç†è¯·æ±‚å¹¶æ‰§è¡ŒPhantomJSä»£ç ã€‚</li></ul><p><strong>å…¶ä»–å‘½ä»¤</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># é…ç½®ä¿¡æ¯æ‰§è¡ŒPhantomJSå‘½ä»¤æ ¼å¼å¦‚ä¸‹</span>phantomjs <span class="token punctuation">[</span>switches<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>script<span class="token punctuation">]</span> <span class="token punctuation">[</span>argument <span class="token punctuation">[</span>argument <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token comment"># æ‰“å¼€debugæ¨¡å¼</span>phantomjs --debug<span class="token operator">=</span>yes demo.js<span class="token comment"># è®¾ç½®cookieè·¯å¾„</span>phantomjs --cookie-file<span class="token operator">=</span>cookie.txt demo.js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="çˆ¬è™«æ¡ˆä¾‹"><a href="#çˆ¬è™«æ¡ˆä¾‹" class="headerlink" title="çˆ¬è™«æ¡ˆä¾‹"></a>çˆ¬è™«æ¡ˆä¾‹</h2><p><a href="https://segmentfault.com/a/1190000008194764">æŠ“å–æ·˜å®åº—é“ºåŠçŒ«çœ¼æ•°æ®</a></p><p><a href="https://www.cnblogs.com/null-qige/p/7844381.html">æŠ“å–æ·˜å®æœç´¢é¡µé¢</a></p><p><a href="https://blog.csdn.net/sd4000784/article/details/99618640">æŠ“å–æˆ¿æºä¿¡æ¯å†…å®¹ç½‘ç«™</a></p>]]></content>
      
      
      <categories>
          
          <category> å·¥ä½œå­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çˆ¬è™«ç›¸å…³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode 124.äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ</title>
      <link href="/2021/07/08/leetcode-124.er-cha-shu-zhong-de-zui-da-lu-jing-he/"/>
      <url>/2021/07/08/leetcode-124.er-cha-shu-zhong-de-zui-da-lu-jing-he/</url>
      
        <content type="html"><![CDATA[<h1 id="äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ"><a href="#äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ" class="headerlink" title="äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ"></a>äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ</h1><hr><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>è·¯å¾„ è¢«å®šä¹‰ä¸ºä¸€æ¡ä»æ ‘ä¸­ä»»æ„èŠ‚ç‚¹å‡ºå‘ï¼Œæ²¿çˆ¶èŠ‚ç‚¹-å­èŠ‚ç‚¹è¿æ¥ï¼Œè¾¾åˆ°ä»»æ„èŠ‚ç‚¹çš„åºåˆ—ã€‚åŒä¸€ä¸ªèŠ‚ç‚¹åœ¨ä¸€æ¡è·¯å¾„åºåˆ—ä¸­ è‡³å¤šå‡ºç°ä¸€æ¬¡ ã€‚è¯¥è·¯å¾„ è‡³å°‘åŒ…å«ä¸€ä¸ª èŠ‚ç‚¹ï¼Œä¸”ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹ã€‚</p><p>è·¯å¾„å’Œ æ˜¯è·¯å¾„ä¸­å„èŠ‚ç‚¹å€¼çš„æ€»å’Œã€‚</p><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›å…¶ æœ€å¤§è·¯å¾„å’Œ ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.38uhvrj92jg0.png"></p><pre class="line-numbers language-none"><code class="language-none">è¾“å…¥ï¼šroot = [1,2,3]è¾“å‡ºï¼š6è§£é‡Šï¼šæœ€ä¼˜è·¯å¾„æ˜¯ 2 -&gt; 1 -&gt; 3 ï¼Œè·¯å¾„å’Œä¸º 2 + 1 + 3 = 6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.2rp84r44x6s0.png"></p><pre class="line-numbers language-none"><code class="language-none">è¾“å…¥ï¼šroot = [-10,9,20,null,null,15,7]è¾“å‡ºï¼š42è§£é‡Šï¼šæœ€ä¼˜è·¯å¾„æ˜¯ 15 -&gt; 20 -&gt; 7 ï¼Œè·¯å¾„å’Œä¸º 15 + 20 + 7 = 42<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>æç¤ºï¼š</strong></p><ul><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯ <code>[1, 3 * 104]</code></li><li><code>-1000 &lt;= Node.val &lt;= 1000</code></li></ul><blockquote><p>äºŒå‰æ ‘é€’å½’å¥—è·¯é¢˜</p></blockquote><hr><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * Definition for a binary tree node. * public class TreeNode { *     int val; *     TreeNode left; *     TreeNode right; *     TreeNode() {} *     TreeNode(int val) { this.val = val; } *     TreeNode(int val, TreeNode left, TreeNode right) { *         this.val = val; *         this.left = left; *         this.right = right; *     } * } */</span><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> maxDis <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1001</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">solveMaxRe</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> node<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>node <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> leftValue <span class="token operator">=</span> <span class="token function">solveMaxRe</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> rightValue <span class="token operator">=</span> <span class="token function">solveMaxRe</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>        leftValue <span class="token operator">=</span> leftValue <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> leftValue<span class="token punctuation">;</span>        rightValue <span class="token operator">=</span> rightValue <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> rightValue<span class="token punctuation">;</span>        <span class="token keyword">int</span> curValue <span class="token operator">=</span> node<span class="token punctuation">.</span>val <span class="token operator">+</span> leftValue <span class="token operator">+</span> rightValue<span class="token punctuation">;</span>        maxDis <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxDis<span class="token punctuation">,</span> curValue<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> node<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftValue<span class="token punctuation">,</span> rightValue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxPathSum</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">solveMaxRe</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> maxDis<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> LeetCodeè®­ç»ƒå½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> leetcode </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå†…å­˜æ¨¡å‹å­¦ä¹ ç¬”è®°</title>
      <link href="/2021/07/07/java-nei-cun-mo-xing-xue-xi/"/>
      <url>/2021/07/07/java-nei-cun-mo-xing-xue-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="æ·±å…¥æµ…å‡ºJavaå†…å­˜æ¨¡å‹"><a href="#æ·±å…¥æµ…å‡ºJavaå†…å­˜æ¨¡å‹" class="headerlink" title="æ·±å…¥æµ…å‡ºJavaå†…å­˜æ¨¡å‹"></a>æ·±å…¥æµ…å‡ºJavaå†…å­˜æ¨¡å‹</h1><hr><h2 id="Javaå†…å­˜æ¨¡å‹ä¸»è¦å†…å®¹"><a href="#Javaå†…å­˜æ¨¡å‹ä¸»è¦å†…å®¹" class="headerlink" title="Javaå†…å­˜æ¨¡å‹ä¸»è¦å†…å®¹"></a>Javaå†…å­˜æ¨¡å‹ä¸»è¦å†…å®¹</h2><ul><li>Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„</li><li>happen-beforeè§„åˆ™</li><li>å¯¹volatileå†…å­˜è¯­ä¹‰çš„æ¢è®¨</li></ul><hr><h2 id="Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„"><a href="#Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„" class="headerlink" title="Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„"></a>Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„</h2><p>Javaå†…å­˜æ¨¡å‹å®šä¹‰äº†Javaçº¿ç¨‹å¯¹å†…å­˜æ•°æ®è¿›è¡Œäº¤äº’çš„è§„èŒƒ</p><p>çº¿ç¨‹ä¹‹é—´çš„<strong>å…±äº«å˜é‡</strong>å­˜å‚¨åœ¨<strong>ä¸»å†…å­˜</strong>ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç§æœ‰çš„<strong>æœ¬åœ°å†…å­˜</strong>ï¼Œ<strong>æœ¬åœ°å†…å­˜</strong>å­˜å‚¨äº†è¯¥çº¿ç¨‹ä»¥è¯»/å†™å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚</p><p>æœ¬åœ°å†…å­˜æ˜¯Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡æ¦‚å¿µï¼Œå¹¶ä¸æ˜¯çœŸå®å­˜åœ¨çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.5t4o77nwzec0.png"></p><p>Javaå†…å­˜æ¨¡å‹è§„å®šäº†ï¼šçº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨<strong>æœ¬åœ°å†…å­˜</strong>è¿›è¡Œï¼Œ<strong>ä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜</strong>çš„å˜é‡ã€‚</p><p>Javaå†…å­˜æ¨¡å‹å®šä¹‰äº†8ç§æ“ä½œæ¥å®Œæˆ<strong>å˜é‡å¦‚ä½•ä»ä¸»å†…å­˜åˆ°æœ¬åœ°å†…å­˜ï¼Œä»¥åŠå˜é‡å¦‚ä½•ä»æœ¬åœ°å†…å­˜åˆ°ä¸»å†…å­˜</strong></p><p>åˆ†åˆ«æ˜¯read/load/use/assign/store/write/lock/unlockæ“ä½œ</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.2c6jhavq4lwk.png"></p><hr><h2 id="happen-before"><a href="#happen-before" class="headerlink" title="happen-before"></a>happen-before</h2><p>Happen-beforeå®é™…ä¸Šæ˜¯ä¸€å¥—<strong>è§„åˆ™</strong>ã€‚Javaå†…å­˜æ¨¡å‹å®šä¹‰äº†è¿™å¥—è§„åˆ™ï¼Œç›®çš„æ˜¯ä¸ºäº†é˜è¿°æ“ä½œä¹‹é—´çš„å†…å­˜<strong>å¯è§æ€§</strong></p><p>CPUå’Œç¼–è¯‘å™¨å±‚é¢ä¸Šéƒ½æœ‰æŒ‡ä»¤é‡æ’çš„é—®é¢˜</p><p>æŒ‡ä»¤é‡æ’è™½ç„¶æ˜¯èƒ½æé«˜è¿è¡Œçš„æ•ˆç‡ï¼Œä½†åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬åœ¨å…¼é¡¾<strong>æ•ˆç‡</strong>çš„å‰æä¸‹ï¼Œè¿˜å¸Œæœ›<strong>ç¨‹åºç»“æœ</strong>èƒ½ç”±æˆ‘ä»¬æŒæ§ã€‚</p><p>è¯´ç™½äº†å°±æ˜¯ï¼Œåœ¨æŸäº›é‡è¦çš„åœºæ™¯ä¸‹ï¼Œè¿™ä¸€ç»„æ“ä½œéƒ½ä¸èƒ½è¿›è¡Œé‡æ’åºï¼Œ<strong>å‰é¢ä¸€ä¸ªæ“ä½œçš„ç»“æœå¯¹åç»­æ“ä½œå¿…é¡»æ˜¯å¯è§çš„ã€‚</strong></p><p>äºæ˜¯ï¼ŒJavaå†…å­˜æ¨¡å‹å°±æå‡ºäº†happen-beforeè¿™å¥—è§„åˆ™ï¼Œè§„åˆ™æ€»å…±æœ‰8æ¡</p><p>æ¯”å¦‚ä¼ é€’æ€§ã€volatileå˜é‡è§„åˆ™ã€ç¨‹åºé¡ºåºè§„åˆ™ã€ç›‘è§†å™¨é”çš„è§„åˆ™ã€‚ã€‚ã€‚</p><p>åªè¦è®°ä½ï¼Œæœ‰äº†happen-beforeè¿™äº›è§„åˆ™ï¼Œæˆ‘ä»¬å†™çš„ä»£ç åªè¦åœ¨è¿™äº›è§„åˆ™ä¸‹ï¼Œå‰ä¸€ä¸ªæ“ä½œçš„ç»“æœå¯¹åç»­æ“ä½œæ˜¯å¯è§çš„ï¼Œæ˜¯ä¸ä¼šå‘ç”Ÿé‡æ’åºçš„ã€‚</p><hr><h2 id="Volatile"><a href="#Volatile" class="headerlink" title="Volatile"></a>Volatile</h2><p>volatileå°±æ˜¯Javaçš„ä¸€ä¸ªå…³é”®å­—</p><p>ä¸ºä»€ä¹ˆè®²Javaå†…å­˜æ¨¡å‹å¾€å¾€å°±ä¼šè®²åˆ°volatileï¼Œå°±æ˜¯å› ä¸ºå®ƒçš„ç‰¹æ€§ï¼šå¯è§è¡Œå’Œæœ‰åºæ€§</p><p>Javaå†…å­˜æ¨¡å‹è¿™ä¸ªè§„èŒƒï¼Œå¾ˆå¤§ç¨‹åº¦ä¸‹å°±æ˜¯ä¸ºäº†è§£å†³å¯è§è¡Œå’Œæœ‰åºæ€§çš„é—®é¢˜ã€‚</p><p>Javaå†…å­˜æ¨¡å‹ä¸ºäº†å®ç°volatileæœ‰åºæ€§å’Œå¯è§è¡Œï¼Œå®šä¹‰äº†4ç§å†…å­˜å±éšœçš„<strong>è§„èŒƒ</strong>ï¼Œåˆ†åˆ«æ˜¯LoadLoad/LoadStore/StoreLoad/StoreStore</p><p>è¯´ç™½äº†ï¼Œå°±æ˜¯åœ¨volatile<strong>å‰å</strong>åŠ ä¸Š<strong>å†…å­˜å±éšœ</strong>ï¼Œä½¿å¾—ç¼–è¯‘å™¨å’ŒCPUæ— æ³•è¿›è¡Œé‡æ’åºï¼Œè‡´ä½¿æœ‰åºï¼Œå¹¶ä¸”å†™volatileå˜é‡å¯¹å…¶ä»–çº¿ç¨‹å¯è§ã€‚</p><hr><h2 id="Javaè™šæ‹Ÿæœºå¯¹å†…å­˜æ¨¡å‹çš„å®ç°"><a href="#Javaè™šæ‹Ÿæœºå¯¹å†…å­˜æ¨¡å‹çš„å®ç°" class="headerlink" title="Javaè™šæ‹Ÿæœºå¯¹å†…å­˜æ¨¡å‹çš„å®ç°"></a>Javaè™šæ‹Ÿæœºå¯¹å†…å­˜æ¨¡å‹çš„å®ç°</h2><p>Javaå†…å­˜æ¨¡å‹å®šä¹‰äº†è§„èŒƒï¼ŒJavaè™šæ‹Ÿæœºå°±å¾—å®ç°ã€‚</p><p>Hotspotè™šæ‹Ÿæœºçš„å®ç°ï¼Œåœ¨<strong>æ±‡ç¼–</strong>å±‚é¢ä¸Šå®é™…æ˜¯é€šè¿‡Lockå‰ç¼€æŒ‡ä»¤æ¥å®ç°çš„ï¼Œè€Œä¸æ˜¯å„ç§fenceæŒ‡ä»¤ï¼ˆä¸»è¦åŸå› å°±æ˜¯ç®€ä¾¿ã€‚å› ä¸ºå¤§éƒ¨åˆ†å¹³å°éƒ½æ”¯æŒlockæŒ‡ä»¤ï¼Œè€ŒfenceæŒ‡ä»¤æ˜¯x86å¹³å°çš„ï¼‰</p><p>lockæŒ‡ä»¤èƒ½ä¿è¯ï¼šç¦æ­¢CPUå’Œç¼–è¯‘å™¨çš„é‡æ’åºï¼ˆä¿è¯äº†æœ‰åºæ€§ï¼‰ã€ä¿è¯CPUå†™æ ¸å¿ƒçš„æŒ‡ä»¤å¯ä»¥ç«‹å³ç”Ÿæ•ˆä¸”å…¶ä»–æ ¸å¿ƒçš„ç¼“å­˜æ•°æ®å¤±æ•ˆï¼ˆä¿è¯äº†å¯è§è¡Œï¼‰ã€‚</p><h2 id="volatileå’ŒMESIåè®®å•¥å…³ç³»"><a href="#volatileå’ŒMESIåè®®å•¥å…³ç³»" class="headerlink" title="volatileå’ŒMESIåè®®å•¥å…³ç³»"></a>volatileå’ŒMESIåè®®å•¥å…³ç³»</h2><p>å¹¶æ²¡æœ‰ç›´æ¥å…³è”</p><p>Javaå†…å­˜æ¨¡å‹å…³æ³¨çš„æ˜¯ç¼–ç¨‹è¯­è¨€å±‚é¢ä¸Šï¼Œå®ƒæ˜¯é«˜ç»´åº¦çš„æŠ½è±¡ã€‚</p><p>MESIæ˜¯CPUç¼“å­˜ä¸€è‡´æ€§åè®®ï¼Œä¸åŒçš„CPUæ¶æ„éƒ½ä¸ä¸€æ ·ï¼Œå¯èƒ½æœ‰çš„CPUå‹æ ¹å°±æ²¡æœ‰MESIåè®®ã€‚ã€‚ã€‚</p><p>åªä¸è¿‡MESIåå£°æ¯”è¾ƒå¤§ï¼Œå¤§å®¶éƒ½æ‹¿å®ƒä¸¾ä¾‹å­ã€‚</p><p>MESIåªæ˜¯åœ¨<strong>ç‰¹å®šåœºæ™¯ä¸‹</strong>ä¸ºå®ç°volatileçš„å¯è§è¡Œ/æœ‰åºæ€§è€Œä½¿ç”¨åˆ°çš„ä¸€éƒ¨åˆ†ç½¢äº†ã€‚</p><p>ä¸ºäº†è®©Javaç¨‹åºå‘˜å±è”½ä¸Šé¢è¿™äº›åº•å±‚çŸ¥è¯†ï¼Œhappen-beforeåŸåˆ™ä¸­å°±æœ‰å¯¹volatileçš„å®šä¹‰ï¼šå¯¹ä¸€ä¸ªvolatileå˜é‡çš„å†™æ“ä½œç›¸å¯¹äºåç»­å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œå¯è§ã€‚</p><p>é€šè¿‡happen-beforeè§„åˆ™è§„å®šï¼šåªè¦å˜é‡å£°æ˜äº†volatileå…³é”®å­—ï¼Œå†™åå†è¯»ï¼Œè¯»å¿…é¡»å¯è§å†™çš„å€¼ã€‚ï¼ˆå¯è§æ€§ï¼Œæœ‰åºæ€§ï¼‰</p><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><strong>ä¸ºä»€ä¹ˆå­˜åœ¨Javaå†…å­˜æ¨¡å‹</strong>ï¼šJavaä¸ºäº†å±è”½ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿè®¿é—®å†…å­˜çš„å„ç§å·®å¼‚ï¼Œæå‡ºäº†ã€ŒJavaå†…å­˜æ¨¡å‹ã€çš„è§„èŒƒï¼Œä¿è¯äº†Javaç¨‹åºåœ¨å„ç§å¹³å°ä¸‹å¯¹å†…å­˜çš„è®¿é—®éƒ½èƒ½å¾—åˆ°ä¸€è‡´æ•ˆæœ</p><p><strong>Javaå†…å­˜æ¨¡å‹æŠ½è±¡ç»“æ„</strong>ï¼šçº¿ç¨‹ä¹‹é—´çš„ã€Œå…±äº«å˜é‡ã€å­˜å‚¨åœ¨ã€Œä¸»å†…å­˜ã€ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç§æœ‰çš„ã€Œæœ¬åœ°å†…å­˜ã€ï¼Œã€Œæœ¬åœ°å†…å­˜ã€å­˜å‚¨äº†è¯¥çº¿ç¨‹ä»¥è¯»/å†™å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚çº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨ã€Œæœ¬åœ°å†…å­˜ã€è¿›è¡Œï¼Œè€Œã€Œä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜ã€çš„å˜é‡</p><p><strong>happen-beforeè§„åˆ™</strong>ï¼šJavaå†…å­˜æ¨¡å‹è§„å®šåœ¨æŸäº›åœºæ™¯ä¸‹ï¼ˆä¸€å…±8æ¡ï¼‰ï¼Œå‰é¢ä¸€ä¸ªæ“ä½œçš„ç»“æœå¯¹åç»­æ“ä½œå¿…é¡»æ˜¯å¯è§çš„ã€‚è¿™8æ¡è§„åˆ™æˆä¸ºhappen-beforeè§„åˆ™</p><p><strong>volatile</strong>ï¼švolatileæ˜¯Javaçš„å…³é”®å­—ï¼Œä¿®é¥°çš„å˜é‡æ˜¯å¯è§æ€§ä¸”æœ‰åºçš„ï¼ˆä¸ä¼šè¢«é‡æ’åºï¼‰ã€‚å¯è§æ€§&amp;&amp;æœ‰åºæ€§ç”±Javaå†…å­˜æ¨¡å‹å®šä¹‰çš„ã€Œå†…å­˜å±éšœã€å®Œæˆï¼Œå®é™…HotSpotè™šæ‹Ÿæœºå®ç°Javaå†…å­˜æ¨¡å‹è§„èŒƒï¼Œæ±‡ç¼–åº•å±‚æ˜¯é€šè¿‡LockæŒ‡ä»¤æ¥å®ç°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Javaå­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Javaå†…å­˜æ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode 105.ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</title>
      <link href="/2021/07/07/leetcode-105.cong-qian-xu-yu-zhong-xu-bian-li-xu-lie-gou-zao-er-cha-shu/"/>
      <url>/2021/07/07/leetcode-105.cong-qian-xu-yu-zhong-xu-bian-li-xu-lie-gou-zao-er-cha-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘"><a href="#ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘" class="headerlink" title="ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘"></a>ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</h1><hr><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>æ ¹æ®ä¸€æ£µæ ‘çš„å‰åºéå†ä¸ä¸­åºéå†æ„é€ äºŒå‰æ ‘ã€‚</p><p><strong>æ³¨æ„:</strong><br>ä½ å¯ä»¥å‡è®¾æ ‘ä¸­æ²¡æœ‰é‡å¤çš„å…ƒç´ ã€‚</p><p>ä¾‹å¦‚ï¼Œç»™å‡º</p><pre class="line-numbers language-none"><code class="language-none">å‰åºéå† preorder = [3,9,20,15,7]ä¸­åºéå† inorder = [9,3,15,20,7]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿”å›å¦‚ä¸‹çš„äºŒå‰æ ‘ï¼š</p><pre class="line-numbers language-none"><code class="language-none">  3 / \9  20  /  \ 15   7<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æˆ‘è§‰å¾—è¿™é¢˜æŒºéš¾çš„ã€‚ã€‚ã€‚</p></blockquote><hr><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * Definition for a binary tree node. * public class TreeNode { *     int val; *     TreeNode left; *     TreeNode right; *     TreeNode() {} *     TreeNode(int val) { this.val = val; } *     TreeNode(int val, TreeNode left, TreeNode right) { *         this.val = val; *         this.left = left; *         this.right = right; *     } * } */</span><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> mp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">TreeNode</span> <span class="token function">buildTree</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> preorder<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> inorder<span class="token punctuation">,</span> <span class="token keyword">int</span> preorder_left<span class="token punctuation">,</span> <span class="token keyword">int</span> preorder_right<span class="token punctuation">,</span> <span class="token keyword">int</span> inorder_left<span class="token punctuation">,</span> <span class="token keyword">int</span> inorder_right<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>preorder_left <span class="token operator">&gt;</span> preorder_right<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">TreeNode</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>preorder<span class="token punctuation">[</span>preorder_left<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> inorder_index <span class="token operator">=</span> mp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>preorder<span class="token punctuation">[</span>preorder_left<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> leftSize <span class="token operator">=</span> inorder_index <span class="token operator">-</span> inorder_left<span class="token punctuation">;</span>        root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>preorder<span class="token punctuation">,</span> inorder<span class="token punctuation">,</span> preorder_left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> preorder_left <span class="token operator">+</span> leftSize<span class="token punctuation">,</span> inorder_left<span class="token punctuation">,</span> inorder_index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>preorder<span class="token punctuation">,</span> inorder<span class="token punctuation">,</span> preorder_left <span class="token operator">+</span> leftSize <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> preorder_right<span class="token punctuation">,</span> inorder_index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> inorder_right<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> root<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">TreeNode</span> <span class="token function">buildTree</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> preorder<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> inorder<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> preorder<span class="token punctuation">.</span>length<span class="token punctuation">;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> inorder<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            mp<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>inorder<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>preorder<span class="token punctuation">,</span> inorder<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> LeetCodeè®­ç»ƒå½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> leetcode </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Quartzå­¦ä¹ ç¬”è®°</title>
      <link href="/2021/07/05/quartz-xue-xi/"/>
      <url>/2021/07/05/quartz-xue-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="Quartzå­¦ä¹ ç¬”è®°"><a href="#Quartzå­¦ä¹ ç¬”è®°" class="headerlink" title="Quartzå­¦ä¹ ç¬”è®°"></a>Quartzå­¦ä¹ ç¬”è®°</h1><hr><h2 id="Quartzç®€ä»‹"><a href="#Quartzç®€ä»‹" class="headerlink" title="Quartzç®€ä»‹"></a>Quartzç®€ä»‹</h2><h3 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h3><p>Quartzæ˜¯OpenSymphonyæä¾›çš„å¼€æºä»»åŠ¡è°ƒåº¦æ¡†æ¶</p><p>å®˜ç½‘ï¼š<a href="http://www.quartz-scheduler.org/">http://www.quartz-scheduler.org/</a></p><p>çº¯Javaå®ç°ï¼Œç²¾ç»†æ§åˆ¶æ’ç¨‹ã€‚</p><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul><li>å¼ºå¤§çš„è°ƒåº¦åŠŸèƒ½</li><li>çµæ´»çš„åº”ç”¨æ–¹å¼</li><li>åˆ†å¸ƒå¼å’Œé›†ç¾¤èƒ½åŠ›</li></ul><h3 id="Quartzçš„è®¾è®¡æ¨¡å¼"><a href="#Quartzçš„è®¾è®¡æ¨¡å¼" class="headerlink" title="Quartzçš„è®¾è®¡æ¨¡å¼"></a>Quartzçš„è®¾è®¡æ¨¡å¼</h3><ul><li>Builderæ¨¡å¼</li><li>Factoryæ¨¡å¼</li><li>ç»„ä»¶æ¨¡å¼</li><li>é“¾å¼å†™æ³•</li></ul><hr><h2 id="Quartzä½“ç³»ç»“æ„"><a href="#Quartzä½“ç³»ç»“æ„" class="headerlink" title="Quartzä½“ç³»ç»“æ„"></a>Quartzä½“ç³»ç»“æ„</h2><h3 id="ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ"><a href="#ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ"></a>ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ</h3><ul><li>è°ƒåº¦å™¨</li><li>ä»»åŠ¡</li><li>è§¦å‘å™¨</li></ul><p>JobDetail : åŒ…å«äº†ä»»åŠ¡çš„å®ç°ç±»ä»¥åŠç±»çš„ä¿¡æ¯</p><p>trigger : å†³å®šä»»åŠ¡ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨</p><ul><li>SimpleTrigger</li><li>CronTrigger : å®ç°æ›´å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ›´å¸¸ç”¨</li></ul><p>scheduler : å¯ä»¥å®šæ—¶å®šé¢‘ç‡è·å¾—JobDetailçš„ä¿¡æ¯ï¼ŒæŠŠJobDetailå’Œtriggerç»‘å®šåˆ°äº†ä¸€èµ·</p><h3 id="æ€»è¦ç»„æˆ"><a href="#æ€»è¦ç»„æˆ" class="headerlink" title="æ€»è¦ç»„æˆ"></a>æ€»è¦ç»„æˆ</h3><ul><li>Job</li><li>JobDetail</li><li>JobBuilder</li><li>JobStore</li><li>Trigger</li><li>TriggerBuilder</li><li>ThreadPool</li><li>Scheduler</li><li>Calendar : ä¸€ä¸ªTriggerå¯ä»¥å’Œå¤šä¸ªCalendarå…³è”ï¼Œä»¥æ’é™¤æˆ–åŒ…å«æŸäº›æ—¶é—´ç‚¹</li><li>ç›‘å¬å™¨<ul><li>JobListener</li><li>TriggerListener</li><li>SchedulerListener</li></ul></li></ul><hr><h2 id="æ‰‹å†™ç®€å•çš„Quartz-Demo"><a href="#æ‰‹å†™ç®€å•çš„Quartz-Demo" class="headerlink" title="æ‰‹å†™ç®€å•çš„Quartz Demo"></a>æ‰‹å†™ç®€å•çš„Quartz Demo</h2><blockquote><p>å®Œæˆä¸€ä¸ªæ¯ä¸¤ç§’é’Ÿæ‰“å°ä¸€ä¸ªHello Worldçš„åŠŸèƒ½</p></blockquote><p><strong>Job</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloJob</span> <span class="token keyword">implements</span> <span class="token class-name">Job</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">JobExecutionContext</span> jobExecutionContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JobExecutionException</span> <span class="token punctuation">{</span>        <span class="token comment">// æ‰“å°å½“å‰çš„æ‰§è¡Œæ—¶é—´ï¼Œæ ¼å¼ä¸º2017-01-01 00ï¼š00ï¼š00</span>        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SimpleDateFormat</span> sf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Current Exec Time Is:"</span> <span class="token operator">+</span> sf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç¼–å†™å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Scheduler</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloScheduler</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SchedulerException</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªJobDetailå®ä¾‹ï¼Œå°†è¯¥å®ä¾‹ä¸HelloJob Classç»‘å®š</span>        <span class="token class-name">JobDetail</span> jobDetail <span class="token operator">=</span> <span class="token class-name">JobBuilder</span><span class="token punctuation">.</span><span class="token function">newJob</span><span class="token punctuation">(</span><span class="token class-name">HelloJob</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">"myJob"</span><span class="token punctuation">,</span> <span class="token string">"group1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªTriggerå®ä¾‹ï¼Œå®šä¹‰è¯¥Jobç«‹å³æ‰§è¡Œï¼Œå¹¶ä¸”æ¯éš”ä¸¤ç§’é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œç›´åˆ°æ°¸è¿œ</span>        <span class="token class-name">Trigger</span> trigger <span class="token operator">=</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">"myTrigger"</span><span class="token punctuation">,</span> <span class="token string">"group1"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">startNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span>                        <span class="token class-name">SimpleScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">simpleSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">withIntervalInSeconds</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">repeatForever</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºSchedulerå®ä¾‹</span>        <span class="token class-name">SchedulerFactory</span> sfact <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StdSchedulerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Scheduler</span> scheduler <span class="token operator">=</span> sfact<span class="token punctuation">.</span><span class="token function">getScheduler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        scheduler<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ‰“å°å½“å‰çš„æ—¶é—´ï¼Œæ ¼å¼ä¸º2017-01-01 00ï¼š00ï¼š00</span>        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SimpleDateFormat</span> sf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Current Exec Time Is:"</span> <span class="token operator">+</span> sf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        scheduler<span class="token punctuation">.</span><span class="token function">scheduleJob</span><span class="token punctuation">(</span>jobDetail<span class="token punctuation">,</span> trigger<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="Job-amp-JobDetail"><a href="#Job-amp-JobDetail" class="headerlink" title="Job &amp; JobDetail"></a>Job &amp; JobDetail</h2><h3 id="Jobå®šä¹‰"><a href="#Jobå®šä¹‰" class="headerlink" title="Jobå®šä¹‰"></a>Jobå®šä¹‰</h3><p>å®ç°ä¸šåŠ¡é€»è¾‘çš„ä»»åŠ¡æ¥å£</p><p>Jobæ¥å£éå¸¸å®¹æ˜“å®ç°ï¼Œåªæœ‰ä¸€ä¸ªexecuteæ–¹æ³•ï¼Œç±»ä¼¼TimerTaskçš„runæ–¹æ³•ï¼Œåœ¨é‡Œé¢ç¼–å†™ä¸šåŠ¡é€»è¾‘</p><h3 id="Jobæºç "><a href="#Jobæºç " class="headerlink" title="Jobæºç "></a>Jobæºç </h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>quartz</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Job</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">JobExecutionContext</span> context<span class="token punctuation">)</span>    <span class="token keyword">throws</span> <span class="token class-name">JobExecutionException</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Jobç”Ÿå‘½å‘¨æœŸ"><a href="#Jobç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Jobç”Ÿå‘½å‘¨æœŸ"></a>Jobç”Ÿå‘½å‘¨æœŸ</h3><p>æ¯æ¬¡è°ƒåº¦å™¨æ‰§è¡ŒJobæ—¶ï¼Œå®ƒåœ¨è°ƒç”¨executeæ–¹æ³•å‰ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„jobå®ä¾‹ã€‚</p><p>å½“è°ƒç”¨å®Œæˆåï¼Œå…³è”çš„Jobå¯¹è±¡å®ä¾‹ä¼šè¢«é‡Šæ”¾ï¼Œé‡Šæ”¾çš„å®ä¾‹ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚</p><h3 id="JobDetail"><a href="#JobDetail" class="headerlink" title="JobDetail"></a>JobDetail</h3><p>JobDetailä¸ºJobå®ä¾‹æä¾›äº†è®¸å¤šè®¾ç½®å±æ€§ï¼Œä»¥åŠJobDataMapæˆå‘˜å˜é‡å±æ€§ï¼Œå®ƒç”¨æ¥å­˜å‚¨ç‰¹å®šJobå®ä¾‹çš„çŠ¶æ€ä¿¡æ¯ï¼Œè°ƒåº¦å™¨éœ€è¦å€ŸåŠ©JobDetailå¯¹è±¡æ¥æ·»åŠ Jobå®ä¾‹ã€‚</p><h3 id="JobDetailé‡è¦å±æ€§"><a href="#JobDetailé‡è¦å±æ€§" class="headerlink" title="JobDetailé‡è¦å±æ€§"></a>JobDetailé‡è¦å±æ€§</h3><ul><li>nameï¼ˆä»»åŠ¡çš„åç§°ï¼‰</li><li>groupï¼ˆä»»åŠ¡æ‰€åœ¨çš„ç»„ï¼‰</li><li>jobClassï¼ˆä»»åŠ¡çš„å®ç°ç±»ï¼‰</li><li>jobDataMap</li></ul><hr><h2 id="JobExecutionContext-amp-JobDataMap"><a href="#JobExecutionContext-amp-JobDataMap" class="headerlink" title="JobExecutionContext &amp; JobDataMap"></a>JobExecutionContext &amp; JobDataMap</h2><h3 id="JobExecutionContextæ˜¯ä»€ä¹ˆ"><a href="#JobExecutionContextæ˜¯ä»€ä¹ˆ" class="headerlink" title="JobExecutionContextæ˜¯ä»€ä¹ˆ"></a>JobExecutionContextæ˜¯ä»€ä¹ˆ</h3><ul><li>å½“Schedulerè°ƒç”¨ä¸€ä¸ªJobï¼Œå°±ä¼šå°†JobExecutionContextä¼ é€’ç»™Jobçš„execute()æ–¹æ³•ï¼›</li><li>Jobèƒ½é€šè¿‡JobExecutionContextå¯¹è±¡è®¿é—®åˆ°Quartzè¿è¡Œæ—¶å€™çš„ç¯å¢ƒä»¥åŠJobæœ¬èº«çš„æ˜ç»†æ•°æ®</li></ul><h3 id="JobDataMapæ˜¯ä»€ä¹ˆ"><a href="#JobDataMapæ˜¯ä»€ä¹ˆ" class="headerlink" title="JobDataMapæ˜¯ä»€ä¹ˆ"></a>JobDataMapæ˜¯ä»€ä¹ˆ</h3><ul><li>åœ¨è¿›è¡Œä»»åŠ¡è°ƒåº¦æ—¶JobDataMapå­˜å‚¨åœ¨JobExecutionContextä¸­ï¼Œéå¸¸æ–¹ä¾¿è·å–ã€‚</li><li>JobDataMapå¯ä»¥ç”¨æ¥è£…è½½ä»»ä½•å¯åºåˆ—åŒ–çš„æ•°æ®å¯¹è±¡ï¼Œå½“Jobå®ä¾‹å¯¹è±¡è¢«æ‰§è¡Œæ—¶è¿™äº›å‚æ•°å¯¹è±¡ä¼šä¼ é€’ç»™å®ƒã€‚</li><li>JobDataMapå®ç°äº†JDKçš„Mapæ¥å£ï¼Œå¹¶ä¸”æ·»åŠ äº†ä¸€äº›éå¸¸æ–¹ä¾¿çš„æ–¹æ³•ç”¨æ¥å­˜å–åŸºæœ¬æ•°æ®ç±»å‹ã€‚</li></ul><h3 id="è·å–JobDataMapçš„ä¸¤ç§æ–¹å¼"><a href="#è·å–JobDataMapçš„ä¸¤ç§æ–¹å¼" class="headerlink" title="è·å–JobDataMapçš„ä¸¤ç§æ–¹å¼"></a>è·å–JobDataMapçš„ä¸¤ç§æ–¹å¼</h3><ul><li>ä»Mapä¸­ç›´æ¥è·å–</li></ul><p><strong>Scheduler</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloScheduler</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SchedulerException</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªJobDetailå®ä¾‹ï¼Œå°†è¯¥å®ä¾‹ä¸HelloJob Classç»‘å®š</span>        <span class="token class-name">JobDetail</span> jobDetail <span class="token operator">=</span> <span class="token class-name">JobBuilder</span><span class="token punctuation">.</span><span class="token function">newJob</span><span class="token punctuation">(</span><span class="token class-name">HelloJob</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">"myJob"</span><span class="token punctuation">,</span> <span class="token string">"group1"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">usingJobData</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"hello myJob1"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">usingJobData</span><span class="token punctuation">(</span><span class="token string">"FloatJobValue"</span><span class="token punctuation">,</span> <span class="token number">3.14F</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªTriggerå®ä¾‹ï¼Œå®šä¹‰è¯¥Jobç«‹å³æ‰§è¡Œï¼Œå¹¶ä¸”æ¯éš”ä¸¤ç§’é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œç›´åˆ°æ°¸è¿œ</span>        <span class="token class-name">Trigger</span> trigger <span class="token operator">=</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">"myTrigger"</span><span class="token punctuation">,</span> <span class="token string">"group1"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">usingJobData</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token string">"hello myTrigger1"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">usingJobData</span><span class="token punctuation">(</span><span class="token string">"DoubleTriggerValue"</span><span class="token punctuation">,</span> <span class="token number">2.0D</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">startNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span>                        <span class="token class-name">SimpleScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">simpleSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">withIntervalInSeconds</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">repeatForever</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºSchedulerå®ä¾‹</span>        <span class="token class-name">SchedulerFactory</span> sfact <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StdSchedulerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Scheduler</span> scheduler <span class="token operator">=</span> sfact<span class="token punctuation">.</span><span class="token function">getScheduler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        scheduler<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ‰“å°å½“å‰çš„æ—¶é—´ï¼Œæ ¼å¼ä¸º2017-01-01 00ï¼š00ï¼š00</span>        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SimpleDateFormat</span> sf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Current Exec Time Is:"</span> <span class="token operator">+</span> sf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        scheduler<span class="token punctuation">.</span><span class="token function">scheduleJob</span><span class="token punctuation">(</span>jobDetail<span class="token punctuation">,</span> trigger<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Job</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloJob</span> <span class="token keyword">implements</span> <span class="token class-name">Job</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">JobExecutionContext</span> jobExecutionContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JobExecutionException</span> <span class="token punctuation">{</span>        <span class="token comment">// æ‰“å°å½“å‰çš„æ‰§è¡Œæ—¶é—´ï¼Œæ ¼å¼ä¸º2017-01-01 00ï¼š00ï¼š00</span>        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SimpleDateFormat</span> sf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Current Exec Time Is:"</span> <span class="token operator">+</span> sf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç¼–å†™å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</span>        <span class="token class-name">JobKey</span> key <span class="token operator">=</span> jobExecutionContext<span class="token punctuation">.</span><span class="token function">getJobDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"My Name And Group Are "</span> <span class="token operator">+</span> key<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> key<span class="token punctuation">.</span><span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TriggerKey</span> trKey <span class="token operator">=</span> jobExecutionContext<span class="token punctuation">.</span><span class="token function">getTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"My Trigger And Group Are "</span> <span class="token operator">+</span> trKey<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> trKey<span class="token punctuation">.</span><span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">JobDataMap</span> dataMap <span class="token operator">=</span> jobExecutionContext<span class="token punctuation">.</span><span class="token function">getJobDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getJobDataMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">JobDataMap</span> tdataMap <span class="token operator">=</span> jobExecutionContext<span class="token punctuation">.</span><span class="token function">getTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getJobDataMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> jobMsg <span class="token operator">=</span> dataMap<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Float</span> jobFloatValue <span class="token operator">=</span> dataMap<span class="token punctuation">.</span><span class="token function">getFloat</span><span class="token punctuation">(</span><span class="token string">"FloatJobValue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> triggerMsg <span class="token operator">=</span> tdataMap<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Double</span> triggerDoubleValue <span class="token operator">=</span> tdataMap<span class="token punctuation">.</span><span class="token function">getDoubleValue</span><span class="token punctuation">(</span><span class="token string">"DoubleTriggerValue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"JobMsg is "</span> <span class="token operator">+</span> jobMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"JobFloatValue is "</span> <span class="token operator">+</span> jobFloatValue<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"TriggerMsg is "</span> <span class="token operator">+</span> triggerMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"TriggerDoubleValue is "</span> <span class="token operator">+</span> triggerDoubleValue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¹Ÿå¯ä»¥ç”¨getMergedJobDataMap()è·å–ä¸¤ä¸ª</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloJob</span> <span class="token keyword">implements</span> <span class="token class-name">Job</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">JobExecutionContext</span> jobExecutionContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JobExecutionException</span> <span class="token punctuation">{</span>        <span class="token comment">// æ‰“å°å½“å‰çš„æ‰§è¡Œæ—¶é—´ï¼Œæ ¼å¼ä¸º2017-01-01 00ï¼š00ï¼š00</span>        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SimpleDateFormat</span> sf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Current Exec Time Is:"</span> <span class="token operator">+</span> sf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç¼–å†™å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</span>        <span class="token class-name">JobKey</span> key <span class="token operator">=</span> jobExecutionContext<span class="token punctuation">.</span><span class="token function">getJobDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"My Name And Group Are "</span> <span class="token operator">+</span> key<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> key<span class="token punctuation">.</span><span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TriggerKey</span> trKey <span class="token operator">=</span> jobExecutionContext<span class="token punctuation">.</span><span class="token function">getTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"My Trigger And Group Are "</span> <span class="token operator">+</span> trKey<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> trKey<span class="token punctuation">.</span><span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">JobDataMap</span> dataMap <span class="token operator">=</span> jobExecutionContext<span class="token punctuation">.</span><span class="token function">getMergedJobDataMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> msg <span class="token operator">=</span> dataMap<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Float</span> jobFloatValue <span class="token operator">=</span> dataMap<span class="token punctuation">.</span><span class="token function">getFloat</span><span class="token punctuation">(</span><span class="token string">"FloatJobValue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Double</span> triggerDoubleValue <span class="token operator">=</span> dataMap<span class="token punctuation">.</span><span class="token function">getDoubleValue</span><span class="token punctuation">(</span><span class="token string">"DoubleTriggerValue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Msg is "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"JobFloatValue is "</span> <span class="token operator">+</span> jobFloatValue<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"TriggerDoubleValue is "</span> <span class="token operator">+</span> triggerDoubleValue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>Jobå®ç°ç±»ä¸­æ·»åŠ setteræ–¹æ³•å¯¹åº”JobDataMapçš„é”®å€¼ï¼ˆQuartzæ¡†æ¶é»˜è®¤çš„JobFactoryå®ç°ç±»åœ¨åˆå§‹åŒ–Jobå®ä¾‹å¯¹è±¡æ—¶ä¼šè‡ªåŠ¨çš„è°ƒç”¨è¿™äº›setteræ–¹æ³•ï¼‰</li></ul><p><strong>Job</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloJob</span> <span class="token keyword">implements</span> <span class="token class-name">Job</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> message<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Float</span> <span class="token class-name">FloatJobValue</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Double</span> <span class="token class-name">DoubleTriggerValue</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">JobExecutionContext</span> jobExecutionContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JobExecutionException</span> <span class="token punctuation">{</span>        <span class="token comment">// æ‰“å°å½“å‰çš„æ‰§è¡Œæ—¶é—´ï¼Œæ ¼å¼ä¸º2017-01-01 00ï¼š00ï¼š00</span>        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SimpleDateFormat</span> sf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Current Exec Time Is:"</span> <span class="token operator">+</span> sf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç¼–å†™å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</span>        <span class="token class-name">JobKey</span> key <span class="token operator">=</span> jobExecutionContext<span class="token punctuation">.</span><span class="token function">getJobDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"My Name And Group Are "</span> <span class="token operator">+</span> key<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> key<span class="token punctuation">.</span><span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">TriggerKey</span> trKey <span class="token operator">=</span> jobExecutionContext<span class="token punctuation">.</span><span class="token function">getTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"My Trigger And Group Are "</span> <span class="token operator">+</span> trKey<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> trKey<span class="token punctuation">.</span><span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// JobDataMap dataMap = jobExecutionContext.getMergedJobDataMap();</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Msg is "</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"JobFloatValue is "</span> <span class="token operator">+</span> <span class="token class-name">FloatJobValue</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"TriggerDoubleValue is "</span> <span class="token operator">+</span> <span class="token class-name">DoubleTriggerValue</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="Trigger"><a href="#Trigger" class="headerlink" title="Trigger"></a>Trigger</h2><h3 id="Triggeræ˜¯ä»€ä¹ˆ"><a href="#Triggeræ˜¯ä»€ä¹ˆ" class="headerlink" title="Triggeræ˜¯ä»€ä¹ˆ"></a>Triggeræ˜¯ä»€ä¹ˆ</h3><p>Quartzä¸­çš„è§¦å‘å™¨æ˜¯ç”¨æ¥å‘Šè¯‰è°ƒåº¦ç¨‹åºä½œä¸šä»€ä¹ˆæ—¶å€™è§¦å‘ã€‚</p><p>å³Triggerå¯¹è±¡æ˜¯ç”¨æ¥è§¦å‘Jobçš„ã€‚</p><h3 id="è§¦å‘å™¨çš„é€šç”¨å±æ€§"><a href="#è§¦å‘å™¨çš„é€šç”¨å±æ€§" class="headerlink" title="è§¦å‘å™¨çš„é€šç”¨å±æ€§"></a>è§¦å‘å™¨çš„é€šç”¨å±æ€§</h3><ul><li>JobKey : è¡¨ç¤ºjobå®ä¾‹çš„æ ‡è¯†ï¼Œè§¦å‘å™¨è¢«è§¦å‘æ—¶ï¼Œè¯¥æŒ‡å®šçš„jobå®ä¾‹ä¼šæ‰§è¡Œ</li><li>StartTime : è¡¨ç¤ºè§¦å‘å™¨çš„æ—¶é—´è¡¨<strong>é¦–æ¬¡è¢«è§¦å‘çš„æ—¶é—´</strong>ã€‚å®ƒçš„å€¼çš„ç±»å‹æ˜¯Java.util.Date</li><li>EndTime : æŒ‡å®šè§¦å‘å™¨çš„<strong>ä¸å†è¢«è§¦å‘</strong>çš„æ—¶é—´ã€‚å®ƒçš„å€¼çš„ç±»å‹æ˜¯Java.util.Date</li></ul><hr><h2 id="SimpleTrigger"><a href="#SimpleTrigger" class="headerlink" title="SimpleTrigger"></a>SimpleTrigger</h2><h3 id="SimpleTriggerçš„ä½œç”¨"><a href="#SimpleTriggerçš„ä½œç”¨" class="headerlink" title="SimpleTriggerçš„ä½œç”¨"></a>SimpleTriggerçš„ä½œç”¨</h3><p>åœ¨ä¸€ä¸ª<strong>æŒ‡å®šæ—¶é—´æ®µ</strong>å†…<strong>æ‰§è¡Œä¸€æ¬¡</strong>ä½œä¸šä»»åŠ¡</p><p>æˆ–æ˜¯åœ¨<strong>æŒ‡å®šçš„æ—¶é—´é—´éš”</strong>å†…<strong>å¤šæ¬¡æ‰§è¡Œ</strong>ä½œä¸šä»»åŠ¡</p><h3 id="éœ€è¦æ³¨æ„çš„ç‚¹"><a href="#éœ€è¦æ³¨æ„çš„ç‚¹" class="headerlink" title="éœ€è¦æ³¨æ„çš„ç‚¹"></a>éœ€è¦æ³¨æ„çš„ç‚¹</h3><ul><li>é‡å¤æ¬¡æ•°å¯ä»¥ä¸º<strong>0ï¼Œæ­£æ•´æ•°</strong>æˆ–æ˜¯<strong>SimpleTrigger.REPEAT_INDEFINITELY</strong>å¸¸é‡å€¼</li><li>é‡å¤æ‰§è¡Œé—´éš”å¿…é¡»ä¸º<strong>0æˆ–é•¿æ•´æ•°</strong></li><li>ä¸€æ—¦è¢«æŒ‡å®šäº†endTimeå‚æ•°ï¼Œé‚£ä¹ˆå®ƒä¼š<strong>è¦†ç›–é‡å¤æ¬¡æ•°å‚æ•°</strong>çš„æ•ˆæœ</li></ul><hr><h2 id="CronTrigger"><a href="#CronTrigger" class="headerlink" title="CronTrigger"></a>CronTrigger</h2><h3 id="CronTriggerçš„ä½œç”¨"><a href="#CronTriggerçš„ä½œç”¨" class="headerlink" title="CronTriggerçš„ä½œç”¨"></a>CronTriggerçš„ä½œç”¨</h3><p><strong>åŸºäºæ—¥å†</strong>çš„<strong>ä½œä¸šè°ƒåº¦å™¨</strong>ï¼Œè€Œä¸æ˜¯åƒSimpleTriggeré‚£æ ·ç²¾ç¡®æŒ‡å®šé—´éš”æ—¶é—´ï¼Œæ¯”SimpleTriggeræ›´å¸¸ç”¨ã€‚</p><h3 id="Cronè¡¨è¾¾å¼"><a href="#Cronè¡¨è¾¾å¼" class="headerlink" title="Cronè¡¨è¾¾å¼"></a>Cronè¡¨è¾¾å¼</h3><p>ç”¨äº<strong>é…ç½®CronTrigger</strong>å®ä¾‹ã€‚</p><p>æ˜¯ç”±7ä¸ªå­è¡¨è¾¾å¼ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œæè¿°äº†æ—¶é—´è¡¨çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><p>æ ¼å¼ï¼š[ç§’] [åˆ†] [å°æ—¶] [æ—¥] [æœˆ] [å‘¨] [å¹´]</p><h3 id="Cronè¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦æ„ä¹‰å¯¹åº”è¡¨"><a href="#Cronè¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦æ„ä¹‰å¯¹åº”è¡¨" class="headerlink" title="Cronè¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦æ„ä¹‰å¯¹åº”è¡¨"></a>Cronè¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦æ„ä¹‰å¯¹åº”è¡¨</h3><table><thead><tr><th>å­—æ®µ</th><th>æ˜¯å¦å¿…å¡«</th><th>å…è®¸å€¼</th><th>å…è®¸çš„ç‰¹æ®Šå­—ç¬¦</th></tr></thead><tbody><tr><td>ç§’</td><td>æ˜¯</td><td>0~59</td><td>, - * /</td></tr><tr><td>åˆ†</td><td>æ˜¯</td><td>0~59</td><td>, - * /</td></tr><tr><td>å°æ—¶</td><td>æ˜¯</td><td>0~23</td><td>, - * /</td></tr><tr><td>æ—¥</td><td>æ˜¯</td><td>1~31</td><td>, - * ? / L W C</td></tr><tr><td>æœˆ</td><td>æ˜¯</td><td>1~12æˆ–è€…JAN_DEC</td><td>, - * /</td></tr><tr><td>å‘¨</td><td>æ˜¯</td><td>1~7æˆ–è€…SUN_SAT</td><td>, - * ? / L C #</td></tr><tr><td>å¹´</td><td>å¦</td><td>emptyï¼Œ1970~2099</td><td>, - * /</td></tr></tbody></table><h3 id="Cronè¡¨è¾¾å¼ä¸¾ä¾‹"><a href="#Cronè¡¨è¾¾å¼ä¸¾ä¾‹" class="headerlink" title="Cronè¡¨è¾¾å¼ä¸¾ä¾‹"></a>Cronè¡¨è¾¾å¼ä¸¾ä¾‹</h3><table><thead><tr><th>è¡¨è¾¾å¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>0 15 10 ? * *</td><td>æ¯å¤©10ç‚¹15åˆ†è§¦å‘</td></tr><tr><td>0 0/5 14 * * ?</td><td>æ¯å¤©ä¸‹åˆçš„2ç‚¹åˆ°2ç‚¹59åˆ†ï¼ˆæ•´ç‚¹å¼€å§‹ï¼Œæ¯éš”5åˆ†è§¦å‘ï¼‰</td></tr><tr><td>0 15 10 ? * MON_FRI</td><td>ä»å‘¨ä¸€åˆ°å‘¨äº”æ¯å¤©ä¸Šåˆçš„10ç‚¹15åˆ†è§¦å‘</td></tr><tr><td>0 15 10 ? * 6#3</td><td>æ¯æœˆçš„ç¬¬ä¸‰å‘¨çš„æ˜ŸæœŸäº”å¼€å§‹è§¦å‘</td></tr><tr><td>0 15 10 ? * 6L 2016-2017</td><td>ä»2016å¹´åˆ°2017å¹´æ¯æœˆæœ€åä¸€å‘¨çš„æ˜ŸæœŸäº”10ç‚¹15åˆ†è§¦å‘</td></tr></tbody></table><h3 id="Cronè¡¨è¾¾å¼å°æç¤º"><a href="#Cronè¡¨è¾¾å¼å°æç¤º" class="headerlink" title="Cronè¡¨è¾¾å¼å°æç¤º"></a>Cronè¡¨è¾¾å¼å°æç¤º</h3><ul><li>Lå’ŒWå¯ä»¥ç»„åˆä½¿ç”¨</li><li>å‘¨å­—æ®µè‹±æ–‡å­—æ¯ä¸åŒºåˆ†å¤§å°å†™å³MONä¸monç›¸åŒ</li><li>åˆ©ç”¨å·¥å…·ï¼Œåœ¨çº¿ç”Ÿæˆ</li></ul>]]></content>
      
      
      <categories>
          
          <category> å·¥ä½œå­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Quartz </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode 72.ç¼–è¾‘è·ç¦»</title>
      <link href="/2021/06/25/leetcode-72.bian-ji-ju-chi/"/>
      <url>/2021/06/25/leetcode-72.bian-ji-ju-chi/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¼–è¾‘è·ç¦»"><a href="#ç¼–è¾‘è·ç¦»" class="headerlink" title="ç¼–è¾‘è·ç¦»"></a>ç¼–è¾‘è·ç¦»</h1><hr><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ç»™ä½ ä¸¤ä¸ªå•è¯ word1 å’Œ word2ï¼Œè¯·ä½ è®¡ç®—å‡ºå°† word1 è½¬æ¢æˆ word2 æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•° ã€‚</p><p>ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š</p><ul><li>æ’å…¥ä¸€ä¸ªå­—ç¬¦</li><li>åˆ é™¤ä¸€ä¸ªå­—ç¬¦</li><li>æ›¿æ¢ä¸€ä¸ªå­—ç¬¦</li></ul><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šword1 <span class="token operator">=</span> <span class="token string">"horse"</span>, word2 <span class="token operator">=</span> <span class="token string">"ros"</span>è¾“å‡ºï¼š3è§£é‡Šï¼šhorse -<span class="token operator">&gt;</span> rorse <span class="token punctuation">(</span>å°† <span class="token string">'h'</span> æ›¿æ¢ä¸º <span class="token string">'r'</span><span class="token punctuation">)</span>rorse -<span class="token operator">&gt;</span> rose <span class="token punctuation">(</span>åˆ é™¤ <span class="token string">'r'</span><span class="token punctuation">)</span>rose -<span class="token operator">&gt;</span> ros <span class="token punctuation">(</span>åˆ é™¤ <span class="token string">'e'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šword1 <span class="token operator">=</span> <span class="token string">"intention"</span>, word2 <span class="token operator">=</span> <span class="token string">"execution"</span>è¾“å‡ºï¼š5è§£é‡Šï¼šintention -<span class="token operator">&gt;</span> inention <span class="token punctuation">(</span>åˆ é™¤ <span class="token string">'t'</span><span class="token punctuation">)</span>inention -<span class="token operator">&gt;</span> enention <span class="token punctuation">(</span>å°† <span class="token string">'i'</span> æ›¿æ¢ä¸º <span class="token string">'e'</span><span class="token punctuation">)</span>enention -<span class="token operator">&gt;</span> exention <span class="token punctuation">(</span>å°† <span class="token string">'n'</span> æ›¿æ¢ä¸º <span class="token string">'x'</span><span class="token punctuation">)</span>exention -<span class="token operator">&gt;</span> exection <span class="token punctuation">(</span>å°† <span class="token string">'n'</span> æ›¿æ¢ä¸º <span class="token string">'c'</span><span class="token punctuation">)</span>exection -<span class="token operator">&gt;</span> execution <span class="token punctuation">(</span>æ’å…¥ <span class="token string">'u'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æç¤ºï¼š</strong></p><ul><li><code>0 &lt;= word1.length, word2.length &lt;= 500</code></li><li><code>word1</code> å’Œ <code>word2</code> ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</li></ul><blockquote><p>æˆ‘åŠ¨æ€è§„åˆ’è¿˜æ˜¯å¤ªèœäº†ï¼Œæƒ³ä¸å‡ºæ¥çœ‹é¢˜è§£æ‰çŸ¥é“å’‹åšï¼Œçœ‹æ¥å¾—åˆ†å‡ºä¸€ä¸ªæœˆæ—¶é—´ä¸“é—¨ç»ƒä¹ åŠ¨æ€è§„åˆ’äº†ã€‚ã€‚ã€‚</p></blockquote><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">minDistance</span><span class="token punctuation">(</span><span class="token class-name">String</span> word1<span class="token punctuation">,</span> <span class="token class-name">String</span> word2<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> word1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m <span class="token operator">=</span> word2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>word1<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> word2<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> LeetCodeè®­ç»ƒå½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> leetcode </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaåŸºç¡€å­¦ä¹ -Javaæ³¨è§£</title>
      <link href="/2021/06/24/java-ji-chu-xue-xi-java-zhu-jie/"/>
      <url>/2021/06/24/java-ji-chu-xue-xi-java-zhu-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaåŸºç¡€å­¦ä¹ -Javaæ³¨è§£"><a href="#JavaåŸºç¡€å­¦ä¹ -Javaæ³¨è§£" class="headerlink" title="JavaåŸºç¡€å­¦ä¹ -Javaæ³¨è§£"></a>JavaåŸºç¡€å­¦ä¹ -Javaæ³¨è§£</h1><hr><h2 id="ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ</h2><p>æ³¨è§£å¯ä»¥ç†è§£ä¸ºä»£ç ä¸­çš„ç‰¹æ®Šæ ‡è®°ï¼Œè¿™äº›æ ‡è®°å¯ä»¥åœ¨ç¼–è¯‘ã€ç±»åŠ è½½ã€è¿è¡Œæ—¶è¢«è¯»å–ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„å¤„ç†ã€‚</p><p>æ³¨è§£åœ¨å¼€å‘ä¸­éå¸¸å¸¸è§ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨å„ç§æ¡†æ¶æ—¶ï¼Œå°±ä¼šç”¨åˆ°éå¸¸å¤šçš„æ³¨è§£ã€‚å¦‚ @Controller / @Param / @Select ç­‰ç­‰ã€‚</p><p>ä¸€äº›é¡¹ç›®ä¹Ÿç”¨åˆ°lombokçš„æ³¨è§£ç®€åŒ–å¼€å‘ï¼Œå¦‚ @Slf4j / @Data ç­‰ç­‰ã€‚</p><p>é™¤äº†æ¡†æ¶å®ç°çš„æ³¨è§£ï¼ŒJavaåŸç”Ÿä¹Ÿæœ‰ @Overrideã€@Deprecatedã€@FunctionalInterface ç­‰åŸºæœ¬æ³¨è§£ã€‚</p><p>åŸç”ŸJavaé™¤äº†è¿™äº›æä¾›åŸºæœ¬æ³¨è§£ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§å«åšå…ƒAnnotationï¼ˆå…ƒæ³¨è§£ï¼‰ï¼Œæ‰€è°“çš„å…ƒAnnotationæ˜¯ç”¨æ¥ä¿®é¥°æ³¨è§£çš„ã€‚</p><p>å¸¸ç”¨çš„å…ƒæ³¨è§£æœ‰ @Retention å’Œ @Target ã€‚@Rententionæ³¨è§£å¯ä»¥ç®€å•ç†è§£ä¸ºè®¾ç½®æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œ @Target è¡¨ç¤ºè¿™ä¸ªæ³¨è§£å¯ä»¥ä¿®é¥°å“ªäº›åœ°æ–¹ï¼ˆæ¯”å¦‚æ–¹æ³•ã€è¿˜æ˜¯æˆå‘˜å˜é‡ã€è¿˜æ˜¯åŒ…ç­‰ç­‰ï¼‰ã€‚</p><hr><h2 id="æ³¨è§£çš„åº”ç”¨ç¤ºä¾‹"><a href="#æ³¨è§£çš„åº”ç”¨ç¤ºä¾‹" class="headerlink" title="æ³¨è§£çš„åº”ç”¨ç¤ºä¾‹"></a>æ³¨è§£çš„åº”ç”¨ç¤ºä¾‹</h2><p>å‡è®¾æœ‰ä¸ªç›‘æ§å‘Šè­¦ç³»ç»Ÿï¼Œå¯¹å¤–æä¾›äº†å®¢æˆ·ç«¯ä¾›è‡ªå·±ä½¿ç”¨ã€‚ç›‘æ§çš„ä¸€èˆ¬æŒ‡æ ‡å°±æ˜¯ QPSã€RTå’Œé”™è¯¯ã€‚</p><p>åŸç”Ÿçš„å®¢æˆ·ç«¯éœ€è¦åœ¨ä»£ç é‡ŒæŒ‡å®šä¸ŠæŠ¥ï¼Œè¿™ä¼šå¯¼è‡´è¿™ç§ç›‘æ§çš„ä»£ç ä¼šè·Ÿä¸šåŠ¡ä»£ç æ··åˆã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">String</span> userName<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token comment">// qps ä¸ŠæŠ¥</span>    <span class="token function">qps</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ„å»ºä¸Šä¸‹æ–‡(æ¨¡æ‹Ÿä¸šåŠ¡ä»£ç ï¼‰</span>    <span class="token class-name">ProcessContext</span> processContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProcessContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">UserModel</span> userModel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    userModel<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token string">"22"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    userModel<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//...</span>    <span class="token comment">// rt ä¸ŠæŠ¥</span>    <span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">rt</span><span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// å‡ºé”™ä¸ŠæŠ¥</span>    <span class="token function">error</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ç§åŸºç¡€çš„ç›‘æ§ä¿¡æ¯ï¼Œéƒ½å¯ä»¥é€šè¿‡AOPåˆ‡é¢çš„æ–¹å¼å»å¤„ç†æ‰ï¼Œè€Œå†ç”¨æ³¨è§£è¿™ä¸ªè½½ä½“é…ç½®ç›¸å…³çš„ä¿¡æ¯ï¼Œé…åˆAOPè§£æå°±ä¼šæ¯”è¾ƒä¼˜é›…ã€‚</p><p>è¦å†™è‡ªå®šä¹‰çš„æ³¨è§£ï¼Œé¦–å…ˆè€ƒè™‘æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è§£æè¿™ä¸ªæ³¨è§£ã€‚è¿™å°±éœ€è¦ç”¨åˆ°å‰é¢æ‰€è¯´çš„@Retentionæ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£ä¼šä¿®é¥°æˆ‘ä»¬è‡ªå®šä¹‰æ³¨è§£ç”Ÿå‘½å‘¨æœŸã€‚</p><p>@Retentionæ³¨è§£ä¼ å…¥çš„æ˜¯RetentionPolicyæšä¸¾ï¼Œè¯¥æšä¸¾æœ‰ä¸‰ä¸ªå¸¸é‡ï¼Œåˆ†åˆ«æ˜¯SOURCEã€CLASSå’ŒRUNTIMEã€‚</p><p>ç†è§£è¿™å—å¾—äº†è§£.javaæ–‡ä»¶åˆ°classæ–‡ä»¶å†åˆ°classè¢«jvmåŠ è½½çš„è¿‡ç¨‹äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.6wonplyhc9g0.png" alt="image"></p><p>ä»ä¸Šå›¾å¯ä»¥å‘ç°æœ‰ä¸ª<strong>æ³¨è§£æŠ½è±¡è¯­æ³•æ ‘</strong>ï¼Œè¿™é‡Œå…¶å®å°±å›å»è§£ææ³¨è§£ï¼Œç„¶ååšå¤„ç†çš„é€»è¾‘ã€‚</p><p>å¦‚æœä½ æƒ³åœ¨ç¼–è¯‘æœŸé—´å¤„ç†æ³¨è§£ç›¸å…³çš„é€»è¾‘ï¼Œä½ éœ€è¦ç»§æ‰¿AbsractProcessorå¹¶å®ç°processæ–¹æ³•ã€‚æ¯”å¦‚å¯ä»¥çœ‹åˆ°lombokå°±ç”¨AnnotationProcessorç»§æ‰¿äº†AbstractProcessorã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œåªè¦è‡ªå®šä¹‰çš„æ³¨è§£ä¸­@Retentionæ³¨è§£è®¾ç½®ä¸ºSOURCEå’ŒCLASSè¿™ä¸¤ä¸ªçº§åˆ«ï¼Œé‚£ä¹ˆå°±éœ€è¦ç»§æ‰¿å¹¶å®ç°ã€‚</p><p>å› ä¸ºSOURCEå’ŒCLASSè¿™ä¸¤ä¸ªçº§åˆ«ç­‰åŠ è½½åˆ°JVMçš„æ—¶å€™ï¼Œæ³¨è§£å°±è¢«æŠ¹é™¤äº†ã€‚</p><p>lombokçš„å®ç°åŸç†å°±æ˜¯åœ¨è¿™ï¼ˆä¸ºä»€ä¹ˆä½¿ç”¨äº†ä¸ª@Dataè¿™æ ·çš„æ³¨è§£å°±èƒ½æœ‰set/getç­‰æ–¹æ³•äº†ï¼Œå°±æ˜¯åœ¨è¿™é‡ŒåŠ ä¸Šå»çš„ï¼‰</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„æ³¨è§£éƒ½æ˜¯RUNTIMEçº§åˆ«çš„ï¼Œå› ä¸ºå¤§å¤šæ•°æƒ…å†µæˆ‘ä»¬æ˜¯æ ¹æ®è¿è¡Œæ—¶çš„ç¯å¢ƒå»åšä¸€äº›å¤„ç†ã€‚æˆ‘ä»¬ç°å®åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å†™è‡ªå®šä¹‰æ³¨è§£éœ€è¦é…åˆåå°„æ¥ä½¿ç”¨ã€‚å› ä¸ºåå°„æ˜¯Javaè·å–è¿è¡Œæ—¶çš„ä¿¡æ¯çš„é‡è¦æ‰‹æ®µã€‚</p><p>æ‰€ä»¥ï¼Œå°±ä¸Šé¢çš„é—®é¢˜æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ï¼Œåœ¨Spring AOPçš„é€»è¾‘å¤„ç†ä¸­ï¼Œåˆ¤æ–­æ˜¯å¦å¸¦æœ‰è‡ªå®šä¹‰æ³¨è§£ï¼Œå¦‚æœæœ‰åˆ™å°†ç›‘æ§çš„é€»è¾‘å†™åœ¨æ–¹æ³•çš„å‰åã€‚</p><p>è¿™æ ·ï¼Œåªè¦åœ¨æ–¹æ³•ä¸ŠåŠ ä¸Šè¿™ä¸ªæ³¨è§£ï¼Œé‚£å°±å¯ä»¥æœ‰å¯¹æ–¹æ³•ç›‘æ§çš„æ•ˆæœäº†ã€‚ï¼ˆRTã€QPSã€ERRORï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"@annotation(com.sanwai.service.openapi.monitor.Monitor)"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">antispan</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>    <span class="token class-name">String</span> functionName <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> tags <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>functionName<span class="token punctuation">)</span><span class="token punctuation">;</span>    tags<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"functionName"</span><span class="token punctuation">,</span> functionName<span class="token punctuation">)</span><span class="token punctuation">;</span>    tags<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"flag"</span><span class="token punctuation">,</span> <span class="token string">"done"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    monitor<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span>functionName<span class="token punctuation">,</span> <span class="token string">"start"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æ–¹æ³•æ‰§è¡Œå¼€å§‹æ—¶é—´</span>    <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Object</span> o <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        o <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//æ–¹æ³•æ‰§è¡Œç»“æŸæ—¶é—´</span>        <span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tags<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"flag"</span><span class="token punctuation">,</span> <span class="token string">"fail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        monitor<span class="token punctuation">.</span><span class="token function">avg</span><span class="token punctuation">(</span><span class="token string">"rt"</span><span class="token punctuation">,</span> tags<span class="token punctuation">,</span> endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>        monitor<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span>functionName<span class="token punctuation">,</span> <span class="token string">"fail"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">throw</span> e<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//æ–¹æ³•æ‰§è¡Œç»“æŸæ—¶é—´</span>    <span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    monitor<span class="token punctuation">.</span><span class="token function">avg</span><span class="token punctuation">(</span><span class="token string">"rt"</span><span class="token punctuation">,</span> tags<span class="token punctuation">,</span> endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>        monitor<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span>functionName<span class="token punctuation">,</span> <span class="token string">"done"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> o<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ³¨è§£æ˜¯ä»£ç çš„ç‰¹æ®Šæ ‡è®°ï¼Œå¯ä»¥åœ¨ç¼–è¯‘ã€ç±»åŠ è½½ã€è¿è¡Œæ—¶è¢«è¯»å–ã€‚</p><p>å…¶å®å¯¹åº”çš„å°±æ˜¯RetentionPolicyæšä¸¾ä¸‰ç§çº§åˆ«ã€‚</p><p>SOURCEå’ŒCLASSçº§åˆ«éœ€è¦ç»§æ‰¿AbstractProcessï¼Œå®ç°processæ–¹æ³•å»å¤„ç†æˆ‘ä»¬è‡ªå®šä¹‰çš„æ³¨è§£ã€‚</p><p>è€ŒRUNTIMEçº§åˆ«æ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ç”¨çš„æœ€å¤šçš„äº†ï¼Œé…åˆJavaåå°„æœºåˆ¶å¯ä»¥åœ¨å¾ˆå¤šåœºæ™¯ä¼˜åŒ–æˆ‘ä»¬çš„ä»£ç ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Javaå­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode 76.æœ€å°è¦†ç›–å­ä¸²</title>
      <link href="/2021/06/22/leetcode-76.zui-xiao-fu-gai-zi-chuan/"/>
      <url>/2021/06/22/leetcode-76.zui-xiao-fu-gai-zi-chuan/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ€å°è¦†ç›–å­ä¸²"><a href="#æœ€å°è¦†ç›–å­ä¸²" class="headerlink" title="æœ€å°è¦†ç›–å­ä¸²"></a>æœ€å°è¦†ç›–å­ä¸²</h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><hr><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ã€ä¸€ä¸ªå­—ç¬¦ä¸² t ã€‚è¿”å› s ä¸­æ¶µç›– t æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ã€‚å¦‚æœ s ä¸­ä¸å­˜åœ¨æ¶µç›– t æ‰€æœ‰å­—ç¬¦çš„å­ä¸²ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² â€œâ€ ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>å¦‚æœ s ä¸­å­˜åœ¨è¿™æ ·çš„å­ä¸²ï¼Œæˆ‘ä»¬ä¿è¯å®ƒæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šs <span class="token operator">=</span> <span class="token string">"ADOBECODEBANC"</span>, t <span class="token operator">=</span> <span class="token string">"ABC"</span>è¾“å‡ºï¼š<span class="token string">"BANC"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šs <span class="token operator">=</span> <span class="token string">"a"</span>, t <span class="token operator">=</span> <span class="token string">"a"</span>è¾“å‡ºï¼š<span class="token string">"a"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= s.length, t.length &lt;= 105</code></li><li><code>s å’Œ t ç”±è‹±æ–‡å­—æ¯ç»„æˆ</code></li></ul><blockquote><p>ç”¨æ»‘åŠ¨çª—å£è§£å†³ã€‚</p></blockquote><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><hr><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">minWindow</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token class-name">String</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ttr <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> snum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tnum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ttr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            tnum<span class="token punctuation">[</span>ttr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> begin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> mi <span class="token operator">=</span> str<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>right <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>tnum<span class="token punctuation">[</span>str<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                right<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>snum<span class="token punctuation">[</span>str<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> tnum<span class="token punctuation">[</span>str<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                ans<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            snum<span class="token punctuation">[</span>str<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>            right<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>ans <span class="token operator">==</span> ttr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left <span class="token operator">&lt;</span> mi<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    mi <span class="token operator">=</span> right <span class="token operator">-</span> left<span class="token punctuation">;</span>                    begin <span class="token operator">=</span> left<span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>tnum<span class="token punctuation">[</span>str<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    left<span class="token operator">++</span><span class="token punctuation">;</span>                    <span class="token keyword">continue</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>snum<span class="token punctuation">[</span>str<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> tnum<span class="token punctuation">[</span>str<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    ans<span class="token operator">--</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                snum<span class="token punctuation">[</span>str<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>                left<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>mi <span class="token operator">==</span> str<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>begin<span class="token punctuation">,</span> begin <span class="token operator">+</span> mi<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> LeetCodeè®­ç»ƒå½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> leetcode </tag>
            
            <tag> æ»‘åŠ¨çª—å£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå­¦ä¹ -æ•°æ®åº“è°ƒä¼˜</title>
      <link href="/2021/06/21/mysql-xue-xi-shu-ju-ku-diao-you/"/>
      <url>/2021/06/21/mysql-xue-xi-shu-ju-ku-diao-you/</url>
      
        <content type="html"><![CDATA[<h1 id="MySQLå­¦ä¹ ç¬”è®°-æ•°æ®åº“è°ƒä¼˜"><a href="#MySQLå­¦ä¹ ç¬”è®°-æ•°æ®åº“è°ƒä¼˜" class="headerlink" title="MySQLå­¦ä¹ ç¬”è®°-æ•°æ®åº“è°ƒä¼˜"></a>MySQLå­¦ä¹ ç¬”è®°-æ•°æ®åº“è°ƒä¼˜</h1><hr><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œå¯¹MySQLçš„è°ƒä¼˜é‡ç‚¹ä¸€èˆ¬æ˜¯åœ¨â€œå¼€å‘è§„èŒƒâ€ã€â€œæ•°æ®åº“ç´¢å¼•â€åˆæˆ–è€…è§£å†³çº¿ä¸Šæ…¢æŸ¥è¯¢ä¸Šã€‚è€Œå¯¹äºMySQLå†…éƒ¨çš„å‚æ•°è°ƒä¼˜ï¼Œç”±ä¸“ä¸šçš„DBAæ¥æã€‚</p><hr><h2 id="å¹³æ—¶çš„å¼€å‘è§„èŒƒå’Œç´¢å¼•çš„ä¼˜åŒ–"><a href="#å¹³æ—¶çš„å¼€å‘è§„èŒƒå’Œç´¢å¼•çš„ä¼˜åŒ–" class="headerlink" title="å¹³æ—¶çš„å¼€å‘è§„èŒƒå’Œç´¢å¼•çš„ä¼˜åŒ–"></a>å¹³æ—¶çš„å¼€å‘è§„èŒƒå’Œç´¢å¼•çš„ä¼˜åŒ–</h2><p>é¦–å…ˆåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹åˆ›å»ºæ•°æ®è¡¨ï¼Œéƒ½æ˜¯åœ¨å·¥å•ç³»ç»Ÿä¸‹å®Œæˆçš„ï¼ˆéœ€è¦DBAå®¡æ‰¹ï¼‰ã€‚</p><p>å¦‚æœåœ¨åˆ›å»ºè¡¨æ—¶æ£€æµ‹åˆ°æ²¡æœ‰åˆ›å»ºç´¢å¼•ï¼Œå°±ä¼šæç¤ºwarningã€‚</p><p><strong>ç†è®ºä¸Šæ¥è¯´ï¼Œå¦‚æœè¡¨æœ‰ä¸€å®šçš„æ•°æ®é‡ï¼Œé‚£å°±åº”è¯¥è¦åˆ›å»ºç´¢å¼•ã€‚</strong></p><p>ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p><ul><li>æ˜¯å¦èƒ½<strong>è¦†ç›–ç´¢å¼•</strong>ï¼Œå‡å°‘<strong>å›è¡¨</strong>æ‰€æ¶ˆè€—çš„æ—¶é—´ã€‚æ„å‘³ç€ï¼Œæˆ‘ä»¬åœ¨ select çš„æ—¶å€™ï¼Œä¸€å®šè¦æŒ‡æ˜å¯¹åº”çš„åˆ—ï¼Œè€Œä¸æ˜¯ select *ã€‚</li><li>è€ƒè™‘æ˜¯å¦ç»„å»º<strong>è”åˆç´¢å¼•</strong>ï¼Œå¦‚æœç»„å»º<strong>è”åˆç´¢å¼•</strong>ï¼Œå°½é‡å°†åŒºåˆ†åº¦æœ€é«˜çš„æ”¾åœ¨æœ€å·¦è¾¹ï¼Œå¹¶ä¸”éœ€è¦è€ƒè™‘<strong>æœ€å·¦åŒ¹é…åŸåˆ™</strong>ã€‚</li><li>å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°æ“ä½œæˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ</li><li>åˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯ã€‚æ¯”å¦‚ limit offsetï¼Œn åœ¨MySQLæ˜¯å…ˆè·å– offset è¡Œï¼Œå†è¿”å› n æ¡è®°å½•ã€‚è€Œåˆ©ç”¨å­æŸ¥è¯¢åˆ™æ˜¯æŸ¥å‡ºnæ¡ï¼Œé€šè¿‡IDæ£€ç´¢å¯¹åº”çš„è®°å½•å‡ºæ¥ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</li><li>é€šè¿‡explainå‘½ä»¤æ¥æŸ¥çœ‹SQLçš„æ‰§è¡Œè®¡åˆ’ï¼Œçœ‹çœ‹è‡ªå·±å†™çš„SQLæ˜¯å¦èµ°äº†ç´¢å¼•ï¼Œèµ°äº†ä»€ä¹ˆç´¢å¼•ã€‚é€šè¿‡ show profile æ¥æŸ¥çœ‹SQLå¯¹ç³»ç»Ÿèµ„æºçš„æŸè€—æƒ…å†µï¼ˆä¸€èˆ¬å°‘ç”¨åˆ°ï¼‰ã€‚</li><li>å¼€å¯äº‹åŠ¡åï¼Œåœ¨äº‹åŠ¡å†…å°½å¯èƒ½åªæ“ä½œæ•°æ®åº“ï¼Œå¹¶æœ‰æ„è¯†çš„å‡å°‘é”çš„æŒæœ‰æ—¶é—´ã€‚ï¼ˆæ¯”å¦‚åœ¨äº‹åŠ¡å†…éœ€è¦æ’å…¥å’Œä¿®æ”¹æ•°æ®ï¼Œé‚£å¯ä»¥å…ˆæ’å…¥åä¿®æ”¹ï¼Œå› ä¸ºä¿®æ”¹å±äºæ›´æ–°æ“ä½œï¼Œä¼šåŠ é”ï¼Œå¹¶å‘ä¸‹å¯èƒ½å¯¼è‡´å¤šä¸ªäº‹åŠ¡è¯·æ±‚é”ç­‰å¾…é‡Šæ”¾ï¼‰</li></ul><blockquote><p>Tips</p><p><a href="https://blog.csdn.net/vierhang/article/details/106624472">åˆ©ç”¨å»¶è¿Ÿå…³è”æˆ–è€…å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯</a></p></blockquote><hr><h2 id="çº¿ä¸Šä¸€èˆ¬ç”¨ä»€ä¹ˆéš”ç¦»çº§åˆ«"><a href="#çº¿ä¸Šä¸€èˆ¬ç”¨ä»€ä¹ˆéš”ç¦»çº§åˆ«" class="headerlink" title="çº¿ä¸Šä¸€èˆ¬ç”¨ä»€ä¹ˆéš”ç¦»çº§åˆ«"></a>çº¿ä¸Šä¸€èˆ¬ç”¨ä»€ä¹ˆéš”ç¦»çº§åˆ«</h2><p>MySQL é»˜è®¤ç”¨çš„æ˜¯ Repeatable read ï¼ˆå¯é‡å¤è¯»ï¼‰ã€‚</p><p>ä¸€èˆ¬äº’è”ç½‘å…¬å¸éƒ½é€‰æ‹© Read Commit ä½œä¸ºä¸»è¦çš„éš”ç¦»çº§åˆ«ã€‚</p><p>åƒ Repeatable read ï¼ˆå¯é‡å¤è¯»ï¼‰éš”ç¦»çº§åˆ«ï¼Œå°±æœ‰å¯èƒ½å› ä¸º<strong>é—´éš™é”</strong>å¯¼è‡´æ­»é”ã€‚</p><p>MySQLé»˜è®¤çš„éš”ç¦»çº§åˆ«ä¸º Repeatable read ï¼ˆå¯é‡å¤è¯»ï¼‰ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†åŸå› æ˜¯å› ä¸ºæœ€å¼€å§‹MySQLçš„binlogæ²¡æœ‰rowæ¨¡å¼ï¼Œåœ¨read commitéš”ç¦»çº§åˆ«ä¸‹ä¼šå­˜åœ¨<strong>ä¸»ä»æ•°æ®ä¸ä¸€è‡´</strong>çš„é—®é¢˜ã€‚</p><p>binlogè®°å½•äº†æ•°æ®åº“è¡¨ç»“æ„å’Œè¡¨æ•°æ®<strong>å˜æ›´</strong>ï¼Œæ¯”å¦‚update/delete/insert/truncate/createã€‚åœ¨MySQLä¸­ï¼Œä¸»ä»åŒæ­¥å®é™…ä¸Šå°±æ˜¯åº”ç”¨äº†binlogæ¥å®ç°çš„ã€‚</p><p>æœ‰äº†è¯¥å†å²åŸå› ï¼Œæ‰€ä»¥MySQLå°±å°†é»˜è®¤çš„éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºäº† Repeatable read ï¼ˆå¯é‡å¤è¯»ï¼‰ã€‚</p><hr><h2 id="å³ä½¿èµ°å¯¹äº†ç´¢å¼•ï¼Œä¸ºä»€ä¹ˆçº¿ä¸ŠæŸ¥è¯¢è¿˜æ˜¯æ…¢"><a href="#å³ä½¿èµ°å¯¹äº†ç´¢å¼•ï¼Œä¸ºä»€ä¹ˆçº¿ä¸ŠæŸ¥è¯¢è¿˜æ˜¯æ…¢" class="headerlink" title="å³ä½¿èµ°å¯¹äº†ç´¢å¼•ï¼Œä¸ºä»€ä¹ˆçº¿ä¸ŠæŸ¥è¯¢è¿˜æ˜¯æ…¢"></a>å³ä½¿èµ°å¯¹äº†ç´¢å¼•ï¼Œä¸ºä»€ä¹ˆçº¿ä¸ŠæŸ¥è¯¢è¿˜æ˜¯æ…¢</h2><p>å³ä½¿èµ°å¯¹äº†ç´¢å¼•ï¼Œçº¿ä¸ŠæŸ¥è¯¢è¿˜æ˜¯æ…¢ï¼Œé‚£ä¸€èˆ¬æ¥è¯´å°±æ˜¯è¡¨çš„æ•°æ®é‡å®åœ¨å¤ªå¤§äº†ã€‚</p><p>é¦–å…ˆï¼Œè€ƒè™‘èƒ½ä¸èƒ½æŠŠ<strong>æ—§çš„æ•°æ®</strong>ç»™åˆ é™¤æ‰ï¼ˆä¸€èˆ¬ä¸ä¼šåˆ çš„ï¼Œåªæœ‰æå°‘éƒ¨åˆ†ä¸šåŠ¡å¯ä»¥åˆ æ‰æ•°æ®ï¼‰ã€‚</p><p>éšåï¼Œè€ƒè™‘èƒ½ä¸èƒ½åœ¨æŸ¥è¯¢æ•°æ®åº“ä¹‹å‰ï¼Œç›´æ¥èµ°ä¸€å±‚ç¼“å­˜ï¼ˆRedisï¼‰ã€‚</p><p>èµ°ç¼“å­˜çš„è¯ï¼Œè€ƒè™‘ä¸šåŠ¡èƒ½ä¸èƒ½å¿å—è¯»å–çš„<strong>éçœŸæ­£å®æ—¶</strong>çš„æ•°æ®ã€‚å¦‚æœæŸ¥è¯¢æ¡ä»¶ç›¸å¯¹å¤æ‚å¤šå˜çš„è¯ï¼ˆæ¶‰åŠgroup by å’Œ sumï¼‰ï¼Œé‚£èµ°ç¼“å­˜ä¹Ÿä¸æ˜¯ä¸€ç§å¥½åŠæ³•ï¼Œç»´æŠ¤èµ·æ¥ä¸æ–¹ä¾¿ã€‚</p><p>å†çœ‹çœ‹æ˜¯ä¸æ˜¯æœ‰<strong>å­—ç¬¦ä¸²</strong>æ£€ç´¢çš„åœºæ™¯å¯¼è‡´æŸ¥è¯¢ä½æ•ˆï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æŠŠè¡¨çš„æ•°æ®å¯¼å…¥è‡³Elasticsearchç±»çš„æœç´¢å¼•æ“ï¼Œåç»­çš„çº¿ä¸ŠæŸ¥è¯¢å°±ç›´æ¥èµ°æœç´¢å¼•æ“äº†ã€‚</p><p>MySQL-&gt;Elasticsearchéœ€è¦æœ‰å¯¹åº”çš„åŒæ­¥ç¨‹åºï¼ˆä¸€èˆ¬å°±æ˜¯ç›‘å¬MySQLçš„binlogï¼Œè§£æbinlogåå¯¼å…¥åˆ°Elasticsearchï¼‰ã€‚</p><p>å¦‚æœè¿˜ä¸æ˜¯çš„è¯ï¼Œé‚£è€ƒè™‘è¦ä¸è¦åšç›¸åº”çš„èšåˆè¡¨ï¼Œçº¿ä¸Šè¯·æ±‚å°±æŸ¥è¯¢èšåˆè¡¨æ•°æ®ï¼Œä¸èµ°åŸè¡¨ã€‚ä»¥ç©ºé—´æ¢æ—¶é—´ã€‚</p><hr><h2 id="é™¤äº†è¯»ä»¥å¤–ï¼Œå†™æ€§èƒ½åŒæ ·æœ‰ç“¶é¢ˆï¼Œæ€ä¹ˆåŠ"><a href="#é™¤äº†è¯»ä»¥å¤–ï¼Œå†™æ€§èƒ½åŒæ ·æœ‰ç“¶é¢ˆï¼Œæ€ä¹ˆåŠ" class="headerlink" title="é™¤äº†è¯»ä»¥å¤–ï¼Œå†™æ€§èƒ½åŒæ ·æœ‰ç“¶é¢ˆï¼Œæ€ä¹ˆåŠ"></a>é™¤äº†è¯»ä»¥å¤–ï¼Œå†™æ€§èƒ½åŒæ ·æœ‰ç“¶é¢ˆï¼Œæ€ä¹ˆåŠ</h2><p>å¦‚æœMySQLè¯»å†™éƒ½æœ‰ç“¶é¢ˆï¼Œå°±è¦è€ƒè™‘æ¶æ„é—®é¢˜ã€‚</p><p>å¦‚æœæ˜¯å•åº“çš„ï¼Œå¯ä»¥è€ƒè™‘å‡çº§è‡³ä¸»ä»æ¶æ„ï¼Œå®ç°è¯»å†™åˆ†ç¦»ã€‚</p><p>å¦‚æœä»å­˜åœ¨ç“¶é¢ˆï¼Œå°±è¦è€ƒè™‘åˆ†åº“åˆ†è¡¨äº†ã€‚</p><p>åˆ†åº“åˆ†è¡¨çš„IDé€‰æ‹©ä¹Ÿæ˜¯ä¸ªé—®é¢˜ã€‚æ€è·¯æœ‰å¾ˆå¤šï¼Œæœ‰å€ŸåŠ©MySQLè‡ªå¢çš„ï¼Œæœ‰å€ŸåŠ©Redisè‡ªå¢çš„ï¼Œæœ‰åŸºäº<strong>é›ªèŠ±ç®—æ³•</strong>è‡ªå¢çš„ã€‚ä¸€èˆ¬ä½¿ç”¨Rediså’Œ<strong>é›ªèŠ±ç®—æ³•</strong>å®ç°ã€‚</p><p>åˆ†åº“åˆ†è¡¨çš„è¿ç§»è¿‡ç¨‹æ˜¯æ€æ ·çš„å‘¢ï¼Ÿ</p><p>ä¸€èˆ¬é‡‡ç”¨<strong>åŒå†™</strong>çš„æ–¹å¼è¿›è¡Œè¿ç§»ï¼š</p><ul><li>å¢é‡çš„æ¶ˆæ¯å„è‡ªå¾€æ–°è¡¨å’Œæ—§è¡¨å†™ä¸€ä»½</li><li>å°†æ—§è¡¨çš„æ•°æ®è¿ç§»è‡³æ–°è¡¨</li><li>è¿Ÿæ—©æ–°è¡¨çš„æ•°æ®éƒ½ä¼šè¿½å¾—ä¸Šæ—§è¡¨</li><li>æ•ˆéªŒæ–°è¡¨å’Œè€è¡¨çš„æ•°æ®æ˜¯å¦æ­£å¸¸</li><li>å¼€å¯åŒè¯»ï¼ˆä¸€éƒ¨åˆ†æµé‡èµ°æ–°è¡¨ï¼Œä¸€éƒ¨åˆ†æµé‡èµ°è€è¡¨ï¼‰</li><li>è¯»æµé‡å…¨éƒ¨åˆ‡æ–°è¡¨ï¼Œåœæ­¢è€è¡¨å†™å…¥</li></ul><p>å¦å¤–ï¼Œæå‰å‡†å¤‡å›æ»šæœºåˆ¶ï¼Œä¸´æ—¶åˆ‡æ¢å¤±è´¥èƒ½æ­£å¸¸æ¢å¤ä¸šåŠ¡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> MySQLå­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså­¦ä¹ -æŒä¹…åŒ–</title>
      <link href="/2021/06/14/redis-xue-xi-chi-jiu-hua/"/>
      <url>/2021/06/14/redis-xue-xi-chi-jiu-hua/</url>
      
        <content type="html"><![CDATA[<h1 id="Rediså­¦ä¹ -æŒä¹…åŒ–"><a href="#Rediså­¦ä¹ -æŒä¹…åŒ–" class="headerlink" title="Rediså­¦ä¹ -æŒä¹…åŒ–"></a>Rediså­¦ä¹ -æŒä¹…åŒ–</h1><hr><h2 id="æŒä¹…åŒ–ç®€ä»‹"><a href="#æŒä¹…åŒ–ç®€ä»‹" class="headerlink" title="æŒä¹…åŒ–ç®€ä»‹"></a>æŒä¹…åŒ–ç®€ä»‹</h2><p><strong>Redis</strong> çš„æ•°æ® <strong>å…¨éƒ¨å­˜å‚¨</strong> åœ¨ <strong>å†…å­˜</strong> ä¸­ï¼Œå¦‚æœ <strong>çªç„¶å®•æœº</strong>ï¼Œæ•°æ®å°±ä¼šå…¨éƒ¨ä¸¢å¤±ï¼Œå› æ­¤å¿…é¡»æœ‰ä¸€å¥—æœºåˆ¶æ¥ä¿è¯ Redis çš„æ•°æ®ä¸ä¼šå› ä¸ºæ•…éšœè€Œä¸¢å¤±ï¼Œè¿™ç§æœºåˆ¶å°±æ˜¯ Redis çš„ <strong>æŒä¹…åŒ–æœºåˆ¶</strong>ï¼Œå®ƒä¼šå°†å†…å­˜ä¸­çš„æ•°æ®åº“çŠ¶æ€ <strong>ä¿å­˜åˆ°ç£ç›˜</strong> ä¸­ã€‚</p><h3 id="æŒä¹…åŒ–å‘ç”Ÿäº†ä»€ä¹ˆ-ä»å†…å­˜åˆ°ç£ç›˜"><a href="#æŒä¹…åŒ–å‘ç”Ÿäº†ä»€ä¹ˆ-ä»å†…å­˜åˆ°ç£ç›˜" class="headerlink" title="æŒä¹…åŒ–å‘ç”Ÿäº†ä»€ä¹ˆ | ä»å†…å­˜åˆ°ç£ç›˜"></a>æŒä¹…åŒ–å‘ç”Ÿäº†ä»€ä¹ˆ | ä»å†…å­˜åˆ°ç£ç›˜</h3><p>é€šå¸¸æ¥è¯´ï¼Œä»å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚å¼€å§‹ï¼Œåˆ°æœåŠ¡å™¨çœŸå®åœ°å†™å…¥ç£ç›˜ï¼Œéœ€è¦å‘ç”Ÿå¦‚ä¸‹å‡ ä»¶äº‹æƒ…ï¼š</p><ol><li>å®¢æˆ·ç«¯å‘æ•°æ®åº“ <strong>å‘é€å†™å‘½ä»¤</strong> <em>(æ•°æ®åœ¨å®¢æˆ·ç«¯çš„å†…å­˜ä¸­)</em></li><li>æ•°æ®åº“ <strong>æ¥æ”¶</strong> åˆ°å®¢æˆ·ç«¯çš„ <strong>å†™è¯·æ±‚</strong> <em>(æ•°æ®åœ¨æœåŠ¡å™¨çš„å†…å­˜ä¸­)</em></li><li>æ•°æ®åº“ <strong>è°ƒç”¨ç³»ç»Ÿ API</strong> å°†æ•°æ®å†™å…¥ç£ç›˜ <em>(æ•°æ®åœ¨å†…æ ¸ç¼“å†²åŒºä¸­)</em></li><li>æ“ä½œç³»ç»Ÿå°† <strong>å†™ç¼“å†²åŒº</strong> ä¼ è¾“åˆ° <strong>ç£ç›˜æ§æ§åˆ¶å™¨</strong> <em>(æ•°æ®åœ¨ç£ç›˜ç¼“å­˜ä¸­)</em></li><li>æ“ä½œç³»ç»Ÿçš„ç£ç›˜æ§åˆ¶å™¨å°†æ•°æ® <strong>å†™å…¥å®é™…çš„ç‰©ç†åª’ä»‹</strong> ä¸­ <em>(æ•°æ®åœ¨ç£ç›˜ä¸­)</em></li></ol><p><strong>æ³¨æ„:</strong> ä¸Šé¢çš„è¿‡ç¨‹å…¶å®æ˜¯ <strong>æåº¦ç²¾ç®€</strong> çš„ï¼Œåœ¨å®é™…çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œ<strong>ç¼“å­˜</strong> å’Œ <strong>ç¼“å†²åŒº</strong> ä¼šæ¯”è¿™ <strong>å¤šå¾—å¤š</strong>â€¦</p><h3 id="å¦‚ä½•å°½å¯èƒ½ä¿è¯æŒä¹…åŒ–çš„å®‰å…¨"><a href="#å¦‚ä½•å°½å¯èƒ½ä¿è¯æŒä¹…åŒ–çš„å®‰å…¨" class="headerlink" title="å¦‚ä½•å°½å¯èƒ½ä¿è¯æŒä¹…åŒ–çš„å®‰å…¨"></a>å¦‚ä½•å°½å¯èƒ½ä¿è¯æŒä¹…åŒ–çš„å®‰å…¨</h3><p>å¦‚æœæˆ‘ä»¬æ•…éšœä»…ä»…æ¶‰åŠåˆ° <strong>è½¯ä»¶å±‚é¢</strong> <em>(è¯¥è¿›ç¨‹è¢«ç®¡ç†å‘˜ç»ˆæ­¢æˆ–ç¨‹åºå´©æºƒ)</em> å¹¶ä¸”æ²¡æœ‰æ¥è§¦åˆ°å†…æ ¸ï¼Œé‚£ä¹ˆåœ¨ <em>ä¸Šè¿°æ­¥éª¤ 3</em> æˆåŠŸè¿”å›ä¹‹åï¼Œæˆ‘ä»¬å°±è®¤ä¸ºæˆåŠŸäº†ã€‚å³ä½¿è¿›ç¨‹å´©æºƒï¼Œæ“ä½œç³»ç»Ÿä»ç„¶ä¼šå¸®åŠ©æˆ‘ä»¬æŠŠæ•°æ®æ­£ç¡®åœ°å†™å…¥ç£ç›˜ã€‚</p><p>å¦‚æœæˆ‘ä»¬è€ƒè™‘ <strong>åœç”µ/ ç«ç¾</strong> ç­‰ <strong>æ›´å…·ç¾éš¾æ€§</strong> çš„äº‹æƒ…ï¼Œé‚£ä¹ˆåªæœ‰åœ¨å®Œæˆäº†ç¬¬ <strong>5</strong> æ­¥ä¹‹åï¼Œæ‰æ˜¯å®‰å…¨çš„ã€‚</p><p>æ‰€ä»¥æ•°æ®å®‰å…¨æœ€é‡è¦çš„é˜¶æ®µæ˜¯ï¼š<strong>æ­¥éª¤ä¸‰ã€å››ã€äº”</strong>ï¼Œå³ï¼š</p><ul><li>æ•°æ®åº“è½¯ä»¶è°ƒç”¨å†™æ“ä½œå°†ç”¨æˆ·ç©ºé—´çš„ç¼“å†²åŒºè½¬ç§»åˆ°å†…æ ¸ç¼“å†²åŒºçš„é¢‘ç‡æ˜¯å¤šå°‘ï¼Ÿ</li><li>å†…æ ¸å¤šä¹…ä»ç¼“å†²åŒºå–æ•°æ®åˆ·æ–°åˆ°ç£ç›˜æ§åˆ¶å™¨ï¼Ÿ</li><li>ç£ç›˜æ§åˆ¶å™¨å¤šä¹…æŠŠæ•°æ®å†™å…¥ç‰©ç†åª’ä»‹ä¸€æ¬¡ï¼Ÿ</li><li><strong>æ³¨æ„ï¼š</strong> å¦‚æœçœŸçš„å‘ç”Ÿç¾éš¾æ€§çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸Šå›¾çš„è¿‡ç¨‹ä¸­çœ‹åˆ°ï¼Œä»»ä½•ä¸€æ­¥éƒ½å¯èƒ½è¢«æ„å¤–æ‰“æ–­ä¸¢å¤±ï¼Œæ‰€ä»¥åªèƒ½ <strong>å°½å¯èƒ½åœ°ä¿è¯</strong> æ•°æ®çš„å®‰å…¨ï¼Œè¿™å¯¹äºæ‰€æœ‰æ•°æ®åº“æ¥è¯´éƒ½æ˜¯ä¸€æ ·çš„ã€‚</li></ul><hr><h2 id="RedisæŒä¹…åŒ–çš„ä¸¤ç§æ–¹å¼"><a href="#RedisæŒä¹…åŒ–çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="RedisæŒä¹…åŒ–çš„ä¸¤ç§æ–¹å¼"></a>RedisæŒä¹…åŒ–çš„ä¸¤ç§æ–¹å¼</h2><h3 id="æ–¹å¼ä¸€ï¼šå¿«ç…§"><a href="#æ–¹å¼ä¸€ï¼šå¿«ç…§" class="headerlink" title="æ–¹å¼ä¸€ï¼šå¿«ç…§"></a>æ–¹å¼ä¸€ï¼šå¿«ç…§</h3><p><strong>Redis å¿«ç…§</strong> æ˜¯æœ€ç®€å•çš„ Redis æŒä¹…æ€§æ¨¡å¼ã€‚å½“æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶ï¼Œå®ƒå°†ç”Ÿæˆæ•°æ®é›†çš„æ—¶é—´ç‚¹å¿«ç…§ï¼Œä¾‹å¦‚ï¼Œå¦‚æœå…ˆå‰çš„å¿«ç…§æ˜¯åœ¨2åˆ†é’Ÿå‰åˆ›å»ºçš„ï¼Œå¹¶ä¸”ç°åœ¨å·²ç»è‡³å°‘æœ‰ <em>100</em> æ¬¡æ–°å†™å…¥ï¼Œåˆ™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„å¿«ç…§ã€‚æ­¤æ¡ä»¶å¯ä»¥ç”±ç”¨æˆ·é…ç½® Redis å®ä¾‹æ¥æ§åˆ¶ï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹è€Œæ— éœ€é‡æ–°å¯åŠ¨æœåŠ¡å™¨ã€‚å¿«ç…§ä½œä¸ºåŒ…å«æ•´ä¸ªæ•°æ®é›†çš„å•ä¸ª <code>.rdb</code> æ–‡ä»¶ç”Ÿæˆã€‚</p><p>ä½†æˆ‘ä»¬çŸ¥é“ï¼ŒRedis æ˜¯ä¸€ä¸ª <strong>å•çº¿ç¨‹</strong> çš„ç¨‹åºï¼Œè¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬ä¸ä»…ä»…è¦å“åº”ç”¨æˆ·çš„è¯·æ±‚ï¼Œè¿˜éœ€è¦è¿›è¡Œå†…å­˜å¿«ç…§ã€‚è€Œåè€…è¦æ±‚ Redis å¿…é¡»è¿›è¡Œ IO æ“ä½œï¼Œè¿™ä¼šä¸¥é‡æ‹–ç´¯æœåŠ¡å™¨çš„æ€§èƒ½ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬åœ¨ <strong>æŒä¹…åŒ–çš„åŒæ—¶</strong>ï¼Œ<strong>å†…å­˜æ•°æ®ç»“æ„</strong> è¿˜å¯èƒ½åœ¨ <strong>å˜åŒ–</strong>ï¼Œæ¯”å¦‚ä¸€ä¸ªå¤§å‹çš„ hash å­—å…¸æ­£åœ¨æŒä¹…åŒ–ï¼Œç»“æœä¸€ä¸ªè¯·æ±‚è¿‡æ¥æŠŠå®ƒåˆ é™¤äº†ï¼Œå¯æ˜¯è¿™æ‰åˆšæŒä¹…åŒ–ç»“æŸï¼Œå’‹åŠï¼Ÿ</p><h4 id="ä½¿ç”¨ç³»ç»Ÿå¤šè¿›ç¨‹-COW-Copy-On-Write-æœºåˆ¶-fork-å‡½æ•°"><a href="#ä½¿ç”¨ç³»ç»Ÿå¤šè¿›ç¨‹-COW-Copy-On-Write-æœºåˆ¶-fork-å‡½æ•°" class="headerlink" title="ä½¿ç”¨ç³»ç»Ÿå¤šè¿›ç¨‹ COW(Copy On Write) æœºåˆ¶ | fork å‡½æ•°"></a>ä½¿ç”¨ç³»ç»Ÿå¤šè¿›ç¨‹ COW(Copy On Write) æœºåˆ¶ | fork å‡½æ•°</h4><p>æ“ä½œç³»ç»Ÿå¤šè¿›ç¨‹ <strong>COW(Copy On Write) æœºåˆ¶</strong> æ‹¯æ•‘äº†æˆ‘ä»¬ã€‚<strong>Redis</strong> åœ¨æŒä¹…åŒ–æ—¶ä¼šè°ƒç”¨ <code>glibc</code> çš„å‡½æ•° <code>fork</code> äº§ç”Ÿä¸€ä¸ªå­è¿›ç¨‹ï¼Œç®€å•ç†è§£ä¹Ÿå°±æ˜¯åŸºäºå½“å‰è¿›ç¨‹ <strong>å¤åˆ¶</strong> äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹ä¼šå…±äº«å†…å­˜é‡Œé¢çš„ä»£ç å—å’Œæ•°æ®æ®µï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.5tg3dvds7fg0.png" alt="image"></p><p><strong>è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</strong></p><p>1.åˆ†é…æ–°çš„å†…å­˜å—å’Œå†…æ ¸æ•°æ®ç»“æ„ç»™å­è¿›ç¨‹</p><p>2.å°†çˆ¶è¿›ç¨‹éƒ¨åˆ†æ•°æ®ç»“æ„å†…å®¹æ‹·è´è‡³å­è¿›ç¨‹</p><p>3.æ·»åŠ å­è¿›ç¨‹åˆ°ç³»ç»Ÿåˆ—è¡¨ä¸­</p><p>4.Forkè¿”å›ï¼Œå¼€å§‹è°ƒåº¦å™¨è°ƒåº¦</p><p><strong>ä¸ºä»€ä¹ˆ fork æˆåŠŸè°ƒç”¨åä¼šæœ‰ä¸¤ä¸ªè¿”å›å€¼å‘¢ï¼Ÿ</strong> å› ä¸ºå­è¿›ç¨‹åœ¨å¤åˆ¶æ—¶å¤åˆ¶äº†çˆ¶è¿›ç¨‹çš„å †æ ˆæ®µï¼Œæ‰€ä»¥ä¸¤ä¸ªè¿›ç¨‹éƒ½åœç•™åœ¨äº† <code>fork</code> å‡½æ•°ä¸­ <em>(éƒ½åœ¨åŒä¸€ä¸ªåœ°æ–¹å¾€ä¸‹ç»§ç»­â€åŒæ—¶â€æ‰§è¡Œ)*ï¼Œç­‰å¾…è¿”å›ï¼Œæ‰€ä»¥ *</em>ä¸€æ¬¡åœ¨çˆ¶è¿›ç¨‹ä¸­è¿”å›å­è¿›ç¨‹çš„ pidï¼Œå¦ä¸€æ¬¡åœ¨å­è¿›ç¨‹ä¸­è¿”å›é›¶ï¼Œç³»ç»Ÿèµ„æºä¸å¤Ÿæ—¶è¿”å›è´Ÿæ•°*<em>ã€‚</em>(ä¼ªä»£ç å¦‚ä¸‹)*</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">pid = os.fork()if pid &gt; 0:  handle_client_request()  # çˆ¶è¿›ç¨‹ç»§ç»­å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚if pid == 0:  handle_snapshot_write()  # å­è¿›ç¨‹å¤„ç†å¿«ç…§å†™ç£ç›˜if pid &lt; 0:  # fork error<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰€ä»¥ <strong>å¿«ç…§æŒä¹…åŒ–</strong> å¯ä»¥å®Œå…¨äº¤ç»™ <strong>å­è¿›ç¨‹</strong> æ¥å¤„ç†ï¼Œ<strong>çˆ¶è¿›ç¨‹</strong> åˆ™ç»§ç»­ <strong>å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚</strong>ã€‚<strong>å­è¿›ç¨‹</strong> åšæ•°æ®æŒä¹…åŒ–ï¼Œå®ƒ <strong>ä¸ä¼šä¿®æ”¹ç°æœ‰çš„å†…å­˜æ•°æ®ç»“æ„</strong>ï¼Œå®ƒåªæ˜¯å¯¹æ•°æ®ç»“æ„è¿›è¡Œéå†è¯»å–ï¼Œç„¶ååºåˆ—åŒ–å†™åˆ°ç£ç›˜ä¸­ã€‚ä½†æ˜¯ <strong>çˆ¶è¿›ç¨‹</strong> ä¸ä¸€æ ·ï¼Œå®ƒå¿…é¡»æŒç»­æœåŠ¡å®¢æˆ·ç«¯è¯·æ±‚ï¼Œç„¶åå¯¹ <strong>å†…å­˜æ•°æ®ç»“æ„è¿›è¡Œä¸é—´æ–­çš„ä¿®æ”¹</strong>ã€‚</p><p>è¿™ä¸ªæ—¶å€™å°±ä¼šä½¿ç”¨æ“ä½œç³»ç»Ÿçš„ COW æœºåˆ¶æ¥è¿›è¡Œ <strong>æ•°æ®æ®µé¡µé¢</strong> çš„åˆ†ç¦»ã€‚æ•°æ®æ®µæ˜¯ç”±å¾ˆå¤šæ“ä½œç³»ç»Ÿçš„é¡µé¢ç»„åˆè€Œæˆï¼Œå½“çˆ¶è¿›ç¨‹å¯¹å…¶ä¸­ä¸€ä¸ªé¡µé¢çš„æ•°æ®è¿›è¡Œä¿®æ”¹æ—¶ï¼Œä¼šå°†è¢«å…±äº«çš„é¡µé¢å¤ åˆ¶ä¸€ä»½åˆ†ç¦»å‡ºæ¥ï¼Œç„¶å <strong>å¯¹è¿™ä¸ªå¤åˆ¶çš„é¡µé¢è¿›è¡Œä¿®æ”¹</strong>ã€‚è¿™æ—¶ <strong>å­è¿›ç¨‹</strong> ç›¸åº”çš„é¡µé¢æ˜¯ <strong>æ²¡æœ‰å˜åŒ–çš„</strong>ï¼Œè¿˜æ˜¯è¿›ç¨‹äº§ç”Ÿæ—¶é‚£ä¸€ç¬é—´çš„æ•°æ®ã€‚</p><p>å­è¿›ç¨‹å› ä¸ºæ•°æ®æ²¡æœ‰å˜åŒ–ï¼Œå®ƒèƒ½çœ‹åˆ°çš„å†…å­˜é‡Œçš„æ•°æ®åœ¨è¿›ç¨‹äº§ç”Ÿçš„ä¸€ç¬é—´å°±å‡å›ºäº†ï¼Œå†ä¹Ÿä¸ä¼šæ”¹å˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ <strong>Redis</strong> çš„æŒä¹…åŒ– <strong>å«ã€Œå¿«ç…§ã€çš„åŸå› </strong>ã€‚æ¥ä¸‹æ¥å­è¿›ç¨‹å°±å¯ä»¥éå¸¸å®‰å¿ƒçš„éå†æ•°æ®äº†è¿›è¡Œåºåˆ—åŒ–å†™ç£ç›˜äº†ã€‚</p><hr><h3 id="æ–¹å¼äºŒï¼šAOF"><a href="#æ–¹å¼äºŒï¼šAOF" class="headerlink" title="æ–¹å¼äºŒï¼šAOF"></a>æ–¹å¼äºŒï¼šAOF</h3><p><strong>å¿«ç…§ä¸æ˜¯å¾ˆæŒä¹…</strong>ã€‚å¦‚æœè¿è¡Œ Redis çš„è®¡ç®—æœºåœæ­¢è¿è¡Œï¼Œç”µæºçº¿å‡ºç°æ•…éšœæˆ–è€… <code>kill -9</code> çš„å®ä¾‹æ„å¤–å‘ç”Ÿï¼Œåˆ™å†™å…¥ Redis çš„æœ€æ–°æ•°æ®å°†ä¸¢å¤±ã€‚å°½ç®¡è¿™å¯¹äºæŸäº›åº”ç”¨ç¨‹åºå¯èƒ½ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ï¼Œä½†æœ‰äº›ä½¿ç”¨æ¡ˆä¾‹å…·æœ‰å……åˆ†çš„è€ç”¨æ€§ï¼Œåœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¿«ç…§å¹¶ä¸æ˜¯å¯è¡Œçš„é€‰æ‹©ã€‚</p><p><strong>AOF(Append Only File - ä»…è¿½åŠ æ–‡ä»¶)</strong> å®ƒçš„å·¥ä½œæ–¹å¼éå¸¸ç®€å•ï¼šæ¯æ¬¡æ‰§è¡Œ <strong>ä¿®æ”¹å†…å­˜</strong> ä¸­æ•°æ®é›†çš„å†™æ“ä½œæ—¶ï¼Œéƒ½ä¼š <strong>è®°å½•</strong> è¯¥æ“ä½œã€‚å‡è®¾ AOF æ—¥å¿—è®°å½•äº†è‡ª Redis å®ä¾‹åˆ›å»ºä»¥æ¥ <strong>æ‰€æœ‰çš„ä¿®æ”¹æ€§æŒ‡ä»¤åºåˆ—</strong>ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡å¯¹ä¸€ä¸ªç©ºçš„ Redis å®ä¾‹ <strong>é¡ºåºæ‰§è¡Œæ‰€æœ‰çš„æŒ‡ä»¤</strong>ï¼Œä¹Ÿå°±æ˜¯ <strong>ã€Œé‡æ”¾ã€</strong>ï¼Œæ¥æ¢å¤ Redis å½“å‰å®ä¾‹çš„å†…å­˜æ•°æ®ç»“æ„çš„çŠ¶æ€ã€‚</p><p>å½“ Redis æ”¶åˆ°å®¢æˆ·ç«¯ä¿®æ”¹æŒ‡ä»¤åï¼Œä¼šå…ˆè¿›è¡Œå‚æ•°æ ¡éªŒã€é€»è¾‘å¤„ç†ï¼Œå¦‚æœæ²¡é—®é¢˜ï¼Œå°± <strong>ç«‹å³</strong> å°†è¯¥æŒ‡ä»¤æ–‡æœ¬ <strong>å­˜å‚¨</strong> åˆ° AOF æ—¥å¿—ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å…ˆæ‰§è¡ŒæŒ‡ä»¤å†å°†æ—¥å¿—å­˜ç›˜</strong>ã€‚è¿™ä¸€ç‚¹ä¸åŒäº <code>MySQL</code>ã€<code>LevelDB</code>ã€<code>HBase</code> ç­‰å­˜å‚¨å¼•æ“ï¼Œå¦‚æœæˆ‘ä»¬å…ˆå­˜å‚¨æ—¥å¿—å†åšé€»è¾‘å¤„ç†ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯å³ä½¿å®•æœºäº†ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡ä¹‹å‰ä¿å­˜çš„æ—¥å¿—æ¢å¤åˆ°ä¹‹å‰çš„æ•°æ®çŠ¶æ€ï¼Œä½†æ˜¯ <strong>Redis ä¸ºä»€ä¹ˆæ²¡æœ‰è¿™ä¹ˆåšå‘¢ï¼Ÿ</strong></p><p>Emmmâ€¦ æ²¡æ‰¾åˆ°ç‰¹åˆ«æ»¡æ„çš„ç­”æ¡ˆã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><h4 id="AOF-é‡å†™"><a href="#AOF-é‡å†™" class="headerlink" title="AOF é‡å†™"></a>AOF é‡å†™</h4><p><strong>Redis</strong> åœ¨é•¿æœŸè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒAOF çš„æ—¥å¿—ä¼šè¶Šå˜è¶Šé•¿ã€‚å¦‚æœå®ä¾‹å®•æœºé‡å¯ï¼Œé‡æ”¾æ•´ä¸ª AOF æ—¥å¿—ä¼šéå¸¸è€—æ—¶ï¼Œå¯¼è‡´é•¿æ—¶é—´ Redis æ— æ³•å¯¹å¤–æä¾›æœåŠ¡ã€‚æ‰€ä»¥éœ€è¦å¯¹ **AOF æ—¥å¿— â€œç˜¦èº«â€**ã€‚</p><p><strong>Redis</strong> æä¾›äº† <code>bgrewriteaof</code> æŒ‡ä»¤ç”¨äºå¯¹ AOF æ—¥å¿—è¿›è¡Œç˜¦èº«ã€‚å…¶ <strong>åŸç†</strong> å°±æ˜¯ <strong>å¼€è¾Ÿä¸€ä¸ªå­è¿›ç¨‹</strong> å¯¹å†…å­˜è¿›è¡Œ <strong>éå†</strong> è½¬æ¢æˆä¸€ç³»åˆ— Redis çš„æ“ä½œæŒ‡ä»¤ï¼Œ<strong>åºåˆ—åŒ–åˆ°ä¸€ä¸ªæ–°çš„ AOF æ—¥å¿—æ–‡ä»¶</strong> ä¸­ã€‚åºåˆ—åŒ–å®Œæ¯•åå†å°†æ“ä½œæœŸé—´å‘ç”Ÿçš„ <strong>å¢é‡ AOF æ—¥å¿—</strong> è¿½åŠ åˆ°è¿™ä¸ªæ–°çš„ AOF æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œè¿½åŠ å®Œæ¯•åå°±ç«‹å³æ›¿ä»£æ—§çš„ AOF æ—¥å¿—æ–‡ä»¶äº†ï¼Œç˜¦èº«å·¥ä½œå°±å®Œæˆäº†ã€‚</p><h4 id="fsync"><a href="#fsync" class="headerlink" title="fsync"></a>fsync</h4><p>AOF æ—¥å¿—æ˜¯ä»¥æ–‡ä»¶çš„å½¢å¼å­˜åœ¨çš„ï¼Œå½“ç¨‹åºå¯¹ AOF æ—¥å¿—æ–‡ä»¶è¿›è¡Œå†™æ“ä½œæ—¶ï¼Œå®é™…ä¸Šæ˜¯å°†å†…å®¹å†™åˆ°äº†å†…æ ¸ä¸ºæ–‡ä»¶æè¿°ç¬¦åˆ†é…çš„ä¸€ä¸ªå†…å­˜ç¼“å­˜ä¸­ï¼Œç„¶åå†…æ ¸ä¼šå¼‚æ­¥å°†è„æ•°æ®åˆ·å›åˆ°ç£ç›˜çš„ã€‚</p><p>å°±åƒæˆ‘ä»¬ <em>ä¸Šæ–¹ç¬¬å››æ­¥</em> æè¿°çš„é‚£æ ·ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ© <code>glibc</code> æä¾›çš„ <code>fsync(int fd)</code> å‡½æ•°æ¥è®²æŒ‡å®šçš„æ–‡ä»¶å†…å®¹ <strong>å¼ºåˆ¶ä»å†…æ ¸ç¼“å­˜åˆ·åˆ°ç£ç›˜</strong>ã€‚ä½† <strong>â€œå¼ºåˆ¶å¼€è½¦â€</strong> ä»ç„¶æ˜¯ä¸€ä¸ªå¾ˆæ¶ˆè€—èµ„æºçš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œéœ€è¦ **â€èŠ‚åˆ¶â€**ï¼é€šå¸¸æ¥è¯´ï¼Œç”Ÿäº§ç¯å¢ƒçš„æœåŠ¡å™¨ï¼ŒRedis æ¯éš” 1s å·¦å³æ‰§è¡Œä¸€æ¬¡ <code>fsync</code> æ“ä½œå°±å¯ä»¥äº†ã€‚</p><p>Redis åŒæ ·ä¹Ÿæä¾›äº†å¦å¤–ä¸¤ç§ç­–ç•¥ï¼Œä¸€ä¸ªæ˜¯ <strong>æ°¸ä¸ <code>fsync</code>**ï¼Œæ¥è®©æ“ä½œç³»ç»Ÿæ¥å†³å®šåˆé€‚åŒæ­¥ç£ç›˜ï¼Œå¾ˆä¸å®‰å…¨ï¼Œå¦ä¸€ä¸ªæ˜¯ **æ¥ä¸€ä¸ªæŒ‡ä»¤å°± <code>fsync</code> ä¸€æ¬¡</strong>ï¼Œéå¸¸æ…¢ã€‚ä½†æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒåŸºæœ¬ä¸ä¼šä½¿ç”¨ï¼Œäº†è§£ä¸€ä¸‹å³å¯ã€‚</p><hr><h2 id="Redis-4-0-æ··åˆæŒä¹…åŒ–"><a href="#Redis-4-0-æ··åˆæŒä¹…åŒ–" class="headerlink" title="Redis 4.0 æ··åˆæŒä¹…åŒ–"></a>Redis 4.0 æ··åˆæŒä¹…åŒ–</h2><p>é‡å¯ Redis æ—¶ï¼Œæˆ‘ä»¬å¾ˆå°‘ä½¿ç”¨ <code>rdb</code> æ¥æ¢å¤å†…å­˜çŠ¶æ€ï¼Œå› ä¸ºä¼šä¸¢å¤±å¤§é‡æ•°æ®ã€‚æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ AOF æ—¥å¿—é‡æ”¾ï¼Œä½†æ˜¯é‡æ”¾ AOF æ—¥å¿—æ€§èƒ½ç›¸å¯¹ <code>rdb</code> æ¥è¯´è¦æ…¢å¾ˆå¤šï¼Œè¿™æ ·åœ¨ Redis å®ä¾‹å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œå¯åŠ¨éœ€è¦èŠ±è´¹å¾ˆé•¿çš„æ—¶é—´ã€‚</p><p><strong>Redis 4.0</strong> ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¸¦æ¥äº†ä¸€ä¸ªæ–°çš„æŒä¹…åŒ–é€‰é¡¹â€”â€”<strong>æ··åˆæŒä¹…åŒ–</strong>ã€‚å°† <code>rdb</code> æ–‡ä»¶çš„å†…å®¹å’Œå¢é‡çš„ AOF æ—¥å¿—æ–‡ä»¶å­˜åœ¨ä¸€èµ·ã€‚è¿™é‡Œçš„ AOF æ—¥å¿—ä¸å†æ˜¯å…¨é‡çš„æ—¥å¿—ï¼Œè€Œæ˜¯ <strong>è‡ªæŒä¹…åŒ–å¼€å§‹åˆ°æŒä¹…åŒ–ç»“æŸ</strong> çš„è¿™æ®µæ—¶é—´å‘ç”Ÿçš„å¢é‡ AOF æ—¥å¿—ï¼Œé€šå¸¸è¿™éƒ¨åˆ† AOF æ—¥å¿—å¾ˆå°ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.jbnwru3d2vc.png" alt="image"></p><p>äºæ˜¯åœ¨ Redis é‡å¯çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆåŠ è½½ <code>rdb</code> çš„å†…å®¹ï¼Œç„¶åå†é‡æ”¾å¢é‡ AOF æ—¥å¿—å°±å¯ä»¥å®Œå…¨æ›¿ä»£ä¹‹å‰çš„ AOF å…¨é‡æ–‡ä»¶é‡æ”¾ï¼Œé‡å¯æ•ˆç‡å› æ­¤å¤§å¹…å¾—åˆ°æå‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Rediså­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså­¦ä¹ -åŸºæœ¬æ•°æ®ç»“æ„</title>
      <link href="/2021/06/13/redis-xue-xi-ji-ben-shu-ju-jie-gou/"/>
      <url>/2021/06/13/redis-xue-xi-ji-ben-shu-ju-jie-gou/</url>
      
        <content type="html"><![CDATA[<h1 id="Rediså­¦ä¹ -åŸºæœ¬æ•°æ®ç»“æ„"><a href="#Rediså­¦ä¹ -åŸºæœ¬æ•°æ®ç»“æ„" class="headerlink" title="Rediså­¦ä¹ -åŸºæœ¬æ•°æ®ç»“æ„"></a>Rediså­¦ä¹ -åŸºæœ¬æ•°æ®ç»“æ„</h1><hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Redisæ”¯æŒä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼Œ<strong>å¸¸ç”¨</strong>çš„æœ‰stringã€listã€hashã€setã€sortsetè¿™å‡ ç§ã€‚å­¦ä¹ è¿™äº›æ•°æ®ç»“æ„æ˜¯ä½¿ç”¨Redisçš„åŸºç¡€ï¼</p><p>Redisçš„å­˜å‚¨æ˜¯ä»¥<code>key-value</code>çš„å½¢å¼çš„ã€‚Redisä¸­çš„keyä¸€å®šæ˜¯å­—ç¬¦ä¸²ï¼Œvalueå¯ä»¥æ˜¯stringã€listã€hashã€setã€sortsetè¿™å‡ ç§å¸¸ç”¨çš„ã€‚</p><p>Rediså¹¶<strong>æ²¡æœ‰ç›´æ¥ä½¿ç”¨</strong>è¿™äº›æ•°æ®ç»“æ„æ¥å®ç°<code>key-value</code>æ•°æ®åº“ï¼Œè€Œæ˜¯<strong>åŸºäº</strong>è¿™äº›æ•°æ®ç»“æ„åˆ›å»ºäº†ä¸€ä¸ª<strong>å¯¹è±¡ç³»ç»Ÿ</strong>ã€‚</p><blockquote><p>ç®€å•æ¥è¯´ï¼šRedisä½¿ç”¨å¯¹è±¡æ¥è¡¨ç¤ºæ•°æ®åº“ä¸­çš„é”®å’Œå€¼ã€‚æ¯æ¬¡æˆ‘ä»¬åœ¨Redisæ•°æ®åº“ä¸­æ–°åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹æ—¶ï¼Œ<strong>è‡³å°‘ä¼šåˆ›å»ºå‡ºä¸¤ä¸ªå¯¹è±¡</strong>ã€‚ä¸€ä¸ªæ˜¯é”®å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯å€¼å¯¹è±¡ã€‚</p></blockquote><p>Redisä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½ç”±ä¸€ä¸ªredisObjectç»“æ„æ¥è¡¨ç¤ºï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typedef struct redisObject{    // å¯¹è±¡çš„ç±»å‹    unsigned type 4:;    // å¯¹è±¡çš„ç¼–ç æ ¼å¼    unsigned encoding:4;    // æŒ‡å‘åº•å±‚å®ç°æ•°æ®ç»“æ„çš„æŒ‡é’ˆ    void * ptr;    //.....}robj;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>ç±»å‹</th><th>ç¼–ç </th><th>å¯¹è±¡</th></tr></thead><tbody><tr><td>REDIS_STRING</td><td>REDIS_ENCODING_INT</td><td>ä½¿ç”¨æ•´æ•°å€¼å®ç°çš„å­—ç¬¦ä¸²å¯¹è±¡</td></tr><tr><td>REDIS_STRING</td><td>REDIS_ENCODING_EMBSTR</td><td>ä½¿ç”¨embstrç¼–ç çš„ç®€å•åŠ¨æ€å­—ç¬¦ä¸²å®ç°çš„å­—ç¬¦ä¸²å¯¹è±¡</td></tr><tr><td>REDIS_STRING</td><td>REDIS_ENCODING_RAW</td><td>ä½¿ç”¨ç®€å•åŠ¨æ€å­—ç¬¦ä¸²å®ç°çš„å­—ç¬¦ä¸²å¯¹è±¡</td></tr><tr><td>REDIS_LIST</td><td>REDIS_ENCODING_ZIPLIST</td><td>ä½¿ç”¨å‹ç¼©åˆ—è¡¨å®ç°çš„åˆ—è¡¨å¯¹è±¡</td></tr><tr><td>REDIS_LIST</td><td>REDIS_ENCODING_LINKEDLIST</td><td>ä½¿ç”¨åŒç«¯é“¾è¡¨å®ç°çš„åˆ—è¡¨å¯¹è±¡</td></tr><tr><td>REDIS_HASH</td><td>REDIS_ENCODING_ZIPLIST</td><td>ä½¿ç”¨å‹ç¼©åˆ—è¡¨å®ç°çš„å“ˆå¸Œå¯¹è±¡</td></tr><tr><td>REDIS_HASH</td><td>REDIS_ENCODING_HT</td><td>ä½¿ç”¨å­—å…¸å®ç°çš„å“ˆå¸Œå¯¹è±¡</td></tr><tr><td>REDIS_SET</td><td>REDIS_ENCODING_INTSET</td><td>ä½¿ç”¨æ•´æ•°é›†åˆå®ç°çš„é›†åˆå¯¹è±¡</td></tr><tr><td>REDIS_SET</td><td>REDIS_ENCODING_HT</td><td>ä½¿ç”¨å­—å…¸å®ç°çš„é›†åˆå¯¹è±¡</td></tr><tr><td>REDIS_ZSET</td><td>REDIS_ENCODING_ZIPLIST</td><td>ä½¿ç”¨å‹ç¼©åˆ—è¡¨å®ç°çš„æœ‰åºé›†åˆå¯¹è±¡</td></tr><tr><td>REDIS_ZSET</td><td>REDIS_ENCODING_SKIPLIST</td><td>ä½¿ç”¨è·³è·ƒè¡¨å’Œå­—å…¸å®ç°çš„æœ‰åºé›†åˆå¯¹è±¡</td></tr></tbody></table><p>ç®€å•æ¥è¯´å°±æ˜¯Rediså¯¹<code>key-value</code>å°è£…æˆå¯¹è±¡ï¼Œkeyæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œvalueä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰type(ç±»å‹)ã€encoding(ç¼–ç )ã€ptr(æŒ‡å‘åº•å±‚æ•°æ®ç»“æ„çš„æŒ‡é’ˆ)æ¥è¡¨ç¤ºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.6x8naanoa880.png" alt="image"></p><p>ä¸‹é¢æˆ‘å°±æ¥è¯´ä¸€ä¸‹æˆ‘ä»¬Rediså¸¸è§çš„æ•°æ®ç±»å‹ï¼šstringã€listã€hashã€setã€sortsetã€‚å®ƒä»¬çš„åº•å±‚æ•°æ®ç»“æ„ç©¶ç«Ÿæ˜¯æ€ä¹ˆæ ·çš„ï¼</p><hr><h2 id="SDSç®€å•åŠ¨æ€å­—ç¬¦ä¸²"><a href="#SDSç®€å•åŠ¨æ€å­—ç¬¦ä¸²" class="headerlink" title="SDSç®€å•åŠ¨æ€å­—ç¬¦ä¸²"></a>SDSç®€å•åŠ¨æ€å­—ç¬¦ä¸²</h2><blockquote><p>ç®€å•åŠ¨æ€å­—ç¬¦ä¸²ï¼ˆSimple dynamic stringï¼ŒSDSï¼‰</p></blockquote><p>Redisä¸­çš„å­—ç¬¦ä¸²è·ŸCè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²ï¼Œæ˜¯<strong>æœ‰ç‚¹å·®è·çš„</strong>ã€‚</p><p>Redisä½¿ç”¨sdshdrç»“æ„æ¥è¡¨ç¤ºä¸€ä¸ªSDSå€¼ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">struct sdshdr{    // å­—èŠ‚æ•°ç»„ï¼Œç”¨äºä¿å­˜å­—ç¬¦ä¸²    char buf[];    // è®°å½•bufæ•°ç»„ä¸­å·²ä½¿ç”¨çš„å­—èŠ‚æ•°é‡ï¼Œä¹Ÿæ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦    int len;    // è®°å½•bufæ•°ç»„æœªä½¿ç”¨çš„å­—èŠ‚æ•°é‡    int free;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>ä½¿ç”¨SDSçš„å¥½å¤„</p></blockquote><ol><li>sdshdræ•°æ®ç»“æ„ä¸­ç”¨lenå±æ€§è®°å½•äº†å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚é‚£ä¹ˆ**è·å–å­—ç¬¦ä¸²çš„é•¿åº¦æ—¶ï¼Œæ—¶é—´å¤æ‚åº¦åªéœ€è¦O(1)**ã€‚</li><li>SDSä¸ä¼šå‘ç”Ÿæº¢å‡ºçš„é—®é¢˜ï¼Œå¦‚æœä¿®æ”¹SDSæ—¶ï¼Œç©ºé—´ä¸è¶³ã€‚å…ˆä¼šæ‰©å±•ç©ºé—´ï¼Œå†è¿›è¡Œä¿®æ”¹ï¼(<strong>å†…éƒ¨å®ç°äº†åŠ¨æ€æ‰©å±•æœºåˆ¶</strong>)ã€‚</li><li>SDSå¯ä»¥<strong>å‡å°‘å†…å­˜åˆ†é…çš„æ¬¡æ•°</strong>(ç©ºé—´é¢„åˆ†é…æœºåˆ¶)ã€‚åœ¨æ‰©å±•ç©ºé—´æ—¶ï¼Œé™¤äº†åˆ†é…ä¿®æ”¹æ—¶æ‰€å¿…è¦çš„ç©ºé—´ï¼Œè¿˜ä¼šåˆ†é…é¢å¤–çš„ç©ºé—²ç©ºé—´(free å±æ€§)ã€‚</li><li>SDSæ˜¯<strong>äºŒè¿›åˆ¶å®‰å…¨çš„</strong>ï¼Œæ‰€æœ‰SDS APIéƒ½ä¼šä»¥å¤„ç†äºŒè¿›åˆ¶çš„æ–¹å¼æ¥å¤„ç†SDSå­˜æ”¾åœ¨bufæ•°ç»„é‡Œçš„æ•°æ®ã€‚</li></ol><hr><h2 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h2><p>ä½¿ç”¨listNodeç»“æ„æ¥è¡¨ç¤ºæ¯ä¸ªèŠ‚ç‚¹ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typedef struct listNode{    //å‰ç½®èŠ‚ç‚¹    struct listNode  *pre;    //åç½®èŠ‚ç‚¹    struct listNode  *pre;    //èŠ‚ç‚¹çš„å€¼    void  *value;}listNode<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨listNodeå¯ä»¥ç»„æˆé“¾è¡¨ï¼ŒRedisä¸­<strong>ä½¿ç”¨listç»“æ„æ¥æŒæœ‰é“¾è¡¨</strong>ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typedef struct list{    //è¡¨å¤´ç»“ç‚¹    listNode  *head;    //è¡¨å°¾èŠ‚ç‚¹    listNode  *tail;    //é“¾è¡¨é•¿åº¦    unsigned long len;    //èŠ‚ç‚¹å€¼å¤åˆ¶å‡½æ•°    void *(*dup) (viod *ptr);    //èŠ‚ç‚¹å€¼é‡Šæ”¾å‡½æ•°    void  (*free) (viod *ptr);    //èŠ‚ç‚¹å€¼å¯¹æ¯”å‡½æ•°    int (*match) (void *ptr,void *key);}list<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>Redisé“¾è¡¨çš„ç‰¹æ€§</p></blockquote><ul><li>æ— ç¯åŒå‘é“¾è¡¨</li><li>è·å–è¡¨å¤´æŒ‡é’ˆï¼Œè¡¨å°¾æŒ‡é’ˆï¼Œé“¾è¡¨èŠ‚ç‚¹é•¿åº¦çš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(1)</li><li>é“¾è¡¨ä½¿ç”¨<code>void *</code>æŒ‡é’ˆæ¥ä¿å­˜èŠ‚ç‚¹å€¼ï¼Œå¯ä»¥ä¿å­˜å„ç§ä¸åŒç±»å‹çš„å€¼</li></ul><hr><h2 id="å“ˆå¸Œè¡¨"><a href="#å“ˆå¸Œè¡¨" class="headerlink" title="å“ˆå¸Œè¡¨"></a>å“ˆå¸Œè¡¨</h2><p>åœ¨Redisä¸­ï¼Œ<code>key-value</code>çš„æ•°æ®ç»“æ„åº•å±‚å°±æ˜¯å“ˆå¸Œè¡¨æ¥å®ç°çš„ã€‚å¯¹äºå“ˆå¸Œè¡¨æ¥è¯´ï¼Œæˆ‘ä»¬ä¹Ÿå¹¶ä¸é™Œç”Ÿã€‚åœ¨Javaä¸­ï¼Œå“ˆå¸Œè¡¨å®é™…ä¸Šå°±æ˜¯æ•°ç»„+é“¾è¡¨çš„å½¢å¼æ¥æ„å»ºçš„ã€‚</p><p>åœ¨Redisé‡Œè¾¹ï¼Œå“ˆå¸Œè¡¨ä½¿ç”¨dicthtç»“æ„æ¥å®šä¹‰ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typedef struct dictht{    //å“ˆå¸Œè¡¨æ•°ç»„    dictEntry **table;          //å“ˆå¸Œè¡¨å¤§å°    unsigned long size;            //å“ˆå¸Œè¡¨å¤§å°æ©ç ï¼Œç”¨äºè®¡ç®—ç´¢å¼•å€¼    //æ€»æ˜¯ç­‰äºsize-1    unsigned long sizemark;             //å“ˆå¸Œè¡¨å·²æœ‰èŠ‚ç‚¹æ•°é‡    unsigned long used;}dictht<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å“ˆå¸Œè¡¨çš„èŠ‚ç‚¹å®ç°ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typedef struct dictEntry {    //é”®    void *key;    //å€¼    union {        void *value;        uint64_tu64;        int64_ts64;    }v;        //æŒ‡å‘ä¸‹ä¸ªå“ˆå¸ŒèŠ‚ç‚¹ï¼Œç»„æˆé“¾è¡¨    struct dictEntry *next;}dictEntry;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ç»“æ„ä¸Šçœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼šRediså®ç°çš„å“ˆå¸Œè¡¨å’ŒJavaä¸­å®ç°çš„æ˜¯<strong>ç±»ä¼¼</strong>çš„ã€‚åªä¸è¿‡Rediså¤šäº†å‡ ä¸ªå±æ€§æ¥è®°å½•å¸¸ç”¨çš„å€¼ï¼šsizemark(æ©ç )ã€used(å·²æœ‰çš„èŠ‚ç‚¹æ•°é‡)ã€size(å¤§å°)ã€‚</p><p>åŒæ ·åœ°ï¼ŒRedisä¸ºäº†æ›´å¥½çš„æ“ä½œï¼Œå¯¹å“ˆå¸Œè¡¨å¾€ä¸Šå†å°è£…äº†ä¸€å±‚(å‚è€ƒä¸Šé¢çš„Rediså®ç°é“¾è¡¨)ï¼Œä½¿ç”¨dictç»“æ„æ¥è¡¨ç¤ºï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typedef struct dict {    //ç±»å‹ç‰¹å®šå‡½æ•°    dictType *type;    //ç§æœ‰æ•°æ®    void *privdata;    //å“ˆå¸Œè¡¨    dictht ht[2];    //rehashç´¢å¼•    //å½“rehashä¸è¿›è¡Œæ—¶ï¼Œå€¼ä¸º-1    int rehashidx;  }dict;//-----------------------------------typedef struct dictType{    //è®¡ç®—å“ˆå¸Œå€¼çš„å‡½æ•°    unsigned int (*hashFunction)(const void * key);    //å¤åˆ¶é”®çš„å‡½æ•°    void *(*keyDup)(void *private, const void *key);    //å¤åˆ¶å€¼å¾—å‡½æ•°    void *(*valDup)(void *private, const void *obj);      //å¯¹æ¯”é”®çš„å‡½æ•°    int (*keyCompare)(void *privdata , const void *key1, const void *key2)    //é”€æ¯é”®çš„å‡½æ•°    void (*keyDestructor)(void *private, void *key);    //é”€æ¯å€¼çš„å‡½æ•°    void (*valDestructor)(void *private, void *obj);  }dictType<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Redisä¸­æœ‰ä¸¤ä¸ªå“ˆå¸Œè¡¨</strong>ï¼š</p><ul><li>ht[0]ï¼šç”¨äºå­˜æ”¾<strong>çœŸå®</strong>çš„<code>key-vlaue</code>æ•°æ®</li><li>ht[1]ï¼šç”¨äº<strong>æ‰©å®¹(rehash)</strong></li></ul><p>Redisä¸­å“ˆå¸Œç®—æ³•å’Œå“ˆå¸Œå†²çªè·ŸJavaå®ç°çš„å·®ä¸å¤šï¼Œå®ƒä¿©<strong>å·®å¼‚</strong>å°±æ˜¯ï¼š</p><ul><li>Rediså“ˆå¸Œå†²çªæ—¶ï¼šæ˜¯å°†æ–°èŠ‚ç‚¹æ·»åŠ åœ¨é“¾è¡¨çš„<strong>è¡¨å¤´</strong>ã€‚</li><li>JDK1.8åï¼ŒJavaåœ¨å“ˆå¸Œå†²çªæ—¶ï¼šæ˜¯å°†æ–°çš„èŠ‚ç‚¹æ·»åŠ åˆ°é“¾è¡¨çš„<strong>è¡¨å°¾</strong>ã€‚</li></ul><blockquote><p>rehashè¿‡ç¨‹</p></blockquote><p><strong>Redisæ˜¯ä¸“é—¨ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨æ¥åšrehashçš„</strong>ã€‚è¿™è·ŸJavaä¸€æ¬¡æ€§ç›´æ¥rehashæ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><p>åœ¨å¯¹å“ˆå¸Œè¡¨è¿›è¡Œæ‰©å±•æˆ–è€…æ”¶ç¼©æ“ä½œæ—¶ï¼Œreashè¿‡ç¨‹å¹¶ä¸æ˜¯ä¸€æ¬¡æ€§åœ°å®Œæˆçš„ï¼Œè€Œæ˜¯<strong>æ¸è¿›å¼</strong>åœ°å®Œæˆçš„ã€‚</p><p>Redisåœ¨rehashæ—¶é‡‡å–æ¸è¿›å¼çš„åŸå› ï¼š<strong>æ•°æ®é‡å¦‚æœè¿‡å¤§çš„è¯ï¼Œä¸€æ¬¡æ€§rehashä¼šæœ‰åºå¤§çš„è®¡ç®—é‡ï¼Œè¿™å¾ˆå¯èƒ½å¯¼è‡´æœåŠ¡å™¨ä¸€æ®µæ—¶é—´å†…åœæ­¢æœåŠ¡</strong>ã€‚</p><p>Rediså…·ä½“rehashè¿‡ç¨‹ï¼š</p><ul><li>1.åœ¨å­—å…¸ä¸­ç»´æŒä¸€ä¸ªç´¢å¼•è®¡æ•°å™¨å˜é‡rehashidxï¼Œå¹¶å°†è®¾ç½®ä¸º0ï¼Œè¡¨ç¤ºrehashå¼€å§‹ã€‚</li><li>2.åœ¨rehashæœŸé—´æ¯æ¬¡å¯¹å­—å…¸è¿›è¡Œå¢åŠ ã€æŸ¥è¯¢ã€åˆ é™¤å’Œæ›´æ–°æ“ä½œæ—¶ï¼Œ<strong>é™¤äº†æ‰§è¡ŒæŒ‡å®šå‘½ä»¤å¤–</strong>ï¼›è¿˜ä¼šå°†ht[0]ä¸­rehashidxç´¢å¼•ä¸Šçš„å€¼**rehashåˆ°ht[1]**ï¼Œæ“ä½œå®Œæˆårehashidx+1ã€‚</li><li>3.å­—å…¸æ“ä½œä¸æ–­æ‰§è¡Œï¼Œæœ€ç»ˆåœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œæ‰€æœ‰çš„é”®å€¼å¯¹å®Œæˆrehashï¼Œè¿™æ—¶<strong>å°†rehashidxè®¾ç½®ä¸º-1ï¼Œè¡¨ç¤ºrehashå®Œæˆ</strong></li><li>4.åœ¨æ¸è¿›å¼rehashè¿‡ç¨‹ä¸­ï¼Œå­—å…¸ä¼šåŒæ—¶ä½¿ç”¨ä¸¤ä¸ªå“ˆå¸Œè¡¨ht[0]å’Œht[1]ï¼Œæ‰€æœ‰çš„æ›´æ–°ã€åˆ é™¤ã€æŸ¥æ‰¾æ“ä½œä¹Ÿä¼šåœ¨ä¸¤ä¸ªå“ˆå¸Œè¡¨è¿›è¡Œã€‚ä¾‹å¦‚è¦æŸ¥æ‰¾ä¸€ä¸ªé”®çš„è¯ï¼Œ<strong>æœåŠ¡å™¨ä¼šä¼˜å…ˆæŸ¥æ‰¾ht[0]ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå†æŸ¥æ‰¾ht[1]**ï¼Œè¯¸å¦‚æ­¤ç±»ã€‚æ­¤å¤–å½“æ‰§è¡Œ</strong>æ–°å¢æ“ä½œ<strong>æ—¶ï¼Œæ–°çš„é”®å€¼å¯¹</strong>ä¸€å¾‹ä¿å­˜åˆ°ht[1]**ï¼Œä¸å†å¯¹ht[0]è¿›è¡Œä»»ä½•æ“ä½œï¼Œä»¥ä¿è¯ht[0]çš„é”®å€¼å¯¹æ•°é‡åªå‡ä¸å¢ï¼Œç›´è‡³å˜ä¸ºç©ºè¡¨ã€‚</li></ul><hr><h2 id="è·³è·ƒè¡¨"><a href="#è·³è·ƒè¡¨" class="headerlink" title="è·³è·ƒè¡¨"></a>è·³è·ƒè¡¨</h2><p>è·³è·ƒè¡¨(shiplist)æ˜¯å®ç°sortset(<strong>æœ‰åº</strong>é›†åˆ)çš„åº•å±‚æ•°æ®ç»“æ„ä¹‹ä¸€ï¼</p><p>Redisçš„è·³è·ƒè¡¨å®ç°ç”±zskiplistå’ŒzskiplistNodeä¸¤ä¸ªç»“æ„ç»„æˆã€‚å…¶ä¸­<strong>zskiplistä¿å­˜è·³è·ƒè¡¨çš„ä¿¡æ¯</strong>(è¡¨å¤´ï¼Œè¡¨å°¾èŠ‚ç‚¹ï¼Œé•¿åº¦)ï¼Œ<strong>zskiplistNodeåˆ™è¡¨ç¤ºè·³è·ƒè¡¨çš„èŠ‚ç‚¹</strong>ã€‚</p><p>zskiplistNodeè·³è·ƒè¡¨èŠ‚ç‚¹çš„ç»“æ„ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typeof struct zskiplistNode {        // åé€€æŒ‡é’ˆ        struct zskiplistNode *backward;        // åˆ†å€¼        double score;        // æˆå‘˜å¯¹è±¡        robj *obj;        // å±‚        struct zskiplistLevel {                // å‰è¿›æŒ‡é’ˆ                struct zskiplistNode *forward;                // è·¨åº¦                unsigned int span;        } level[];} zskiplistNode;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>zskiplistçš„ç»“æ„å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typeof struct zskiplist {        // è¡¨å¤´èŠ‚ç‚¹ï¼Œè¡¨å°¾èŠ‚ç‚¹        struct skiplistNode *header,*tail;        // è¡¨ä¸­èŠ‚ç‚¹æ•°é‡        unsigned long length;        // è¡¨ä¸­æœ€å¤§å±‚æ•°        int level;} zskiplist;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="æ•´æ•°é›†åˆ"><a href="#æ•´æ•°é›†åˆ" class="headerlink" title="æ•´æ•°é›†åˆ"></a>æ•´æ•°é›†åˆ</h2><p>æ•´æ•°é›†åˆæ˜¯set(é›†åˆ)çš„åº•å±‚æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚å½“ä¸€ä¸ªset(é›†åˆ)<strong>åªåŒ…å«æ•´æ•°å€¼å…ƒç´ </strong>ï¼Œå¹¶ä¸”<strong>å…ƒç´ çš„æ•°é‡ä¸å¤š</strong>æ—¶ï¼ŒRediså°±ä¼šé‡‡ç”¨æ•´æ•°é›†åˆ(intset)ä½œä¸ºset(é›†åˆ)çš„åº•å±‚å®ç°ã€‚</p><p>æ•´æ•°é›†åˆ(intset)ä¿è¯äº†å…ƒç´ æ˜¯<strong>ä¸ä¼šå‡ºç°é‡å¤</strong>çš„ï¼Œå¹¶ä¸”æ˜¯<strong>æœ‰åº</strong>çš„(ä»å°åˆ°å¤§æ’åº)ï¼Œintsetçš„ç»“æ„æ˜¯è¿™æ ·å­çš„ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">typeof struct intset {        // ç¼–ç æ–¹å¼        unit32_t encoding;        // é›†åˆåŒ…å«çš„å…ƒç´ æ•°é‡        unit32_t lenght;        // ä¿å­˜å…ƒç´ çš„æ•°ç»„        int8_t contents[];} intset;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è™½ç„¶intsetç»“æ„å°†contentså±æ€§å£°æ˜ä¸ºint8_tç±»å‹çš„æ•°ç»„ï¼Œä½†å®é™…ä¸Šcontentsæ•°ç»„å¹¶ä¸ä¿å­˜ä»»ä½•int8_tç±»å‹çš„å€¼ï¼Œ<strong>contentsæ•°ç»„çš„çœŸæ­£ç±»å‹å–å†³äºencodingå±æ€§çš„å€¼</strong>ï¼š</p><ul><li>INTSET_ENC_INT16</li><li>INTSET_ENC_INT32</li><li>INTSET_ENC_INT64</li></ul><p>ä»ç¼–ç æ ¼å¼çš„åå­—æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ï¼Œ16,32,64ç¼–ç å¯¹åº”èƒ½å­˜æ”¾çš„æ•°å­—èŒƒå›´æ˜¯ä¸ä¸€æ ·çš„ã€‚16æ˜æ˜¾æœ€å°‘ï¼Œ64æ˜æ˜¾æœ€å¤§ã€‚</p><p>å¦‚æœæœ¬æ¥æ˜¯INTSET_ENC_INT16çš„ç¼–ç ï¼Œæƒ³è¦å­˜æ”¾å¤§äºINTSET_ENC_INT16ç¼–ç èƒ½å­˜æ”¾çš„æ•´æ•°å€¼ï¼Œæ­¤æ—¶å°±å¾—ç¼–ç <strong>å‡çº§</strong>(ä»16å‡çº§æˆ32æˆ–è€…64)ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>1ï¼‰æ ¹æ®æ–°å…ƒç´ ç±»å‹æ‹“å±•æ•´æ•°é›†åˆåº•å±‚æ•°ç»„çš„ç©ºé—´å¹¶ä¸ºæ–°å…ƒç´ åˆ†é…ç©ºé—´ã€‚</li><li>2ï¼‰å°†åº•å±‚æ•°ç»„ç°æœ‰çš„æ‰€ä»¥å…ƒç´ éƒ½è½¬æ¢æˆä¸æ–°å…ƒç´ ç›¸åŒçš„ç±»å‹ï¼Œå¹¶å°†ç±»å‹è½¬æ¢åçš„å…ƒç´ æ”¾åˆ°æ­£ç¡®çš„ä½ä¸Šï¼Œéœ€è¦ç»´æŒåº•å±‚æ•°ç»„çš„æœ‰åºæ€§è´¨ä¸å˜ã€‚</li><li>3ï¼‰å°†æ–°å…ƒç´ æ·»åŠ åˆ°åº•å±‚æ•°ç»„ã€‚</li></ul><p><strong>åªæ”¯æŒå‡çº§æ“ä½œï¼Œå¹¶ä¸æ”¯æŒé™çº§æ“ä½œ</strong>ã€‚</p><hr><h2 id="å‹ç¼©åˆ—è¡¨"><a href="#å‹ç¼©åˆ—è¡¨" class="headerlink" title="å‹ç¼©åˆ—è¡¨"></a>å‹ç¼©åˆ—è¡¨</h2><p>å‹ç¼©åˆ—è¡¨(ziplist)æ˜¯listå’Œhashçš„åº•å±‚å®ç°ä¹‹ä¸€ã€‚å¦‚æœlistçš„æ¯ä¸ªéƒ½æ˜¯å°æ•´æ•°å€¼ï¼Œæˆ–è€…æ˜¯æ¯”è¾ƒçŸ­çš„å­—ç¬¦ä¸²ï¼Œå‹ç¼©åˆ—è¡¨(ziplist)ä½œä¸ºlistçš„åº•å±‚å®ç°ã€‚</p><p>å‹ç¼©åˆ—è¡¨(ziplist)æ˜¯Redisä¸ºäº†èŠ‚çº¦å†…å­˜è€Œå¼€å‘çš„ï¼Œæ˜¯ç”±ä¸€ç³»åˆ—çš„<strong>ç‰¹æ®Šç¼–ç çš„è¿ç»­å†…å­˜å—</strong>ç»„æˆçš„<strong>é¡ºåºæ€§</strong>æ•°æ®ç»“æ„ã€‚</p><blockquote><p>å‹ç¼©åˆ—è¡¨ä»è¡¨å°¾èŠ‚ç‚¹<strong>å€’åºéå†</strong>ï¼Œé¦–å…ˆæŒ‡é’ˆé€šè¿‡zltailåç§»é‡æŒ‡å‘è¡¨å°¾èŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡æŒ‡å‘<strong>èŠ‚ç‚¹è®°å½•çš„å‰ä¸€ä¸ªèŠ‚ç‚¹çš„é•¿åº¦ä¾æ¬¡å‘å‰éå†è®¿é—®æ•´ä¸ªå‹ç¼©åˆ—è¡¨</strong>ã€‚</p></blockquote><hr><h2 id="Redisä¸­æ•°æ®ç»“æ„çš„å¯¹è±¡"><a href="#Redisä¸­æ•°æ®ç»“æ„çš„å¯¹è±¡" class="headerlink" title="Redisä¸­æ•°æ®ç»“æ„çš„å¯¹è±¡"></a>Redisä¸­æ•°æ®ç»“æ„çš„å¯¹è±¡</h2><p>æœ‰äº†ä¸Šé¢çš„ä»‹ç»ï¼Œä¸‹é¢çš„è¡¨æ ¼å°±å¥½ç†è§£äº†</p><table><thead><tr><th>ç±»å‹</th><th>ç¼–ç </th><th>å¯¹è±¡</th></tr></thead><tbody><tr><td>REDIS_STRING</td><td>REDIS_ENCODING_INT</td><td>ä½¿ç”¨æ•´æ•°å€¼å®ç°çš„å­—ç¬¦ä¸²å¯¹è±¡</td></tr><tr><td>REDIS_STRING</td><td>REDIS_ENCODING_EMBSTR</td><td>ä½¿ç”¨embstrç¼–ç çš„ç®€å•åŠ¨æ€å­—ç¬¦ä¸²å®ç°çš„å­—ç¬¦ä¸²å¯¹è±¡</td></tr><tr><td>REDIS_STRING</td><td>REDIS_ENCODING_RAW</td><td>ä½¿ç”¨ç®€å•åŠ¨æ€å­—ç¬¦ä¸²å®ç°çš„å­—ç¬¦ä¸²å¯¹è±¡</td></tr><tr><td>REDIS_LIST</td><td>REDIS_ENCODING_ZIPLIST</td><td>ä½¿ç”¨å‹ç¼©åˆ—è¡¨å®ç°çš„åˆ—è¡¨å¯¹è±¡</td></tr><tr><td>REDIS_LIST</td><td>REDIS_ENCODING_LINKEDLIST</td><td>ä½¿ç”¨åŒç«¯é“¾è¡¨å®ç°çš„åˆ—è¡¨å¯¹è±¡</td></tr><tr><td>REDIS_HASH</td><td>REDIS_ENCODING_ZIPLIST</td><td>ä½¿ç”¨å‹ç¼©åˆ—è¡¨å®ç°çš„å“ˆå¸Œå¯¹è±¡</td></tr><tr><td>REDIS_HASH</td><td>REDIS_ENCODING_HT</td><td>ä½¿ç”¨å­—å…¸å®ç°çš„å“ˆå¸Œå¯¹è±¡</td></tr><tr><td>REDIS_SET</td><td>REDIS_ENCODING_INTSET</td><td>ä½¿ç”¨æ•´æ•°é›†åˆå®ç°çš„é›†åˆå¯¹è±¡</td></tr><tr><td>REDIS_SET</td><td>REDIS_ENCODING_HT</td><td>ä½¿ç”¨å­—å…¸å®ç°çš„é›†åˆå¯¹è±¡</td></tr><tr><td>REDIS_ZSET</td><td>REDIS_ENCODING_ZIPLIST</td><td>ä½¿ç”¨å‹ç¼©åˆ—è¡¨å®ç°çš„æœ‰åºé›†åˆå¯¹è±¡</td></tr><tr><td>REDIS_ZSET</td><td>REDIS_ENCODING_SKIPLIST</td><td>ä½¿ç”¨è·³è·ƒè¡¨å’Œå­—å…¸å®ç°çš„æœ‰åºé›†åˆå¯¹è±¡</td></tr></tbody></table><hr><h3 id="å­—ç¬¦ä¸²ï¼ˆStringï¼‰å¯¹è±¡"><a href="#å­—ç¬¦ä¸²ï¼ˆStringï¼‰å¯¹è±¡" class="headerlink" title="å­—ç¬¦ä¸²ï¼ˆStringï¼‰å¯¹è±¡"></a>å­—ç¬¦ä¸²ï¼ˆStringï¼‰å¯¹è±¡</h3><p>åœ¨ä¸Šé¢çš„è¡¨æˆ‘ä»¬çŸ¥é“stringç±»å‹æœ‰ä¸‰ç§<strong>ç¼–ç æ ¼å¼</strong>ï¼š</p><ul><li><p>intï¼šæ•´æ•°å€¼ï¼Œè¿™ä¸ªæ•´æ•°å€¼å¯ä»¥ä½¿ç”¨longç±»å‹æ¥è¡¨ç¤º</p></li><li><ul><li>å¦‚æœæ˜¯æµ®ç‚¹æ•°ï¼Œé‚£å°±ç”¨embstræˆ–è€…rawç¼–ç ã€‚å…·ä½“ç”¨å“ªä¸ªå°±çœ‹è¿™ä¸ªæ•°çš„é•¿åº¦äº†</li></ul></li><li><p>embstrï¼šå­—ç¬¦ä¸²å€¼ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å€¼çš„é•¿åº¦å°äº32å­—èŠ‚</p></li><li><p>rawï¼šå­—ç¬¦ä¸²å€¼ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å€¼çš„é•¿åº¦å¤§äº32å­—èŠ‚</p></li></ul><p>embstrå’Œrawçš„<strong>åŒºåˆ«</strong>ï¼š</p><ul><li>rawåˆ†é…å†…å­˜å’Œé‡Šæ”¾å†…å­˜çš„æ¬¡æ•°æ˜¯ä¸¤æ¬¡ï¼Œembstræ˜¯ä¸€æ¬¡</li><li>embstrç¼–ç çš„æ•°æ®ä¿å­˜åœ¨ä¸€å—<strong>è¿ç»­</strong>çš„å†…å­˜é‡Œé¢</li></ul><p>ç¼–ç ä¹‹é—´çš„<strong>è½¬æ¢</strong>ï¼š</p><ul><li>intç±»å‹å¦‚æœå­˜çš„<strong>ä¸å†æ˜¯ä¸€ä¸ªæ•´æ•°å€¼</strong>ï¼Œåˆ™ä¼šä»intè½¬æˆraw</li><li>embstræ˜¯åªè¯»çš„ï¼Œåœ¨ä¿®æ”¹çš„æ—¶å€™å›ä»embstrè½¬æˆraw</li></ul><hr><h3 id="åˆ—è¡¨ï¼ˆlistï¼‰å¯¹è±¡"><a href="#åˆ—è¡¨ï¼ˆlistï¼‰å¯¹è±¡" class="headerlink" title="åˆ—è¡¨ï¼ˆlistï¼‰å¯¹è±¡"></a>åˆ—è¡¨ï¼ˆlistï¼‰å¯¹è±¡</h3><p>åœ¨ä¸Šé¢çš„è¡¨æˆ‘ä»¬çŸ¥é“listç±»å‹æœ‰ä¸¤ç§<strong>ç¼–ç æ ¼å¼</strong>ï¼š</p><ul><li>ziplistï¼šå­—ç¬¦ä¸²å…ƒç´ çš„é•¿åº¦éƒ½å°äº64ä¸ªå­—èŠ‚<code>&amp;&amp;</code>æ€»æ•°é‡å°‘äº512ä¸ª</li><li>linkedlistï¼šå­—ç¬¦ä¸²å…ƒç´ çš„é•¿åº¦å¤§äº64ä¸ªå­—èŠ‚<code>||</code>æ€»æ•°é‡å¤§äº512ä¸ª</li></ul><p>ç¼–ç ä¹‹é—´çš„<strong>è½¬æ¢ï¼š</strong></p><ul><li>åŸæœ¬æ˜¯ziplistç¼–ç çš„ï¼Œå¦‚æœä¿å­˜çš„æ•°æ®é•¿åº¦å¤ªå¤§æˆ–è€…å…ƒç´ æ•°é‡è¿‡å¤šï¼Œä¼šè½¬æ¢æˆlinkedlistç¼–ç çš„ã€‚</li></ul><hr><h3 id="å“ˆå¸Œï¼ˆhashï¼‰å¯¹è±¡"><a href="#å“ˆå¸Œï¼ˆhashï¼‰å¯¹è±¡" class="headerlink" title="å“ˆå¸Œï¼ˆhashï¼‰å¯¹è±¡"></a>å“ˆå¸Œï¼ˆhashï¼‰å¯¹è±¡</h3><p>åœ¨ä¸Šé¢çš„è¡¨æˆ‘ä»¬çŸ¥é“hashç±»å‹æœ‰ä¸¤ç§<strong>ç¼–ç æ ¼å¼</strong>ï¼š</p><ul><li>ziplistï¼škeyå’Œvalueçš„å­—ç¬¦ä¸²é•¿åº¦éƒ½å°äº64å­—èŠ‚<code>&amp;&amp;</code>é”®å€¼å¯¹æ€»æ•°é‡å°äº512</li><li>hashtableï¼škeyå’Œvalueçš„å­—ç¬¦ä¸²é•¿åº¦å¤§äº64å­—èŠ‚<code>||</code>é”®å€¼å¯¹æ€»æ•°é‡å¤§äº512</li></ul><p>ç¼–ç ä¹‹é—´çš„<strong>è½¬æ¢ï¼š</strong></p><ul><li>åŸæœ¬æ˜¯ziplistç¼–ç çš„ï¼Œå¦‚æœä¿å­˜çš„æ•°æ®é•¿åº¦å¤ªå¤§æˆ–è€…å…ƒç´ æ•°é‡è¿‡å¤šï¼Œä¼šè½¬æ¢æˆhashtableç¼–ç çš„ã€‚</li></ul><hr><h3 id="é›†åˆï¼ˆsetï¼‰å¯¹è±¡"><a href="#é›†åˆï¼ˆsetï¼‰å¯¹è±¡" class="headerlink" title="é›†åˆï¼ˆsetï¼‰å¯¹è±¡"></a>é›†åˆï¼ˆsetï¼‰å¯¹è±¡</h3><p>åœ¨ä¸Šé¢çš„è¡¨æˆ‘ä»¬çŸ¥é“setç±»å‹æœ‰ä¸¤ç§<strong>ç¼–ç æ ¼å¼</strong>ï¼š</p><ul><li>intsetï¼šä¿å­˜çš„å…ƒç´ å…¨éƒ½æ˜¯æ•´æ•°<code>&amp;&amp;</code>æ€»æ•°é‡å°äº512</li><li>hashtableï¼šä¿å­˜çš„å…ƒç´ ä¸æ˜¯æ•´æ•°<code>||</code>æ€»æ•°é‡å¤§äº512</li></ul><p>ç¼–ç ä¹‹é—´çš„<strong>è½¬æ¢ï¼š</strong></p><ul><li>åŸæœ¬æ˜¯intsetç¼–ç çš„ï¼Œå¦‚æœä¿å­˜çš„æ•°æ®ä¸æ˜¯æ•´æ•°å€¼æˆ–è€…å…ƒç´ æ•°é‡å¤§äº512ï¼Œä¼šè½¬æ¢æˆhashtableç¼–ç çš„ã€‚</li></ul><hr><h3 id="æœ‰åºé›†åˆï¼ˆsortsetï¼‰å¯¹è±¡"><a href="#æœ‰åºé›†åˆï¼ˆsortsetï¼‰å¯¹è±¡" class="headerlink" title="æœ‰åºé›†åˆï¼ˆsortsetï¼‰å¯¹è±¡"></a>æœ‰åºé›†åˆï¼ˆsortsetï¼‰å¯¹è±¡</h3><p>åœ¨ä¸Šé¢çš„å›¾æˆ‘ä»¬çŸ¥é“setç±»å‹æœ‰ä¸¤ç§<strong>ç¼–ç æ ¼å¼</strong>ï¼š</p><ul><li>ziplistï¼šå…ƒç´ é•¿åº¦å°äº64<code>&amp;&amp;</code>æ€»æ•°é‡å°äº128</li><li>skiplistï¼šå…ƒç´ é•¿åº¦å¤§äº64<code>||</code>æ€»æ•°é‡å¤§äº128</li></ul><p>æœ‰åºé›†åˆ(sortset)å¯¹è±¡<strong>åŒæ—¶é‡‡ç”¨skiplistå’Œå“ˆå¸Œè¡¨æ¥å®ç°</strong>ï¼š</p><ul><li>skiplistèƒ½å¤Ÿè¾¾åˆ°æ’å…¥çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(logn)ï¼Œæ ¹æ®æˆå‘˜æŸ¥åˆ†å€¼çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)</li></ul><p>ç¼–ç ä¹‹é—´çš„<strong>è½¬æ¢ï¼š</strong></p><ul><li>åŸæœ¬æ˜¯ziplistç¼–ç çš„ï¼Œå¦‚æœä¿å­˜çš„æ•°æ®é•¿åº¦å¤§äº64æˆ–è€…å…ƒç´ æ•°é‡å¤§äº128ï¼Œä¼šè½¬æ¢æˆskiplistç¼–ç çš„ã€‚</li></ul><hr><h2 id="Redisçš„ä¸€äº›ç»†èŠ‚"><a href="#Redisçš„ä¸€äº›ç»†èŠ‚" class="headerlink" title="Redisçš„ä¸€äº›ç»†èŠ‚"></a>Redisçš„ä¸€äº›ç»†èŠ‚</h2><ul><li><p>1.æœåŠ¡å™¨åœ¨æ‰§è¡ŒæŸäº›å‘½ä»¤çš„æ—¶å€™ï¼Œä¼š<strong>å…ˆæ£€æŸ¥ç»™å®šçš„é”®çš„ç±»å‹</strong>èƒ½å¦æ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚</p></li><li><ul><li>æ¯”å¦‚æˆ‘ä»¬çš„æ•°æ®ç»“æ„æ˜¯sortsetï¼Œä½†ä½ ä½¿ç”¨äº†listçš„å‘½ä»¤ã€‚è¿™æ˜¯ä¸å¯¹çš„ï¼ŒæœåŠ¡å™¨ä¼šæ£€æŸ¥ä¸€ä¸‹æˆ‘ä»¬çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆæ‰ä¼šè¿›ä¸€æ­¥æ‰§è¡Œå‘½ä»¤</li></ul></li><li><p>2.Redisçš„å¯¹è±¡ç³»ç»Ÿå¸¦æœ‰<strong>å¼•ç”¨è®¡æ•°</strong>å®ç°çš„<strong>å†…å­˜å›æ”¶æœºåˆ¶</strong>ã€‚</p></li><li><ul><li>å¯¹è±¡ä¸å†è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ä¼šé‡Šæ”¾æ‰</li></ul></li><li><p>3.Redisä¼šå…±äº«å€¼ä¸º0åˆ°9999çš„å­—ç¬¦ä¸²å¯¹è±¡</p></li><li><p>4.å¯¹è±¡<strong>ä¼šè®°å½•è‡ªå·±çš„æœ€åä¸€æ¬¡è¢«è®¿é—®æ—¶é—´</strong>ï¼Œè¿™ä¸ªæ—¶é—´å¯ä»¥ç”¨äºè®¡ç®—å¯¹è±¡çš„ç©ºè½¬æ—¶é—´ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Rediså­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode 11.ç››æœ€å¤šæ°´çš„å®¹å™¨</title>
      <link href="/2021/06/07/leetcode-11.sheng-zui-duo-shui-de-rong-qi/"/>
      <url>/2021/06/07/leetcode-11.sheng-zui-duo-shui-de-rong-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="ç››æœ€å¤šæ°´çš„å®¹å™¨"><a href="#ç››æœ€å¤šæ°´çš„å®¹å™¨" class="headerlink" title="ç››æœ€å¤šæ°´çš„å®¹å™¨"></a>ç››æœ€å¤šæ°´çš„å®¹å™¨</h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><hr><p>ç»™ä½  n ä¸ªéè´Ÿæ•´æ•° a1ï¼Œa2ï¼Œâ€¦ï¼Œanï¼Œæ¯ä¸ªæ•°ä»£è¡¨åæ ‡ä¸­çš„ä¸€ä¸ªç‚¹ (i, ai) ã€‚åœ¨åæ ‡å†…ç”» n æ¡å‚ç›´çº¿ï¼Œå‚ç›´çº¿ i çš„ä¸¤ä¸ªç«¯ç‚¹åˆ†åˆ«ä¸º (i, ai) å’Œ (i, 0) ã€‚æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ x è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚</p><p><strong>è¯´æ˜ï¼š</strong>ä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.5s29rj6y2rk0.png" alt="image"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼š<span class="token punctuation">[</span><span class="token number">1,8</span>,6,2,5,4,8,3,7<span class="token punctuation">]</span>è¾“å‡ºï¼š49 è§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ <span class="token punctuation">[</span><span class="token number">1,8</span>,6,2,5,4,8,3,7<span class="token punctuation">]</span>ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º <span class="token number">49</span>ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹2ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šheight <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1,1</span><span class="token punctuation">]</span>è¾“å‡ºï¼š1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹3ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">è¾“å…¥ï¼šheight <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>è¾“å‡ºï¼š<span class="token number">16</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹4ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šheight <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1,2</span>,1<span class="token punctuation">]</span>è¾“å‡ºï¼š2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>æç¤ºï¼š</strong></p><ul><li><code>n = height.length</code></li><li><code>2 &lt;= n &lt;= 3 * 104</code></li><li><code>0 &lt;= height[i] &lt;= 3 * 104</code></li></ul><blockquote><p>åŒæŒ‡é’ˆï¼Œçœ‹ä»£ç åº”è¯¥å°±èƒ½çœ‹æ‡‚ã€‚</p></blockquote><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><hr><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxArea</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">=</span> height<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>l <span class="token operator">&lt;</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>height<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">,</span> height<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            cur <span class="token operator">=</span> t <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">&gt;</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>                res <span class="token operator">=</span> cur<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>height<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">&lt;</span> height<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                l<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                r<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> LeetCodeè®­ç»ƒå½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> leetcode </tag>
            
            <tag> åŒæŒ‡é’ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode 239.æ»‘åŠ¨çª—å£æœ€å¤§å€¼</title>
      <link href="/2021/06/05/leetcode-239.hua-dong-chuang-kou-zui-da-zhi/"/>
      <url>/2021/06/05/leetcode-239.hua-dong-chuang-kou-zui-da-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="æ»‘åŠ¨çª—å£æœ€å¤§å€¼"><a href="#æ»‘åŠ¨çª—å£æœ€å¤§å€¼" class="headerlink" title="æ»‘åŠ¨çª—å£æœ€å¤§å€¼"></a>æ»‘åŠ¨çª—å£æœ€å¤§å€¼</h1><hr><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><hr><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸º k çš„æ»‘åŠ¨çª—å£ä»æ•°ç»„çš„æœ€å·¦ä¾§ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€å³ä¾§ã€‚ä½ åªå¯ä»¥çœ‹åˆ°åœ¨æ»‘åŠ¨çª—å£å†…çš„ k ä¸ªæ•°å­—ã€‚æ»‘åŠ¨çª—å£æ¯æ¬¡åªå‘å³ç§»åŠ¨ä¸€ä½ã€‚</p><p>è¿”å›æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šnums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1,3</span>,-1,-3,5,3,6,7<span class="token punctuation">]</span>, k <span class="token operator">=</span> <span class="token number">3</span>è¾“å‡ºï¼š<span class="token punctuation">[</span><span class="token number">3,3</span>,5,5,6,7<span class="token punctuation">]</span>è§£é‡Šï¼šæ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼---------------               -----<span class="token punctuation">[</span><span class="token number">1</span>  <span class="token number">3</span>  -1<span class="token punctuation">]</span> -3  <span class="token number">5</span>  <span class="token number">3</span>  <span class="token number">6</span>  <span class="token number">7</span>       <span class="token number">3</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token number">3</span>  -1  -3<span class="token punctuation">]</span> <span class="token number">5</span>  <span class="token number">3</span>  <span class="token number">6</span>  <span class="token number">7</span>       <span class="token number">3</span> <span class="token number">1</span>  <span class="token number">3</span> <span class="token punctuation">[</span>-1  -3  <span class="token number">5</span><span class="token punctuation">]</span> <span class="token number">3</span>  <span class="token number">6</span>  <span class="token number">7</span>       <span class="token number">5</span> <span class="token number">1</span>  <span class="token number">3</span>  -1 <span class="token punctuation">[</span>-3  <span class="token number">5</span>  <span class="token number">3</span><span class="token punctuation">]</span> <span class="token number">6</span>  <span class="token number">7</span>       <span class="token number">5</span> <span class="token number">1</span>  <span class="token number">3</span>  -1  -3 <span class="token punctuation">[</span><span class="token number">5</span>  <span class="token number">3</span>  <span class="token number">6</span><span class="token punctuation">]</span> <span class="token number">7</span>       <span class="token number">6</span> <span class="token number">1</span>  <span class="token number">3</span>  -1  -3  <span class="token number">5</span> <span class="token punctuation">[</span><span class="token number">3</span>  <span class="token number">6</span>  <span class="token number">7</span><span class="token punctuation">]</span>      <span class="token number">7</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹2ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šnums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>, k <span class="token operator">=</span> <span class="token number">1</span>è¾“å‡ºï¼š<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹3ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šnums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span>,-1<span class="token punctuation">]</span>, k <span class="token operator">=</span> <span class="token number">1</span>è¾“å‡ºï¼š<span class="token punctuation">[</span><span class="token number">1</span>,-1<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹4ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šnums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">9,11</span><span class="token punctuation">]</span>, k <span class="token operator">=</span> <span class="token number">2</span>è¾“å‡ºï¼š<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹5ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šnums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span>,-2<span class="token punctuation">]</span>, k <span class="token operator">=</span> <span class="token number">2</span>è¾“å‡ºï¼š<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>ç»å…¸è€ç•ªï¼Œæ»‘åŠ¨çª—å£ã€‚åŒç«¯é˜Ÿåˆ—å·¦è¾¹ç»´æŠ¤è¿‡æœŸå€¼å¼¹å‡ºï¼Œå³è¾¹ç»´æŠ¤æœ€å¤§å€¼åŠ å…¥å’Œæ·˜æ±°é˜Ÿå°¾å…ƒç´ ã€‚</p></blockquote><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><hr><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">maxSlidingWindow</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length <span class="token operator">-</span> k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> nums<span class="token punctuation">[</span>list<span class="token punctuation">.</span><span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                list<span class="token punctuation">.</span><span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            list<span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> i <span class="token operator">-</span> k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                list<span class="token punctuation">.</span><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">-</span> k <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>            res<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>list<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> LeetCodeè®­ç»ƒå½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> leetcode </tag>
            
            <tag> æ»‘åŠ¨çª—å£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode 5.æœ€é•¿å›æ–‡å­ä¸²</title>
      <link href="/2021/06/05/leetcode-5.zui-chang-hui-wen-zi-chuan/"/>
      <url>/2021/06/05/leetcode-5.zui-chang-hui-wen-zi-chuan/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ€é•¿å›æ–‡å­ä¸²"><a href="#æœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="æœ€é•¿å›æ–‡å­ä¸²"></a>æœ€é•¿å›æ–‡å­ä¸²</h1><hr><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><hr><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code>ï¼Œæ‰¾åˆ° <code>s</code> ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚</p><p><strong>ç¤ºä¾‹1ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šs <span class="token operator">=</span> <span class="token string">"babad"</span>è¾“å‡ºï¼š<span class="token string">"bab"</span>è§£é‡Šï¼š<span class="token string">"aba"</span> åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹2ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šs <span class="token operator">=</span> <span class="token string">"cbbd"</span>è¾“å‡ºï¼š<span class="token string">"bb"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹3ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šs <span class="token operator">=</span> <span class="token string">"a"</span>è¾“å‡ºï¼š<span class="token string">"a"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>ç¤ºä¾‹4ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è¾“å…¥ï¼šs <span class="token operator">=</span> <span class="token string">"ac"</span>è¾“å‡ºï¼š<span class="token string">"a"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>æç¤º</strong></p><ul><li><code>1 &lt;= s.length &lt;= 1000</code></li><li><code>s</code> ä»…ç”±æ•°å­—å’Œè‹±æ–‡å­—æ¯ï¼ˆå¤§å†™å’Œ/æˆ–å°å†™ï¼‰ç»„æˆ</li></ul><blockquote><p>æ­£å¥½åˆšå­¦å®Œmanacherçœ‹åˆ°äº†è¿™é¢˜ã€‚ç›´æ¥ç”¨manacherè§£äº†ã€‚</p><p>PSï¼šmanacherç®—æ³•ä¸€èˆ¬ç”¨æ¥æ±‚æœ€é•¿å›æ–‡å­ä¸²é•¿åº¦ã€‚</p></blockquote><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><hr><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getManacher</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> res<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            res<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'#'</span> <span class="token operator">:</span> str<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>index<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">manacher</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> charArr <span class="token operator">=</span> <span class="token function">getManacher</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> <span class="token class-name">C</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> resArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>charArr<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> resArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            resArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">R</span> <span class="token operator">&gt;</span> i <span class="token operator">?</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">R</span> <span class="token operator">-</span> i<span class="token punctuation">,</span> resArr<span class="token punctuation">[</span><span class="token class-name">C</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">+</span> resArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> resArr<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> i <span class="token operator">-</span> resArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>charArr<span class="token punctuation">[</span>i <span class="token operator">+</span> resArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> charArr<span class="token punctuation">[</span>i <span class="token operator">-</span> resArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    resArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">+</span> resArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">R</span> <span class="token operator">=</span> i <span class="token operator">+</span> resArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token class-name">C</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>resArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span>                max <span class="token operator">=</span> resArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                flag <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token class-name">String</span> res <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> flag <span class="token operator">-</span> resArr<span class="token punctuation">[</span>flag<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> flag <span class="token operator">+</span> resArr<span class="token punctuation">[</span>flag<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>charArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'#'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                res <span class="token operator">+=</span> charArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">longestPalindrome</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">String</span> res <span class="token operator">=</span> <span class="token function">manacher</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> LeetCodeè®­ç»ƒå½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> leetcode </tag>
            
            <tag> manacher </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼</title>
      <link href="/2021/06/04/jin-cheng-jian-de-tong-xin-fang-shi/"/>
      <url>/2021/06/04/jin-cheng-jian-de-tong-xin-fang-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼"><a href="#è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼" class="headerlink" title="è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼"></a>è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><hr><p>ç›¸ä¿¡ä¸å°‘åŒå­¦é¢è¯•æ—¶éƒ½é‡åˆ°è¿‡è¿›ç¨‹é€šä¿¡æ–¹å¼è¿™ä¸ªé—®é¢˜ï¼ŒåŒæ—¶è¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯æ“ä½œç³»ç»Ÿçš„é«˜é¢‘é¢è¯•é¢˜ã€‚è™½ç„¶æˆ‘ç›®å‰çš„é¢è¯•è¿˜æ²¡é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œä¸è¿‡æˆ‘çš„å®¤å‹å·²ç»ç›¸ç»§é­é‡äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä¹Ÿè¿›è¡Œäº†å……åˆ†çš„å‡†å¤‡ï¼Œå¦‚æœé¢è¯•å®˜é—®åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æœ€èµ·ç èƒ½è·Ÿä»–æ°æ‰¯ä¸ª10åˆ†é’Ÿã€‚</p><p>åºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ç›´æ¥å¼€æï¼</p><p>ç­‰ç­‰ï¼ï¼ï¼å¼€æå‰æˆ‘ä»¬è¦å…ˆæ˜ç™½ä¸€ä¸ªæ¦‚å¿µï¼Œå°±æ˜¯æ¯ä¸ªè¿›ç¨‹çš„ç”¨æˆ·åœ°å€ç©ºé—´éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸€èˆ¬è€Œè¨€æ˜¯ä¸èƒ½äº’ç›¸è®¿é—®çš„ï¼Œä½†å†…æ ¸ç©ºé—´æ˜¯æ¯ä¸ªè¿›ç¨‹éƒ½å…±äº«çš„ï¼Œæ‰€ä»¥è¿›ç¨‹ä¹‹é—´è¦é€šä¿¡å¿…é¡»é€šè¿‡å†…æ ¸ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.25zptb39t8qo.png"></p><h2 id="ç®¡é“é€šä¿¡"><a href="#ç®¡é“é€šä¿¡" class="headerlink" title="ç®¡é“é€šä¿¡"></a>ç®¡é“é€šä¿¡</h2><hr><p>ç®¡é“é€šä¿¡åˆ†ä¸ºåŒ¿åç®¡é“ï¼ˆæ— åç®¡é“ï¼‰å’Œå‘½åç®¡é“ï¼ˆæœ‰åç®¡é“ï¼‰</p><p>å…ˆè¯´åŒ¿åç®¡é“ï¼Œå…ˆçœ‹ä¸‹é¢è¿™ä¸ªlinuxå‘½ä»¤</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">ps</span> auxf <span class="token operator">|</span> <span class="token function">grep</span> mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>â€œ|â€æ˜¯<strong>ç®¡é“</strong>çš„æ„æ€ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠå‰ä¸€æ¡å‘½ä»¤çš„è¾“å‡ºä½œä¸ºåä¸€æ¡å‘½ä»¤çš„è¾“å…¥ã€‚åœ¨è¿™é‡Œå°±æ˜¯æŠŠ netstat -tulnp çš„è¾“å‡ºç»“æœä½œä¸º grep 8080 è¿™æ¡å‘½ä»¤çš„è¾“å…¥ã€‚ä»è¿™åŠŸèƒ½æè¿°ï¼Œå¯ä»¥çœ‹å‡º<strong>ç®¡é“ä¼ è¾“æ•°æ®æ˜¯å•å‘çš„</strong>ï¼Œå¦‚æœæƒ³ç›¸äº’é€šä¿¡ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ä¸ªç®¡é“æ‰è¡Œã€‚</p><p>è€Œè¿™ç§ç®¡é“æ˜¯æ²¡æœ‰åå­—çš„ï¼Œæ‰€ä»¥ç”¨â€|â€è¡¨ç¤ºçš„ç®¡é“ç§°ä¸ºåŒ¿åç®¡é“ï¼Œç”¨å®Œäº†å°±é”€æ¯ã€‚</p><p>è€Œå‘½åç®¡é“çš„åˆ›å»ºéœ€è¦æŒ‡å®šç®¡é“åå­—ï¼Œå¦‚ä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">mkfifo</span> pangHaiRui<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>pangHaiRuiå°±æ˜¯ç®¡é“çš„åç§°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ä¸€ä¸ªè¿›ç¨‹å‘è¿™ä¸ªç®¡é“é‡Œå†™æ•°æ®ï¼Œç„¶åè®©å¦ä¸€ä¸ªè¿›ç¨‹è¯»å‡ºæ¥ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">echo</span> <span class="token string">"pangHaiRui offer!"</span> <span class="token operator">&gt;</span> <span class="token builtin class-name">test</span>//å†™æ•°æ®<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™ä¸ªæ—¶å€™ç®¡é“çš„å†…å®¹æ²¡æœ‰è¢«è¯»å‡ºçš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå‘½ä»¤å°±ä¼šä¸€ç›´åœåœ¨è¿™é‡Œï¼Œåªæœ‰å½“å¦å¤–ä¸€ä¸ªè¿›ç¨‹æŠŠ test é‡Œé¢çš„å†…å®¹è¯»å‡ºæ¥çš„æ—¶å€™è¿™æ¡å‘½ä»¤æ‰ä¼šç»“æŸã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨å¦å¤–ä¸€ä¸ªè¿›ç¨‹æ¥è¯»å–</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">cat</span> <span class="token operator">&lt;</span> <span class="token builtin class-name">test</span> //è¯»æ•°æ®pangHaiRui offer<span class="token operator">!</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œç®¡é“çš„é€šçŸ¥æœºåˆ¶ç±»ä¼¼äº<strong>ç¼“å­˜</strong>ï¼Œå°±åƒä¸€ä¸ªè¿›ç¨‹æŠŠæ•°æ®æ”¾åœ¨æŸä¸ªç¼“å­˜åŒºåŸŸï¼Œç„¶åç­‰ç€å¦å¤–ä¸€ä¸ªè¿›ç¨‹å»æ‹¿ï¼Œå¹¶ä¸”æ˜¯ç®¡é“æ˜¯<strong>å•å‘ä¼ è¾“çš„ã€‚</strong></p><p>è¿™å°±è¯´æ˜ï¼Œ<strong>ç®¡é“è¿™ç§é€šä¿¡æ–¹å¼æ•ˆç‡ä½ï¼Œä¸é€‚åˆè¿›ç¨‹é—´é¢‘ç¹åœ°äº¤æ¢æ•°æ®</strong>ã€‚å½“ç„¶ï¼Œå®ƒçš„å¥½å¤„ï¼Œè‡ªç„¶å°±æ˜¯ç®€å•ï¼ŒåŒæ—¶ä¹Ÿæˆ‘ä»¬å¾ˆå®¹æ˜“å¾—çŸ¥ç®¡é“é‡Œçš„æ•°æ®å·²ç»è¢«å¦ä¸€ä¸ªè¿›ç¨‹è¯»å–äº†ã€‚</p><blockquote><p>åŒ¿åç®¡é“åˆ›å»ºçš„åŸç†</p></blockquote><p>åŒ¿åç®¡é“çš„åˆ›å»ºï¼Œéœ€è¦é€šè¿‡ä¸‹é¢çš„ç³»ç»Ÿè°ƒç”¨ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">int pipe(int fd[2])<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™é‡Œè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªåŒ¿åç®¡é“ï¼Œå¹¶è¿”å›äº†ä¸¤ä¸ªæè¿°ç¬¦ï¼Œä¸€ä¸ªæ˜¯ç®¡é“çš„è¯»å–ç«¯æè¿°ç¬¦ <code>fd[0]</code>ï¼Œå¦ä¸€ä¸ªæ˜¯ç®¡é“çš„å†™å…¥ç«¯æè¿°ç¬¦ <code>fd[1]</code>ã€‚æ³¨æ„ï¼Œè¿™ä¸ªåŒ¿åç®¡é“æ˜¯ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œåªå­˜åœ¨äºå†…å­˜ï¼Œä¸å­˜äºæ–‡ä»¶ç³»ç»Ÿä¸­ã€‚</p><p>ä½†æ˜¯è¿™ä¸¤ä¸ªæè¿°ç¬¦éƒ½æ˜¯åœ¨ä¸€ä¸ªè¿›ç¨‹é‡Œé¢ï¼Œå¹¶æ²¡æœ‰èµ·åˆ°è¿›ç¨‹é—´é€šä¿¡çš„ä½œç”¨ï¼Œæ€ä¹ˆæ ·æ‰èƒ½ä½¿å¾—ç®¡é“æ˜¯è·¨è¿‡ä¸¤ä¸ªè¿›ç¨‹çš„å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>fork</code> åˆ›å»ºå­è¿›ç¨‹ï¼Œ<strong>åˆ›å»ºçš„å­è¿›ç¨‹ä¼šå¤åˆ¶çˆ¶è¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦</strong>ï¼Œè¿™æ ·å°±åšåˆ°äº†ä¸¤ä¸ªè¿›ç¨‹å„æœ‰ä¸¤ä¸ªã€Œ <code>fd[0]</code> ä¸ <code>fd[1]</code>ã€ï¼Œä¸¤ä¸ªè¿›ç¨‹å°±å¯ä»¥é€šè¿‡å„è‡ªçš„ fd å†™å…¥å’Œè¯»å–åŒä¸€ä¸ªç®¡é“æ–‡ä»¶å®ç°è·¨è¿›ç¨‹é€šä¿¡äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.5w0crtkoyjg0.png"></p><p>ç®¡é“åªèƒ½ä¸€ç«¯å†™å…¥ï¼Œå¦ä¸€ç«¯è¯»å‡ºï¼Œæ‰€ä»¥ä¸Šé¢è¿™ç§æ¨¡å¼å®¹æ˜“é€ æˆæ··ä¹±ï¼Œå› ä¸ºçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹éƒ½å¯ä»¥åŒæ—¶å†™å…¥ï¼Œä¹Ÿéƒ½å¯ä»¥è¯»å‡ºã€‚é‚£ä¹ˆï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œé€šå¸¸çš„åšæ³•æ˜¯ï¼š</p><ul><li>çˆ¶è¿›ç¨‹å…³é—­è¯»å–çš„ fd[0]ï¼Œåªä¿ç•™å†™å…¥çš„ fd[1]ï¼›</li><li>å­è¿›ç¨‹å…³é—­å†™å…¥çš„ fd[1]ï¼Œåªä¿ç•™è¯»å–çš„ fd[0]ï¼›</li></ul><p>æ‰€ä»¥è¯´å¦‚æœéœ€è¦åŒå‘é€šä¿¡ï¼Œåˆ™åº”è¯¥åˆ›å»ºä¸¤ä¸ªç®¡é“ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä»…ä»…è§£æäº†ä½¿ç”¨ç®¡é“è¿›è¡Œçˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬ shell é‡Œé¢å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚</p><p>åœ¨ shell é‡Œé¢æ‰§è¡Œ <code>A | B</code>å‘½ä»¤çš„æ—¶å€™ï¼ŒA è¿›ç¨‹å’Œ B è¿›ç¨‹éƒ½æ˜¯ shell åˆ›å»ºå‡ºæ¥çš„å­è¿›ç¨‹ï¼ŒA å’Œ B ä¹‹é—´ä¸å­˜åœ¨çˆ¶å­å…³ç³»ï¼Œå®ƒä¿©çš„çˆ¶è¿›ç¨‹éƒ½æ˜¯ shellã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.4tq93d8gms20.png"></p><p>æ‰€ä»¥è¯´ï¼Œåœ¨ shell é‡Œé€šè¿‡ã€Œ<code>|</code>ã€åŒ¿åç®¡é“å°†å¤šä¸ªå‘½ä»¤è¿æ¥åœ¨ä¸€èµ·ï¼Œå®é™…ä¸Šä¹Ÿå°±æ˜¯åˆ›å»ºäº†å¤šä¸ªå­è¿›ç¨‹ï¼Œé‚£ä¹ˆåœ¨æˆ‘ä»¬ç¼–å†™ shell è„šæœ¬æ—¶ï¼Œèƒ½ä½¿ç”¨ä¸€ä¸ªç®¡é“æå®šçš„äº‹æƒ…ï¼Œå°±ä¸è¦å¤šç”¨ä¸€ä¸ªç®¡é“ï¼Œè¿™æ ·å¯ä»¥å‡å°‘åˆ›å»ºå­è¿›ç¨‹çš„ç³»ç»Ÿå¼€é”€ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œ<strong>å¯¹äºåŒ¿åç®¡é“ï¼Œå®ƒçš„é€šä¿¡èŒƒå›´æ˜¯å­˜åœ¨çˆ¶å­å…³ç³»çš„è¿›ç¨‹</strong>ã€‚å› ä¸ºç®¡é“æ²¡æœ‰å®ä½“ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ç®¡é“æ–‡ä»¶ï¼Œåªèƒ½é€šè¿‡ fork æ¥å¤åˆ¶çˆ¶è¿›ç¨‹ fd æ–‡ä»¶æè¿°ç¬¦ï¼Œæ¥è¾¾åˆ°é€šä¿¡çš„ç›®çš„ã€‚</p><p>å¦å¤–ï¼Œ<strong>å¯¹äºå‘½åç®¡é“ï¼Œå®ƒå¯ä»¥åœ¨ä¸ç›¸å…³çš„è¿›ç¨‹é—´ä¹Ÿèƒ½ç›¸äº’é€šä¿¡</strong>ã€‚å› ä¸ºå‘½ä»¤ç®¡é“ï¼Œæå‰åˆ›å»ºäº†ä¸€ä¸ªç±»å‹ä¸ºç®¡é“çš„è®¾å¤‡æ–‡ä»¶ï¼Œåœ¨è¿›ç¨‹é‡Œåªè¦ä½¿ç”¨è¿™ä¸ªè®¾å¤‡æ–‡ä»¶ï¼Œå°±å¯ä»¥ç›¸äº’é€šä¿¡ã€‚</p><p>ä¸ç®¡æ˜¯åŒ¿åç®¡é“è¿˜æ˜¯å‘½åç®¡é“ï¼Œè¿›ç¨‹å†™å…¥çš„æ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…æ ¸ä¸­ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹è¯»å–æ•°æ®æ—¶å€™è‡ªç„¶ä¹Ÿæ˜¯ä»å†…æ ¸ä¸­è·å–ï¼ŒåŒæ—¶é€šä¿¡æ•°æ®éƒ½éµå¾ª<strong>å…ˆè¿›å…ˆå‡º</strong>åŸåˆ™ï¼Œä¸æ”¯æŒ lseek ä¹‹ç±»çš„æ–‡ä»¶å®šä½æ“ä½œã€‚</p><p>åˆ°è¿™é‡Œç®¡é“é€šä¿¡å°±ä»‹ç»å®Œäº†ï¼Œä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºç®¡é“é€šä¿¡è™½ç„¶ç®€å•ï¼Œä½†æ˜¯æ•ˆç‡å¾ˆä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥è®²è®²æ¶ˆæ¯é˜Ÿåˆ—é€šä¿¡æ–¹å¼ï¼Œçœ‹çœ‹æ¶ˆæ¯é˜Ÿåˆ—æœ‰æ²¡æœ‰ä»€ä¹ˆæ–°èŠ±æ ·ã€‚</p><h2 id="æ¶ˆæ¯é˜Ÿåˆ—"><a href="#æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—"></a>æ¶ˆæ¯é˜Ÿåˆ—</h2><hr><p>å‰é¢è¯´åˆ°ç®¡é“çš„é€šä¿¡æ–¹å¼æ˜¯æ•ˆç‡ä½çš„ï¼Œå› æ­¤ç®¡é“ä¸é€‚åˆè¿›ç¨‹é—´é¢‘ç¹åœ°äº¤æ¢æ•°æ®ã€‚</p><p>é‚£æˆ‘ä»¬èƒ½ä¸èƒ½æŠŠè¿›ç¨‹çš„æ•°æ®æ”¾åœ¨æŸä¸ªå†…å­˜ä¹‹åå°±é©¬ä¸Šè®©è¿›ç¨‹è¿”å›å‘¢ï¼Ÿæ— éœ€ç­‰å¾…å…¶ä»–è¿›ç¨‹æ¥å–å°±è¿”å›å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>çš„é€šä¿¡æ¨¡å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚ a è¿›ç¨‹è¦ç»™ b è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œåªéœ€è¦æŠŠæ¶ˆæ¯æ”¾åœ¨å¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—é‡Œå°±è¡Œäº†ï¼Œb è¿›ç¨‹éœ€è¦çš„æ—¶å€™å†å»å¯¹åº”çš„<br>æ¶ˆæ¯é˜Ÿåˆ—é‡Œå–å‡ºæ¥ã€‚åŒç†ï¼Œb è¿›ç¨‹è¦ä¸ª a è¿›ç¨‹å‘é€æ¶ˆæ¯ä¹Ÿæ˜¯ä¸€æ ·ã€‚è¿™ç§é€šä¿¡æ–¹å¼ç±»ä¼¼äº<strong>ç¼“å­˜</strong>ã€‚</p><p>å†æ¥ï¼Œ<strong>æ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¿å­˜åœ¨å†…æ ¸ä¸­çš„æ¶ˆæ¯é“¾è¡¨</strong>ï¼Œåœ¨å‘é€æ•°æ®æ—¶ï¼Œä¼šåˆ†æˆä¸€ä¸ªä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®å•å…ƒï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯ä½“ï¼ˆæ•°æ®å—ï¼‰ï¼Œæ¶ˆæ¯ä½“æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œæ¶ˆæ¯çš„å‘é€æ–¹å’Œæ¥æ”¶æ–¹è¦çº¦å®šå¥½æ¶ˆæ¯ä½“çš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥æ¯ä¸ªæ¶ˆæ¯ä½“éƒ½æ˜¯å›ºå®šå¤§å°çš„å­˜å‚¨å—ï¼Œä¸åƒç®¡é“æ˜¯æ— æ ¼å¼çš„å­—èŠ‚æµæ•°æ®ã€‚å¦‚æœè¿›ç¨‹ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è¯»å–äº†æ¶ˆæ¯ä½“ï¼Œå†…æ ¸å°±ä¼šæŠŠè¿™ä¸ªæ¶ˆæ¯ä½“åˆ é™¤ã€‚</p><p>æ¶ˆæ¯é˜Ÿåˆ—ç”Ÿå‘½å‘¨æœŸéšå†…æ ¸ï¼Œå¦‚æœæ²¡æœ‰é‡Šæ”¾æ¶ˆæ¯é˜Ÿåˆ—æˆ–è€…æ²¡æœ‰å…³é—­æ“ä½œç³»ç»Ÿï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¼šä¸€ç›´å­˜åœ¨ï¼Œè€Œå‰é¢æåˆ°çš„åŒ¿åç®¡é“çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ˜¯éšè¿›ç¨‹çš„åˆ›å»ºè€Œå»ºç«‹ï¼Œéšè¿›ç¨‹çš„ç»“æŸè€Œé”€æ¯ã€‚</p><p>æ¶ˆæ¯è¿™ç§æ¨¡å‹ï¼Œä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡å°±åƒå¹³æ—¶å‘é‚®ä»¶ä¸€æ ·ï¼Œä½ æ¥ä¸€å°ï¼Œæˆ‘å›ä¸€å°ï¼Œå¯ä»¥é¢‘ç¹æ²Ÿé€šäº†ã€‚ä½†é‚®ä»¶çš„é€šä¿¡æ–¹å¼å­˜åœ¨ä¸è¶³çš„åœ°æ–¹æœ‰ä¸¤ç‚¹ï¼Œ<strong>ä¸€æ˜¯é€šä¿¡ä¸åŠæ—¶ï¼ŒäºŒæ˜¯é™„ä»¶ä¹Ÿæœ‰å¤§å°é™åˆ¶</strong>ï¼Œè¿™åŒæ ·ä¹Ÿæ˜¯æ¶ˆæ¯é˜Ÿåˆ—é€šä¿¡ä¸è¶³çš„ç‚¹ã€‚</p><p><strong>æ¶ˆæ¯é˜Ÿåˆ—ä¸é€‚åˆæ¯”è¾ƒå¤§æ•°æ®çš„ä¼ è¾“</strong>ï¼Œå› ä¸ºåœ¨å†…æ ¸ä¸­æ¯ä¸ªæ¶ˆæ¯ä½“éƒ½æœ‰ä¸€ä¸ªæœ€å¤§é•¿åº¦çš„é™åˆ¶ï¼ŒåŒæ—¶æ‰€æœ‰é˜Ÿåˆ—æ‰€åŒ…å«çš„å…¨éƒ¨æ¶ˆæ¯ä½“çš„æ€»é•¿åº¦ä¹Ÿæ˜¯æœ‰ä¸Šé™ã€‚åœ¨ Linux å†…æ ¸ä¸­ï¼Œä¼šæœ‰ä¸¤ä¸ªå®å®šä¹‰ <code>MSGMAX</code> å’Œ <code>MSGMNB</code>ï¼Œå®ƒä»¬ä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œåˆ†åˆ«å®šä¹‰äº†ä¸€æ¡æ¶ˆæ¯çš„æœ€å¤§é•¿åº¦å’Œä¸€ä¸ªé˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ã€‚</p><p>å¦‚æœ a è¿›ç¨‹å‘é€çš„æ•°æ®å çš„å†…å­˜æ¯”è¾ƒå¤§ï¼Œå¹¶ä¸”ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ç‰¹åˆ«é¢‘ç¹çš„è¯ï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹å°±ä¸å¤§é€‚åˆäº†ã€‚å› ä¸º a å‘é€çš„æ•°æ®å¾ˆå¤§çš„è¯ï¼Œæ„å‘³<strong>å‘é€æ¶ˆæ¯ï¼ˆæ‹·è´ï¼‰</strong>è¿™ä¸ªè¿‡ç¨‹éœ€è¦èŠ±å¾ˆå¤šæ—¶é—´æ¥è¯»å†…å­˜ã€‚</p><p><strong>æ¶ˆæ¯é˜Ÿåˆ—é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œå­˜åœ¨ç”¨æˆ·æ€ä¸å†…æ ¸æ€ä¹‹é—´çš„æ•°æ®æ‹·è´å¼€é”€</strong>ï¼Œå› ä¸ºè¿›ç¨‹å†™å…¥æ•°æ®åˆ°å†…æ ¸ä¸­çš„æ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œä¼šå‘ç”Ÿä»ç”¨æˆ·æ€æ‹·è´æ•°æ®åˆ°å†…æ ¸æ€çš„è¿‡ç¨‹ï¼ŒåŒç†å¦ä¸€è¿›ç¨‹è¯»å–å†…æ ¸ä¸­çš„æ¶ˆæ¯æ•°æ®æ—¶ï¼Œä¼šå‘ç”Ÿä»å†…æ ¸æ€æ‹·è´æ•°æ®åˆ°ç”¨æˆ·æ€çš„è¿‡ç¨‹ã€‚</p><p>é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆè§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿå½“ç„¶ï¼Œè¿™å°±è½®åˆ°æˆ‘ä»¬çš„å…±äº«å†…å­˜å‡ºåœºäº†ã€‚</p><h2 id="å…±äº«å†…å­˜"><a href="#å…±äº«å†…å­˜" class="headerlink" title="å…±äº«å†…å­˜"></a>å…±äº«å†…å­˜</h2><hr><p>æ¶ˆæ¯é˜Ÿåˆ—çš„è¯»å–å’Œå†™å…¥çš„è¿‡ç¨‹ï¼Œéƒ½ä¼šæœ‰å‘ç”Ÿç”¨æˆ·æ€ä¸å†…æ ¸æ€ä¹‹é—´çš„æ¶ˆæ¯æ‹·è´è¿‡ç¨‹ã€‚é‚£<strong>å…±äº«å†…å­˜</strong>çš„æ–¹å¼ï¼Œå°±å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚</p><p>ç°ä»£æ“ä½œç³»ç»Ÿï¼Œå¯¹äºå†…å­˜ç®¡ç†ï¼Œé‡‡ç”¨çš„æ˜¯è™šæ‹Ÿå†…å­˜æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œä¸åŒè¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜æ˜ å°„åˆ°ä¸åŒçš„ç‰©ç†å†…å­˜ä¸­ã€‚æ‰€ä»¥ï¼Œå³ä½¿è¿›ç¨‹ A å’Œ è¿›ç¨‹ B çš„è™šæ‹Ÿåœ°å€æ˜¯ä¸€æ ·çš„ï¼Œå…¶å®è®¿é—®çš„æ˜¯ä¸åŒçš„ç‰©ç†å†…å­˜åœ°å€ï¼Œå¯¹äºæ•°æ®çš„å¢åˆ æŸ¥æ”¹äº’ä¸å½±å“ã€‚</p><p><strong>å…±äº«å†…å­˜çš„æœºåˆ¶ï¼Œå°±æ˜¯æ‹¿å‡ºä¸€å—è™šæ‹Ÿåœ°å€ç©ºé—´æ¥ï¼Œæ˜ å°„åˆ°ç›¸åŒçš„ç‰©ç†å†…å­˜ä¸­</strong>ã€‚è¿™æ ·è¿™ä¸ªè¿›ç¨‹å†™å…¥çš„ä¸œè¥¿ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹é©¬ä¸Šå°±èƒ½çœ‹åˆ°äº†ï¼Œéƒ½ä¸éœ€è¦æ‹·è´æ¥æ‹·è´å»ï¼Œä¼ æ¥ä¼ å»ï¼Œå¤§å¤§æé«˜äº†è¿›ç¨‹é—´é€šä¿¡çš„é€Ÿåº¦ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/panghairui/image-hosting@master/panghairui-blog/image.1ovfie2lztmo.png" alt="image"></p><p>ç”¨äº†å…±äº«å†…å­˜é€šä¿¡æ–¹å¼ï¼Œå¸¦æ¥æ–°çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯å¦‚æœå¤šä¸ªè¿›ç¨‹åŒæ—¶ä¿®æ”¹åŒä¸€ä¸ªå…±äº«å†…å­˜ï¼Œå¾ˆæœ‰å¯èƒ½å°±å†²çªäº†ã€‚ä¾‹å¦‚ä¸¤ä¸ªè¿›ç¨‹éƒ½åŒæ—¶å†™ä¸€ä¸ªåœ°å€ï¼Œé‚£å…ˆå†™çš„é‚£ä¸ªè¿›ç¨‹ä¼šå‘ç°å†…å®¹è¢«åˆ«äººè¦†ç›–äº†ã€‚</p><p>è¿™å°±éœ€è¦æ¥ä¸‹æ¥çš„å¤§å“¥ç™»åœºäº†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¿¡å·é‡é€šä¿¡æ˜¯å¦‚ä½•é˜²æ­¢å¤šè¿›ç¨‹ç«äº‰å…±äº«èµ„æºï¼Œè€Œé€ æˆæ•°æ®é”™ä¹±çš„ã€‚</p><h2 id="ä¿¡å·é‡"><a href="#ä¿¡å·é‡" class="headerlink" title="ä¿¡å·é‡"></a>ä¿¡å·é‡</h2><hr><p><strong>ä¿¡å·é‡å…¶å®æ˜¯ä¸€ä¸ªæ•´å‹çš„è®¡æ•°å™¨ï¼Œä¸»è¦ç”¨äºå®ç°è¿›ç¨‹é—´çš„äº’æ–¥ä¸åŒæ­¥ï¼Œè€Œä¸æ˜¯ç”¨äºç¼“å­˜è¿›ç¨‹é—´é€šä¿¡çš„æ•°æ®</strong>ã€‚</p><p>ä¿¡å·é‡è¡¨ç¤ºèµ„æºçš„æ•°é‡ï¼Œæ§åˆ¶ä¿¡å·é‡çš„æ–¹å¼æœ‰ä¸¤ç§åŸå­æ“ä½œï¼š</p><ul><li>ä¸€ä¸ªæ˜¯ <strong>P æ“ä½œ</strong>ï¼Œè¿™ä¸ªæ“ä½œä¼šæŠŠä¿¡å·é‡å‡å» -1ï¼Œç›¸å‡åå¦‚æœä¿¡å·é‡ &lt; 0ï¼Œåˆ™è¡¨æ˜èµ„æºå·²è¢«å ç”¨ï¼Œè¿›ç¨‹éœ€é˜»å¡ç­‰å¾…ï¼›ç›¸å‡åå¦‚æœä¿¡å·é‡ &gt;= 0ï¼Œåˆ™è¡¨æ˜è¿˜æœ‰èµ„æºå¯ä½¿ç”¨ï¼Œè¿›ç¨‹å¯æ­£å¸¸ç»§ç»­æ‰§è¡Œã€‚</li><li>å¦ä¸€ä¸ªæ˜¯ <strong>V æ“ä½œ</strong>ï¼Œè¿™ä¸ªæ“ä½œä¼šæŠŠä¿¡å·é‡åŠ ä¸Š 1ï¼Œç›¸åŠ åå¦‚æœä¿¡å·é‡ &lt;= 0ï¼Œåˆ™è¡¨æ˜å½“å‰æœ‰é˜»å¡ä¸­çš„è¿›ç¨‹ï¼Œäºæ˜¯ä¼šå°†è¯¥è¿›ç¨‹å”¤é†’è¿è¡Œï¼›ç›¸åŠ åå¦‚æœä¿¡å·é‡ &gt; 0ï¼Œåˆ™è¡¨æ˜å½“å‰æ²¡æœ‰é˜»å¡ä¸­çš„è¿›ç¨‹ï¼›</li></ul><p>P æ“ä½œæ˜¯ç”¨åœ¨è¿›å…¥å…±äº«èµ„æºä¹‹å‰ï¼ŒV æ“ä½œæ˜¯ç”¨åœ¨ç¦»å¼€å…±äº«èµ„æºä¹‹åï¼Œè¿™ä¸¤ä¸ªæ“ä½œæ˜¯å¿…é¡»æˆå¯¹å‡ºç°çš„ã€‚</p><p><strong>äº’æ–¥ä¿¡å·é‡</strong>å¯ä»¥ä¿è¯å…±äº«å†…å­˜åœ¨ä»»ä½•æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨è®¿é—®ï¼Œè¿™å°±å¾ˆå¥½çš„ä¿æŠ¤äº†å…±äº«å†…å­˜ã€‚</p><p>å¦å¤–ï¼Œåœ¨å¤šè¿›ç¨‹é‡Œï¼Œæ¯ä¸ªè¿›ç¨‹å¹¶ä¸ä¸€å®šæ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œå®ƒä»¬åŸºæœ¬æ˜¯ä»¥å„è‡ªç‹¬ç«‹çš„ã€ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æ¨è¿›ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬åˆå¸Œæœ›å¤šä¸ªè¿›ç¨‹èƒ½å¯†åˆ‡åˆä½œï¼Œä»¥å®ç°ä¸€ä¸ªå…±åŒçš„ä»»åŠ¡ã€‚</p><p>è¿™ä¸ªæ—¶å€™å°±éœ€è¦<strong>åŒæ­¥ä¿¡å·é‡</strong>æ¥è§£å†³åŒæ­¥é—®é¢˜äº†ã€‚</p><p>ä¿¡å·é‡çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨æ¥å®ç°è¿›ç¨‹ä¹‹é—´çš„äº’æ–¥ä¸åŒæ­¥ã€‚æ‰€ä»¥è¯´ï¼Œä¿¡å·é‡ä¹Ÿæ˜¯è¿›ç¨‹ä¹‹é—´çš„ä¸€ç§é€šä¿¡æ–¹å¼ã€‚</p><h2 id="ä¿¡å·"><a href="#ä¿¡å·" class="headerlink" title="ä¿¡å·"></a>ä¿¡å·</h2><hr><p>ä¸Šé¢è¯´çš„è¿›ç¨‹é—´é€šä¿¡ï¼Œéƒ½æ˜¯å¸¸è§„çŠ¶æ€ä¸‹çš„å·¥ä½œæ¨¡å¼ã€‚<strong>å¯¹äºå¼‚å¸¸æƒ…å†µä¸‹çš„å·¥ä½œæ¨¡å¼ï¼Œå°±éœ€è¦ç”¨ã€Œä¿¡å·ã€çš„æ–¹å¼æ¥é€šçŸ¥è¿›ç¨‹ã€‚</strong></p><p>ä¿¡å·è·Ÿä¿¡å·é‡è™½ç„¶åå­—ç›¸ä¼¼åº¦ 66.66%ï¼Œä½†ä¸¤è€…ç”¨é€”å®Œå…¨ä¸ä¸€æ ·ï¼Œå°±å¥½åƒ Java å’Œ JavaScript çš„åŒºåˆ«ã€‚</p><p>ä¿¡å·äº‹ä»¶çš„æ¥æºä¸»è¦æœ‰ç¡¬ä»¶æ¥æºï¼ˆå¦‚é”®ç›˜ Cltr+C ï¼‰å’Œè½¯ä»¶æ¥æºï¼ˆå¦‚ kill å‘½ä»¤ï¼‰ã€‚</p><p>ä¿¡å·æ˜¯è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ä¸­<strong>å”¯ä¸€çš„å¼‚æ­¥é€šä¿¡æœºåˆ¶</strong>ï¼Œå› ä¸ºå¯ä»¥åœ¨ä»»ä½•æ—¶å€™å‘é€ä¿¡å·ç»™æŸä¸€è¿›ç¨‹ï¼Œä¸€æ—¦æœ‰ä¿¡å·äº§ç”Ÿï¼Œæˆ‘ä»¬å°±æœ‰ä¸‹é¢è¿™å‡ ç§ï¼Œç”¨æˆ·è¿›ç¨‹å¯¹ä¿¡å·çš„å¤„ç†æ–¹å¼ã€‚</p><p><strong>1.æ‰§è¡Œé»˜è®¤æ“ä½œ</strong>ã€‚Linux å¯¹æ¯ç§ä¿¡å·éƒ½è§„å®šäº†é»˜è®¤æ“ä½œï¼Œä¾‹å¦‚ï¼Œä¸Šé¢åˆ—è¡¨ä¸­çš„ SIGTERM ä¿¡å·ï¼Œå°±æ˜¯ç»ˆæ­¢è¿›ç¨‹çš„æ„æ€ã€‚Core çš„æ„æ€æ˜¯ Core Dumpï¼Œä¹Ÿå³ç»ˆæ­¢è¿›ç¨‹åï¼Œé€šè¿‡ Core Dump å°†å½“å‰è¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ä¿å­˜åœ¨æ–‡ä»¶é‡Œé¢ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜äº‹åè¿›è¡Œåˆ†æé—®é¢˜åœ¨å“ªé‡Œã€‚</p><p><strong>2.æ•æ‰ä¿¡å·</strong>ã€‚æˆ‘ä»¬å¯ä»¥ä¸ºä¿¡å·å®šä¹‰ä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ã€‚å½“ä¿¡å·å‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬å°±æ‰§è¡Œç›¸åº”çš„ä¿¡å·å¤„ç†å‡½æ•°ã€‚</p><p><strong>3.å¿½ç•¥ä¿¡å·</strong>ã€‚å½“æˆ‘ä»¬ä¸å¸Œæœ›å¤„ç†æŸäº›ä¿¡å·çš„æ—¶å€™ï¼Œå°±å¯ä»¥å¿½ç•¥è¯¥ä¿¡å·ï¼Œä¸åšä»»ä½•å¤„ç†ã€‚æœ‰ä¸¤ä¸ªä¿¡å·æ˜¯åº”ç”¨è¿›ç¨‹æ— æ³•æ•æ‰å’Œå¿½ç•¥çš„ï¼Œå³ <code>SIGKILL</code> å’Œ <code>SEGSTOP</code>ï¼Œå®ƒä»¬ç”¨äºåœ¨ä»»ä½•æ—¶å€™ä¸­æ–­æˆ–ç»“æŸæŸä¸€è¿›ç¨‹ã€‚</p><h2 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h2><hr><p>å‰é¢æåˆ°çš„ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜ã€ä¿¡å·é‡å’Œä¿¡å·éƒ½æ˜¯åœ¨åŒä¸€å°ä¸»æœºä¸Šè¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ï¼Œé‚£è¦æƒ³<strong>è·¨ç½‘ç»œä¸ä¸åŒä¸»æœºä¸Šçš„è¿›ç¨‹ä¹‹é—´é€šä¿¡ï¼Œå°±éœ€è¦ Socket é€šä¿¡äº†ã€‚</strong></p><p>ä¾‹å¦‚æˆ‘ä»¬å¹³æ—¶é€šè¿‡æµè§ˆå™¨å‘èµ·ä¸€ä¸ª http è¯·æ±‚ï¼Œç„¶åæœåŠ¡å™¨ç»™ä½ è¿”å›å¯¹åº”çš„æ•°æ®ï¼Œè¿™ç§å°±æ˜¯é‡‡ç”¨ Socket çš„é€šä¿¡æ–¹å¼äº†ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><hr><p>ç”±äºæ¯ä¸ªè¿›ç¨‹çš„ç”¨æˆ·ç©ºé—´éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸èƒ½ç›¸äº’è®¿é—®ï¼Œè¿™æ—¶å°±éœ€è¦å€ŸåŠ©å†…æ ¸ç©ºé—´æ¥å®ç°è¿›ç¨‹é—´é€šä¿¡ï¼ŒåŸå› å¾ˆç®€å•ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æ˜¯å…±äº«ä¸€ä¸ªå†…æ ¸ç©ºé—´ã€‚</p><p>Linux å†…æ ¸æä¾›äº†ä¸å°‘è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼ï¼Œå…¶ä¸­æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ç®¡é“ï¼Œç®¡é“åˆ†ä¸ºã€ŒåŒ¿åç®¡é“ã€å’Œã€Œå‘½åç®¡é“ã€ã€‚</p><p><strong>åŒ¿åç®¡é“</strong>é¡¾åæ€ä¹‰ï¼Œå®ƒæ²¡æœ‰åå­—æ ‡è¯†ï¼ŒåŒ¿åç®¡é“æ˜¯ç‰¹æ®Šæ–‡ä»¶åªå­˜åœ¨äºå†…å­˜ï¼Œæ²¡æœ‰å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œshell å‘½ä»¤ä¸­çš„ã€Œ<code>|</code>ã€ç«–çº¿å°±æ˜¯åŒ¿åç®¡é“ï¼Œé€šä¿¡çš„æ•°æ®æ˜¯<strong>æ— æ ¼å¼çš„æµå¹¶ä¸”å¤§å°å—é™</strong>ï¼Œé€šä¿¡çš„æ–¹å¼æ˜¯<strong>å•å‘</strong>çš„ï¼Œæ•°æ®åªèƒ½åœ¨ä¸€ä¸ªæ–¹å‘ä¸ŠæµåŠ¨ï¼Œå¦‚æœè¦åŒå‘é€šä¿¡ï¼Œéœ€è¦åˆ›å»ºä¸¤ä¸ªç®¡é“ï¼Œå†æ¥<strong>åŒ¿åç®¡é“æ˜¯åªèƒ½ç”¨äºå­˜åœ¨çˆ¶å­å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡</strong>ï¼ŒåŒ¿åç®¡é“çš„ç”Ÿå‘½å‘¨æœŸéšç€è¿›ç¨‹åˆ›å»ºè€Œå»ºç«‹ï¼Œéšç€è¿›ç¨‹ç»ˆæ­¢è€Œæ¶ˆå¤±ã€‚</p><p><strong>å‘½åç®¡é“</strong>çªç ´äº†åŒ¿åç®¡é“åªèƒ½åœ¨äº²ç¼˜å…³ç³»è¿›ç¨‹é—´çš„é€šä¿¡é™åˆ¶ï¼Œå› ä¸ºä½¿ç”¨å‘½åç®¡é“çš„å‰æï¼Œéœ€è¦åœ¨æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªç±»å‹ä¸º p çš„è®¾å¤‡æ–‡ä»¶ï¼Œé‚£ä¹ˆæ¯«æ— å…³ç³»çš„è¿›ç¨‹å°±å¯ä»¥é€šè¿‡è¿™ä¸ªè®¾å¤‡æ–‡ä»¶è¿›è¡Œé€šä¿¡ã€‚å¦å¤–ï¼Œä¸ç®¡æ˜¯åŒ¿åç®¡é“è¿˜æ˜¯å‘½åç®¡é“ï¼Œè¿›ç¨‹å†™å…¥çš„æ•°æ®éƒ½æ˜¯<strong>ç¼“å­˜åœ¨å†…æ ¸</strong>ä¸­ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹è¯»å–æ•°æ®æ—¶å€™è‡ªç„¶ä¹Ÿæ˜¯ä»å†…æ ¸ä¸­è·å–ï¼ŒåŒæ—¶é€šä¿¡æ•°æ®éƒ½éµå¾ª<strong>å…ˆè¿›å…ˆå‡º</strong>åŸåˆ™ï¼Œä¸æ”¯æŒ lseek ä¹‹ç±»çš„æ–‡ä»¶å®šä½æ“ä½œã€‚</p><p><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>å…‹æœäº†ç®¡é“é€šä¿¡çš„æ•°æ®æ˜¯æ— æ ¼å¼çš„å­—èŠ‚æµçš„é—®é¢˜ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å®é™…ä¸Šæ˜¯ä¿å­˜åœ¨å†…æ ¸çš„ã€Œæ¶ˆæ¯é“¾è¡¨ã€ï¼Œæ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯ä½“æ˜¯å¯ä»¥ç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œå‘é€æ•°æ®æ—¶ï¼Œä¼šè¢«åˆ†æˆä¸€ä¸ªä¸€ä¸ªç‹¬ç«‹çš„æ¶ˆæ¯ä½“ï¼Œå½“ç„¶æ¥æ”¶æ•°æ®æ—¶ï¼Œä¹Ÿè¦ä¸å‘é€æ–¹å‘é€çš„æ¶ˆæ¯ä½“çš„æ•°æ®ç±»å‹ä¿æŒä¸€è‡´ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯è¯»å–çš„æ•°æ®æ˜¯æ­£ç¡®çš„ã€‚æ¶ˆæ¯é˜Ÿåˆ—é€šä¿¡çš„é€Ÿåº¦ä¸æ˜¯æœ€åŠæ—¶çš„ï¼Œæ¯•ç«Ÿ<strong>æ¯æ¬¡æ•°æ®çš„å†™å…¥å’Œè¯»å–éƒ½éœ€è¦ç»è¿‡ç”¨æˆ·æ€ä¸å†…æ ¸æ€ä¹‹é—´çš„æ‹·è´è¿‡ç¨‹ã€‚</strong></p><p><strong>å…±äº«å†…å­˜</strong>å¯ä»¥è§£å†³æ¶ˆæ¯é˜Ÿåˆ—é€šä¿¡ä¸­ç”¨æˆ·æ€ä¸å†…æ ¸æ€ä¹‹é—´æ•°æ®æ‹·è´è¿‡ç¨‹å¸¦æ¥çš„å¼€é”€ï¼Œ<strong>å®ƒç›´æ¥åˆ†é…ä¸€ä¸ªå…±äº«ç©ºé—´ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½å¯ä»¥ç›´æ¥è®¿é—®</strong>ï¼Œå°±åƒè®¿é—®è¿›ç¨‹è‡ªå·±çš„ç©ºé—´ä¸€æ ·å¿«æ·æ–¹ä¾¿ï¼Œä¸éœ€è¦é™·å…¥å†…æ ¸æ€æˆ–è€…ç³»ç»Ÿè°ƒç”¨ï¼Œå¤§å¤§æé«˜äº†é€šä¿¡çš„é€Ÿåº¦ï¼Œäº«æœ‰<strong>æœ€å¿«</strong>çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ä¹‹åã€‚ä½†æ˜¯ä¾¿æ·é«˜æ•ˆçš„å…±äº«å†…å­˜é€šä¿¡ï¼Œ<strong>å¸¦æ¥æ–°çš„é—®é¢˜ï¼Œå¤šè¿›ç¨‹ç«äº‰åŒä¸ªå…±äº«èµ„æºä¼šé€ æˆæ•°æ®çš„é”™ä¹±ã€‚</strong></p><p>é‚£ä¹ˆï¼Œå°±éœ€è¦<strong>ä¿¡å·é‡</strong>æ¥ä¿æŠ¤å…±äº«èµ„æºï¼Œä»¥ç¡®ä¿ä»»ä½•æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹è®¿é—®å…±äº«èµ„æºï¼Œè¿™ç§æ–¹å¼å°±æ˜¯äº’æ–¥è®¿é—®ã€‚<strong>ä¿¡å·é‡ä¸ä»…å¯ä»¥å®ç°è®¿é—®çš„äº’æ–¥æ€§ï¼Œè¿˜å¯ä»¥å®ç°è¿›ç¨‹é—´çš„åŒæ­¥</strong>ï¼Œä¿¡å·é‡å…¶å®æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè¡¨ç¤ºçš„æ˜¯èµ„æºä¸ªæ•°ï¼Œå…¶å€¼å¯ä»¥é€šè¿‡ä¸¤ä¸ªåŸå­æ“ä½œæ¥æ§åˆ¶ï¼Œåˆ†åˆ«æ˜¯ <strong>P æ“ä½œå’Œ V æ“ä½œ</strong>ã€‚</p><p>ä¸ä¿¡å·é‡åå­—å¾ˆç›¸ä¼¼çš„å«<strong>ä¿¡å·</strong>ï¼Œå®ƒä¿©åå­—è™½ç„¶ç›¸ä¼¼ï¼Œä½†åŠŸèƒ½ä¸€ç‚¹å„¿éƒ½ä¸ä¸€æ ·ã€‚ä¿¡å·æ˜¯è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ä¸­<strong>å”¯ä¸€çš„å¼‚æ­¥é€šä¿¡æœºåˆ¶</strong>ï¼Œä¿¡å·å¯ä»¥åœ¨åº”ç”¨è¿›ç¨‹å’Œå†…æ ¸ä¹‹é—´ç›´æ¥äº¤äº’ï¼Œå†…æ ¸ä¹Ÿå¯ä»¥åˆ©ç”¨ä¿¡å·æ¥é€šçŸ¥ç”¨æˆ·ç©ºé—´çš„è¿›ç¨‹å‘ç”Ÿäº†å“ªäº›ç³»ç»Ÿäº‹ä»¶ï¼Œä¿¡å·äº‹ä»¶çš„æ¥æºä¸»è¦æœ‰ç¡¬ä»¶æ¥æºï¼ˆå¦‚é”®ç›˜ Cltr+C ï¼‰å’Œè½¯ä»¶æ¥æºï¼ˆå¦‚ kill å‘½ä»¤ï¼‰ï¼Œä¸€æ—¦æœ‰ä¿¡å·å‘ç”Ÿï¼Œ<strong>è¿›ç¨‹æœ‰ä¸‰ç§æ–¹å¼å“åº”ä¿¡å· 1. æ‰§è¡Œé»˜è®¤æ“ä½œã€2. æ•æ‰ä¿¡å·ã€3. å¿½ç•¥ä¿¡å·</strong>ã€‚æœ‰ä¸¤ä¸ªä¿¡å·æ˜¯åº”ç”¨è¿›ç¨‹æ— æ³•æ•æ‰å’Œå¿½ç•¥çš„ï¼Œå³ <code>SIGKILL</code> å’Œ <code>SEGSTOP</code>ï¼Œè¿™æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬èƒ½åœ¨ä»»ä½•æ—¶å€™ç»“æŸæˆ–åœæ­¢æŸä¸ªè¿›ç¨‹ã€‚</p><p>å‰é¢è¯´åˆ°çš„é€šä¿¡æœºåˆ¶ï¼Œéƒ½æ˜¯å·¥ä½œäºåŒä¸€å°ä¸»æœºï¼Œå¦‚æœ<strong>è¦ä¸ä¸åŒä¸»æœºçš„è¿›ç¨‹é—´é€šä¿¡ï¼Œé‚£ä¹ˆå°±éœ€è¦ Socket é€šä¿¡äº†</strong>ã€‚Socket å®é™…ä¸Šä¸ä»…ç”¨äºä¸åŒçš„ä¸»æœºè¿›ç¨‹é—´é€šä¿¡ï¼Œè¿˜å¯ä»¥ç”¨äºæœ¬åœ°ä¸»æœºè¿›ç¨‹é—´é€šä¿¡ï¼Œå¯æ ¹æ®åˆ›å»º Socket çš„ç±»å‹ä¸åŒï¼Œåˆ†ä¸ºä¸‰ç§å¸¸è§çš„é€šä¿¡æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯åŸºäº TCP åè®®çš„é€šä¿¡æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯åŸºäº UDP åè®®çš„é€šä¿¡æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯æœ¬åœ°è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ã€‚</p><p>ä»¥ä¸Šï¼Œå°±æ˜¯è¿›ç¨‹é—´é€šä¿¡çš„ä¸»è¦æœºåˆ¶äº†ã€‚ä½ å¯èƒ½ä¼šé—®äº†ï¼Œé‚£çº¿ç¨‹é€šä¿¡é—´çš„æ–¹å¼å‘¢ï¼Ÿ</p><p>åŒä¸ªè¿›ç¨‹ä¸‹çš„çº¿ç¨‹ä¹‹é—´éƒ½æ˜¯å…±äº«è¿›ç¨‹çš„èµ„æºï¼Œåªè¦æ˜¯å…±äº«å˜é‡éƒ½å¯ä»¥åšåˆ°çº¿ç¨‹é—´é€šä¿¡ï¼Œæ¯”å¦‚å…¨å±€å˜é‡ï¼Œæ‰€ä»¥å¯¹äºçº¿ç¨‹é—´å…³æ³¨çš„ä¸æ˜¯é€šä¿¡æ–¹å¼ï¼Œè€Œæ˜¯å…³æ³¨å¤šçº¿ç¨‹ç«äº‰å…±äº«èµ„æºçš„é—®é¢˜ï¼Œä¿¡å·é‡ä¹ŸåŒæ ·å¯ä»¥åœ¨çº¿ç¨‹é—´å®ç°äº’æ–¥ä¸åŒæ­¥ï¼š</p><ul><li>äº’æ–¥çš„æ–¹å¼ï¼Œå¯ä¿è¯ä»»æ„æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºï¼›</li><li>åŒæ­¥çš„æ–¹å¼ï¼Œå¯ä¿è¯çº¿ç¨‹ A åº”åœ¨çº¿ç¨‹ B ä¹‹å‰æ‰§è¡Œï¼›</li></ul><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><hr><p>çœ‹äº†ä¸Šé¢çš„æè¿°ï¼Œä½ åº”è¯¥çŸ¥é“é¢è¯•çš„æ—¶å€™è¯¥æ€ä¹ˆå’Œé¢è¯•å®˜â€å¯¹çº¿â€äº†å§ï¼Œå…ˆä»‹ç»ç®¡é“é€šä¿¡ï¼Œç„¶åè¯´ä¸€ä¸‹ç®¡é“é€šä¿¡çš„ç¼ºç‚¹ï¼Œç´§æ¥ç€å¼•å‡ºæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå†è¯´æ¶ˆæ¯é˜Ÿåˆ—çš„ç¼ºç‚¹ï¼Œå†å¼•å‡ºå…±äº«å†…å­˜ï¼Œä¹‹åè¯´å‡ºå…±äº«å†…å­˜çš„å±€é™æ€§ï¼Œç„¶åå¼•å‡ºä¿¡å·é‡â€¦â€¦</p><p>æˆ‘ç›¸ä¿¡è¿™ä¸€å¥—ç»„åˆæ‹³ä¸‹æ¥ï¼Œé¢è¯•å®˜è‚¯å®šä¼šå¯¹ä½ å°è±¡æ·±åˆ»ã€‚è€Œè¿™ï¼Œå°±æ˜¯æˆåŠŸçš„å¼€å§‹ã€‚</p><p>æœ¬ç¯‡æ–‡ç« åŸºæœ¬éƒ½æ˜¯å‚ç…§ç†¬ä¸™çš„æ–‡ç« å†™çš„ï¼Œä¸»è¦æ˜¯ä»–å†™çš„å¤ªå¥½äº†ï¼ï¼ï¼åœ¨è¿™é‡Œè®°å½•ä¸‹æ¥ï¼Œä¹Ÿæ–¹ä¾¿æˆ‘å›æ¥å¤ä¹ ã€‚</p><p>æœ€åï¼Œç¥å¤§å®¶éƒ½èƒ½æ”¶åˆ°è‡ªå·±å¿ƒä»ªçš„offer~</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯•æŒ‡å— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> é¢è¯•æŒ‡å— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•å¤‡å¿˜å½•</title>
      <link href="/2021/06/03/suan-fa-bei-wang-lu/"/>
      <url>/2021/06/03/suan-fa-bei-wang-lu/</url>
      
        <content type="html"><![CDATA[<h1 id="ç®—æ³•å¤‡å¿˜å½•"><a href="#ç®—æ³•å¤‡å¿˜å½•" class="headerlink" title="ç®—æ³•å¤‡å¿˜å½•"></a>ç®—æ³•å¤‡å¿˜å½•</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>â€‹    æ­¤æ–‡ç« å¹¶ä¸è®²è§£ç®—æ³•çš„å…·ä½“å®ç°ï¼Œåªå­˜å‚¨ä¸€äº›ç®—æ³•æ¨¡æ¿ï¼Œä»¥ä¾¿å¤ä¹ ã€‚</p><span id="more"></span><h2 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h2><hr><h3 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">studySort</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> quickSort <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">QuickSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> cur<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> t<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">&gt;</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">;</span>        <span class="token punctuation">}</span>        i <span class="token operator">=</span> l<span class="token punctuation">;</span>        j <span class="token operator">=</span> r<span class="token punctuation">;</span>        cur <span class="token operator">=</span> arr<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">&lt;=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                j<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">&gt;=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                i<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                t <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        arr<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> cur<span class="token punctuation">;</span>        <span class="token class-name">QuickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> l<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">QuickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token class-name">QuickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">studySort</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> mergeSort <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">Merge</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> temp<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> mid<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> l<span class="token punctuation">,</span> k <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&lt;=</span> mid <span class="token operator">&amp;&amp;</span> k <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                temp<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                temp<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&lt;=</span> mid<span class="token punctuation">)</span> <span class="token punctuation">{</span>            temp<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>k <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>            temp<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            arr<span class="token punctuation">[</span>l <span class="token operator">+</span> t<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">MergeSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> temp<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">&gt;=</span> r<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token punctuation">;</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token class-name">MergeSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">MergeSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Merge</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> l<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token class-name">MergeSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">studySort</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> heapSort <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">heapify</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token keyword">int</span> heapSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> heapSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> largest <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> heapSize <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span>                    <span class="token operator">?</span> left <span class="token operator">+</span> <span class="token number">1</span>                    <span class="token operator">:</span> left<span class="token punctuation">;</span>            largest <span class="token operator">=</span> arr<span class="token punctuation">[</span>largest<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">?</span> largest <span class="token operator">:</span> index<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>largest <span class="token operator">==</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> largest<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>            index <span class="token operator">=</span> largest<span class="token punctuation">;</span>            left <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">HeapSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>arr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">heapInsert</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> heapSize <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">--</span>heapSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>heapSize <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">heapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> heapSize<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">--</span>heapSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> t <span class="token operator">=</span> arr<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">heapInsert</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span><span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            index <span class="token operator">=</span> <span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token class-name">HeapSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="æ¡¶æ’åº"><a href="#æ¡¶æ’åº" class="headerlink" title="æ¡¶æ’åº"></a>æ¡¶æ’åº</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">studySort</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> bucketSort <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">BucketSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> ma <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">,</span> mi <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            ma <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>ma<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            mi <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>mi<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token punctuation">(</span>ma <span class="token operator">-</span> mi<span class="token punctuation">)</span> <span class="token operator">/</span> arr<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ArrayList</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> cur <span class="token operator">=</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> mi<span class="token punctuation">)</span> <span class="token operator">/</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>            res<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> res<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> res<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> res<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                arr<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token class-name">BucketSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­—ç¬¦ä¸²ç®—æ³•"><a href="#å­—ç¬¦ä¸²ç®—æ³•" class="headerlink" title="å­—ç¬¦ä¸²ç®—æ³•"></a>å­—ç¬¦ä¸²ç®—æ³•</h2><hr><h3 id="KMPç®—æ³•"><a href="#KMPç®—æ³•" class="headerlink" title="KMPç®—æ³•"></a>KMPç®—æ³•</h3><blockquote><p>è§£å†³æ¨¡å¼ä¸²åŒ¹é…é—®é¢˜ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(N + M)</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">studyString</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> studyKMP <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">KMP</span><span class="token punctuation">(</span><span class="token class-name">String</span> s1<span class="token punctuation">,</span> <span class="token class-name">String</span> s2<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> next <span class="token operator">=</span> <span class="token function">getNext</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> s1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> s2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">==</span> s2<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                i<span class="token operator">++</span><span class="token punctuation">;</span>                j<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>next<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    i<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    j <span class="token operator">=</span> next<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> j <span class="token operator">==</span> s2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> i <span class="token operator">-</span> j <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getNext</span><span class="token punctuation">(</span><span class="token class-name">String</span> s2<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>s2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        next<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        next<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&lt;</span> next<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s2<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> s2<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                next<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>cur<span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                cur <span class="token operator">=</span> next<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                next<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> next<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"abcaabcfv"</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token string">"abcfv"</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token function">KMP</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="Manacherç®—æ³•"><a href="#Manacherç®—æ³•" class="headerlink" title="Manacherç®—æ³•"></a>Manacherç®—æ³•</h3><blockquote><p>è§£å†³æ±‚æœ€é•¿å›æ–‡å­ä¸²é•¿åº¦çš„é—®é¢˜ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(N)</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">studyString</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> studyManacher <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">manacherString</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> res<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            res<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'#'</span> <span class="token operator">:</span> str<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>index<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">manacher</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>str <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> charArr <span class="token operator">=</span> <span class="token function">manacherString</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>charArr<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> <span class="token class-name">C</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> <span class="token class-name">R</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> charArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            pArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">R</span> <span class="token operator">&gt;</span> i <span class="token operator">?</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>pArr<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token class-name">C</span> <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token class-name">R</span> <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">+</span> pArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> charArr<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> i <span class="token operator">-</span> pArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>charArr<span class="token punctuation">[</span>i <span class="token operator">+</span> pArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> charArr<span class="token punctuation">[</span>i <span class="token operator">-</span> pArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    pArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">+</span> pArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token class-name">R</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">R</span> <span class="token operator">=</span> i <span class="token operator">+</span> pArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token class-name">C</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            max <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> pArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> max <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"abcbaabcbaf"</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token function">manacher</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…¶ä»–ç®—æ³•"><a href="#å…¶ä»–ç®—æ³•" class="headerlink" title="å…¶ä»–ç®—æ³•"></a>å…¶ä»–ç®—æ³•</h2><hr><h3 id="BFPRTç®—æ³•"><a href="#BFPRTç®—æ³•" class="headerlink" title="BFPRTç®—æ³•"></a>BFPRTç®—æ³•</h3><blockquote><p>è§£å†³æ±‚ç¬¬å‡ å¤§çš„æ•°çš„é—®é¢˜ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(N)</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">studyOther</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> studyBFPRT <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> index1<span class="token punctuation">,</span> <span class="token keyword">int</span> index2<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> tmp <span class="token operator">=</span> arr<span class="token punctuation">[</span>index1<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>index1<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>index2<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>index2<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">insertionSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> begin <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> end <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">!=</span> begin<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getMedian</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">insertionSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> sum <span class="token operator">=</span> end <span class="token operator">+</span> begin<span class="token punctuation">;</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>sum <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>sum <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> arr<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">,</span> <span class="token keyword">int</span> pivotValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> small <span class="token operator">=</span> begin <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> cur <span class="token operator">=</span> begin<span class="token punctuation">;</span>        <span class="token keyword">int</span> big <span class="token operator">=</span> end <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> big<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>cur<span class="token punctuation">]</span> <span class="token operator">&lt;</span> pivotValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token operator">++</span>small<span class="token punctuation">,</span> cur<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>cur<span class="token punctuation">]</span> <span class="token operator">&gt;</span> pivotValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> <span class="token operator">--</span>big<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                cur<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> range <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        range<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> small <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        range<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> big <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> range<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">medianOfMedians</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> num <span class="token operator">=</span> end <span class="token operator">-</span> begin <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> offset <span class="token operator">=</span> num <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> mArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>num <span class="token operator">/</span> <span class="token number">5</span> <span class="token operator">+</span> offset<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> mArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> beginI <span class="token operator">=</span> begin <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> endI <span class="token operator">=</span> beginI <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">;</span>            mArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getMedian</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> beginI<span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>end<span class="token punctuation">,</span> endI<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token function">bfprt</span><span class="token punctuation">(</span>mArr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> mArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> mArr<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">bfprt</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>begin <span class="token operator">==</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> arr<span class="token punctuation">[</span>begin<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> pivot <span class="token operator">=</span> <span class="token function">medianOfMedians</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pivotRange <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> end<span class="token punctuation">,</span> pivot<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> pivotRange<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> pivotRange<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> pivotRange<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">bfprt</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> pivotRange<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">bfprt</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> pivotRange<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">copyArray</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> res<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            res<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getMinKthByBFPRT</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> copyArr <span class="token operator">=</span> <span class="token function">copyArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">bfprt</span><span class="token punctuation">(</span>copyArr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> copyArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getMinKNumsByBFPRT</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">||</span> k <span class="token operator">&gt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span>            <span class="token keyword">return</span> arr<span class="token punctuation">;</span>        <span class="token keyword">int</span> minKth <span class="token operator">=</span> <span class="token function">getMinKthByBFPRT</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> minKth<span class="token punctuation">)</span> <span class="token punctuation">{</span>                res<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> index <span class="token operator">!=</span> res<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            res<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> minKth<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token function">getMinKNumsByBFPRT</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="è®¾è®¡LRUç¼“å­˜"><a href="#è®¾è®¡LRUç¼“å­˜" class="headerlink" title="è®¾è®¡LRUç¼“å­˜"></a>è®¾è®¡LRUç¼“å­˜</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">studyOther</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> studyLRU <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">V</span> value<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> last<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// åŒå‘é“¾è¡¨</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">NodeDoubleLinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> head<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> tail<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">NodeDoubleLinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// å¦‚æœä¸€ä¸ªæ–°çš„èŠ‚ç‚¹åŠ å…¥ï¼Œå°±æ”¾åˆ°å°¾å·´ä¸Šå»</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addNode</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> newNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>newNode <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> newNode<span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> newNode<span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>                newNode<span class="token punctuation">.</span>last <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> newNode<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment">// åŒå‘é“¾è¡¨ä¸Šä¸€å®šæœ‰è¿™ä¸ªnode</span>        <span class="token comment">// nodeåˆ†ç¦»å‡ºï¼Œä½†æ˜¯nodeå‰åç¯å¢ƒé‡æ–°è¿æ¥</span>        <span class="token comment">// nodeæ”¾åˆ°å°¾å·´ä¸Šå»</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">moveNodeToTail</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> node<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">==</span> node<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">==</span> node<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> node<span class="token punctuation">.</span>next<span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>last <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                node<span class="token punctuation">.</span>last<span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">.</span>next<span class="token punctuation">;</span>                node<span class="token punctuation">.</span>next<span class="token punctuation">.</span>last <span class="token operator">=</span> node<span class="token punctuation">.</span>last<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            node<span class="token punctuation">.</span>last <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">;</span>            node<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> node<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">removeHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> res<span class="token punctuation">.</span>next<span class="token punctuation">;</span>                res<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>last <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> res<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyCache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> keyNodeMap<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">NodeDoubleLinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> nodeList<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> capacity<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">MyCache</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>capacity <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"should be more than 0."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>keyNodeMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>nodeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NodeDoubleLinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>capacity <span class="token operator">=</span> capacity<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>nodeList<span class="token punctuation">.</span><span class="token function">moveNodeToTail</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> res<span class="token punctuation">.</span>value<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>                node<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>nodeList<span class="token punctuation">.</span><span class="token function">moveNodeToTail</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>nodeList<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeMostUnusedCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">removeMostUnusedCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> removeNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeList<span class="token punctuation">.</span><span class="token function">removeHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>keyNodeMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>removeNode<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">MyCache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> testCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyCache</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        testCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        testCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        testCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>testCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>testCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        testCache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>testCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>testCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="Morriséå†"><a href="#Morriséå†" class="headerlink" title="Morriséå†"></a>Morriséå†</h3><blockquote><p>ä»¥éé€’å½’çš„æ–¹å¼éå†äºŒå‰æ ‘ï¼Œä¸”ä¸éœ€è¦é¢å¤–ç©ºé—´ã€‚</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">studyTree</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>swing<span class="token punctuation">.</span>plaf<span class="token punctuation">.</span></span><span class="token class-name">IconUIResource</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> morrisTree <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>        <span class="token class-name">Node</span> left<span class="token punctuation">;</span>        <span class="token class-name">Node</span> right<span class="token punctuation">;</span>        <span class="token keyword">int</span> val<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> data<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// ä¸­åº</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">morrisIn</span><span class="token punctuation">(</span><span class="token class-name">Node</span> head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">Node</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token class-name">Node</span> mostRight <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            mostRight <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>mostRight <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">while</span><span class="token punctuation">(</span>mostRight<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> mostRight<span class="token punctuation">.</span>right <span class="token operator">!=</span> cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    mostRight <span class="token operator">=</span> mostRight<span class="token punctuation">.</span>right<span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>mostRight<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    mostRight<span class="token punctuation">.</span>right <span class="token operator">=</span> cur<span class="token punctuation">;</span>                    cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>                    <span class="token keyword">continue</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    mostRight<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>right<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// å‰åº</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">morrisPre</span><span class="token punctuation">(</span><span class="token class-name">Node</span> head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">Node</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token class-name">Node</span> mostRight <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            mostRight <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>mostRight <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">while</span><span class="token punctuation">(</span>mostRight<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> mostRight<span class="token punctuation">.</span>right <span class="token operator">!=</span> cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    mostRight <span class="token operator">=</span> mostRight<span class="token punctuation">.</span>right<span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>mostRight<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    mostRight<span class="token punctuation">.</span>right <span class="token operator">=</span> cur<span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>                    <span class="token keyword">continue</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    mostRight<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>right<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// ååº</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">morrisPos</span><span class="token punctuation">(</span><span class="token class-name">Node</span> head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">Node</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token class-name">Node</span> mostRight <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            mostRight <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>mostRight <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">while</span><span class="token punctuation">(</span>mostRight<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> mostRight<span class="token punctuation">.</span>right <span class="token operator">!=</span> cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    mostRight <span class="token operator">=</span> mostRight<span class="token punctuation">.</span>right<span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>mostRight<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    mostRight<span class="token punctuation">.</span>right <span class="token operator">=</span> cur<span class="token punctuation">;</span>                    cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>                    <span class="token keyword">continue</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                    mostRight<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                    <span class="token function">printEdge</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>right<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">printEdge</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printEdge</span><span class="token punctuation">(</span><span class="token class-name">Node</span> head<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Node</span> tail <span class="token operator">=</span> <span class="token function">reverseEdge</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Node</span> cur <span class="token operator">=</span> tail<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>right<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">reverseEdge</span><span class="token punctuation">(</span>tail<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Node</span> <span class="token function">reverseEdge</span><span class="token punctuation">(</span><span class="token class-name">Node</span> from<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Node</span> pre <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">Node</span> next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>from <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            next <span class="token operator">=</span> from<span class="token punctuation">.</span>right<span class="token punctuation">;</span>            from<span class="token punctuation">.</span>right <span class="token operator">=</span> pre<span class="token punctuation">;</span>            pre <span class="token operator">=</span> from<span class="token punctuation">;</span>            from <span class="token operator">=</span> next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> pre<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Node</span> head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        head<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        head<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        head<span class="token punctuation">.</span>left<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        head<span class="token punctuation">.</span>left<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        head<span class="token punctuation">.</span>right<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        head<span class="token punctuation">.</span>right<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">morrisIn</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">morrisPre</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">morrisPos</span><span class="token punctuation">(</span>head<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="å®ç°è·³è¡¨"><a href="#å®ç°è·³è¡¨" class="headerlink" title="å®ç°è·³è¡¨"></a>å®ç°è·³è¡¨</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">studyListNode</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token comment">// è·³è¡¨</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudySkipList</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SkipListNode</span> <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token class-name">Integer</span> value<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SkipListNode</span><span class="token punctuation">&gt;</span></span> nextNodes<span class="token punctuation">;</span> <span class="token comment">// é•¿åº¦ä¸ºå±‚æ•° nextNodes[0]ä¸ºç¬¬ä¸€å±‚ä¸Šï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å•¥</span>        <span class="token keyword">public</span> <span class="token class-name">SkipListNode</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>            nextNodes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SkipListNode</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SkipList</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">SkipListNode</span> head<span class="token punctuation">;</span> <span class="token comment">// å·¨å°</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> maxLevel<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span> <span class="token comment">// åŠ è¿›æ¥äº†å¤šå°‘ä¸ªKey</span>        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">double</span> PROBABILITY <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">SkipList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            maxLevel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SkipListNode</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            head<span class="token punctuation">.</span>nextNodes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">SkipListNode</span> <span class="token function">getHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> head<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">contains</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                size<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> level <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> PROBABILITY<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    level<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">while</span><span class="token punctuation">(</span>level <span class="token operator">&gt;</span> maxLevel<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    head<span class="token punctuation">.</span>nextNodes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    maxLevel<span class="token operator">++</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token class-name">SkipListNode</span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SkipListNode</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">SkipListNode</span> current <span class="token operator">=</span> head<span class="token punctuation">;</span>                <span class="token keyword">do</span> <span class="token punctuation">{</span>                    current <span class="token operator">=</span> <span class="token function">findNext</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> current<span class="token punctuation">,</span> level<span class="token punctuation">)</span><span class="token punctuation">;</span>                    newNode<span class="token punctuation">.</span>nextNodes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> current<span class="token punctuation">.</span>nextNodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>level<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    current<span class="token punctuation">.</span>nextNodes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>level<span class="token punctuation">,</span> newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>level<span class="token operator">--</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> deleteValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">contains</span><span class="token punctuation">(</span>deleteValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">SkipListNode</span> deleteNode <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>deleteValue<span class="token punctuation">)</span><span class="token punctuation">;</span>                size<span class="token operator">--</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> level <span class="token operator">=</span> maxLevel<span class="token punctuation">;</span>                <span class="token class-name">SkipListNode</span> current <span class="token operator">=</span> head<span class="token punctuation">;</span>                <span class="token keyword">do</span> <span class="token punctuation">{</span>                    current <span class="token operator">=</span> <span class="token function">findNext</span><span class="token punctuation">(</span>deleteNode<span class="token punctuation">.</span>value<span class="token punctuation">,</span> current<span class="token punctuation">,</span> level<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>deleteNode<span class="token punctuation">.</span>nextNodes<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> level<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        current<span class="token punctuation">.</span>nextNodes<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>level<span class="token punctuation">,</span> deleteNode<span class="token punctuation">.</span>nextNodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>level<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>level<span class="token operator">--</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token class-name">SkipListNode</span> <span class="token function">findNext</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> e<span class="token punctuation">,</span> <span class="token class-name">SkipListNode</span> current<span class="token punctuation">,</span> <span class="token keyword">int</span> level<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">SkipListNode</span> next <span class="token operator">=</span> current<span class="token punctuation">.</span>nextNodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>level<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">Integer</span> value <span class="token operator">=</span> next<span class="token punctuation">.</span>value<span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">lessThan</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                current <span class="token operator">=</span> next<span class="token punctuation">;</span>                next <span class="token operator">=</span> current<span class="token punctuation">.</span>nextNodes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>level<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> current<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> size<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">SkipListNode</span> node <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> node <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token function">equalTo</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>value<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token class-name">SkipListNode</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> head<span class="token punctuation">,</span> maxLevel<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token class-name">SkipListNode</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> e<span class="token punctuation">,</span> <span class="token class-name">SkipListNode</span> current<span class="token punctuation">,</span> <span class="token keyword">int</span> level<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">do</span> <span class="token punctuation">{</span>                current <span class="token operator">=</span> <span class="token function">findNext</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> current<span class="token punctuation">,</span> level<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>level<span class="token operator">--</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> current<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">lessThan</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> a<span class="token punctuation">,</span> <span class="token class-name">Integer</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">equalTo</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> a<span class="token punctuation">,</span> <span class="token class-name">Integer</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
